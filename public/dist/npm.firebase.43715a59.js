(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"3Kre":function(t,e,n){"use strict";n.r(e),n.d(e,"factory",function(){return R}),n.d(e,"getGlobalVars",function(){return k}),n.d(e,"registerAnalytics",function(){return L}),n.d(e,"resetGlobalVars",function(){return A}),n.d(e,"settings",function(){return O});var d,r,i,o,s=n("wj3C"),a=n.n(s),h=(n("fSjL"),n("mrSG")),u=n("q/0M"),c=n("zVF4"),l=n("S+S0"),f="measurementId",p="firebase_id",v="origin",g="https://www.googletagmanager.com/gtag/js";(r=d=d||{}).EVENT="event",r.SET="set",r.CONFIG="config",(o=i=i||{}).ADD_SHIPPING_INFO="add_shipping_info",o.ADD_PAYMENT_INFO="add_payment_info",o.ADD_TO_CART="add_to_cart",o.ADD_TO_WISHLIST="add_to_wishlist",o.BEGIN_CHECKOUT="begin_checkout",o.CHECKOUT_PROGRESS="checkout_progress",o.EXCEPTION="exception",o.GENERATE_LEAD="generate_lead",o.LOGIN="login",o.PAGE_VIEW="page_view",o.PURCHASE="purchase",o.REFUND="refund",o.REMOVE_FROM_CART="remove_from_cart",o.SCREEN_VIEW="screen_view",o.SEARCH="search",o.SELECT_CONTENT="select_content",o.SELECT_ITEM="select_item",o.SELECT_PROMOTION="select_promotion",o.SET_CHECKOUT_OPTION="set_checkout_option",o.SHARE="share",o.SIGN_UP="sign_up",o.TIMING_COMPLETE="timing_complete",o.VIEW_CART="view_cart",o.VIEW_ITEM="view_item",o.VIEW_ITEM_LIST="view_item_list",o.VIEW_PROMOTION="view_promotion",o.VIEW_SEARCH_RESULTS="view_search_results";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var y,m=new u.Logger("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(t,n,e){var f,p,r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[n].push(arguments)};return window[e]&&"function"==typeof window[e]&&(r=window[e]),window[e]=(f=r,p=t,function(t,e,n){if(t===d.EVENT){var r=[];if(n&&n.send_to){var i=n.send_to;Array.isArray(i)||(i=[i]);for(var o=0,s=i;o<s.length;o++){var a=s[o],u=p[a];if(!u){r=[];break}r.push(u)}}if(0===r.length)for(var c=0,h=Object.values(p);c<h.length;c++){var l=h[c];r.push(l)}Promise.all(r).then(function(){return f(d.EVENT,e,n||{})}).catch(function(t){return m.error(t)})}else t===d.CONFIG?(p[e]||Promise.resolve()).then(function(){f(d.CONFIG,e,n)}).catch(function(t){return m.error(t)}):f(d.SET,e)}),{gtagCore:r,wrappedGtag:window[e]}}var w,b,E=((y={})["no-ga-id"]='"'+f+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',y["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",y["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",y["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",y),I=new c.ErrorFactory("analytics","Analytics",E),T={},S="dataLayer",C="gtag",N=!1;function A(t,e){void 0===t&&(t=!1),void 0===e&&(e={}),N=t,T=e,S="dataLayer",C="gtag"}function k(){return{initializedIdPromisesMap:T}}function O(t){if(N)throw I.create("already-initialized");t.dataLayerName&&(S=t.dataLayerName),t.gtagName&&(C=t.gtagName)}function R(t,e){var n,r,i,o,s,a,u,c=t.options[f];if(!c)throw I.create("no-ga-id");if(null!=T[c])throw I.create("already-exists",{id:c});return N||(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(g))return r}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()||(a=S,(u=document.createElement("script")).src=g+"?l="+a,u.async=!0,document.head.appendChild(u)),o=S,s=[],Array.isArray(window[o])?s=window[o]:window[o]=s,r=(n=_(T,S,C)).wrappedGtag,i=n.gtagCore,b=r,w=i,N=!0),T[c]=function(r,i,o){return Object(h.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(h.__generator)(this,function(t){switch(t.label){case 0:return[4,i.getId()];case 1:return e=t.sent(),o("js",new Date),o(d.CONFIG,r.options[f],((n={})[p]=e,n[v]="firebase",n.update=!0,n)),[2]}})})}(t,e,w),{app:t,logEvent:function(t,e,n){return r=b,i=c,o=t,u=(s=e)||{},(a=n)&&a.global||(u=Object(h.__assign)(Object(h.__assign)({},s),{send_to:i})),void r(d.EVENT,o,u||{});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var r,i,o,s,a,u},setCurrentScreen:function(t,e){return n=b,r=c,i=t,void((o=e)&&o.global?n(d.SET,{screen_name:i}):n(d.CONFIG,r,{update:!0,screen_name:i}));var n,r,i,o},setUserId:function(t,e){return n=b,r=c,i=t,void((o=e)&&o.global?n(d.SET,{user_id:i}):n(d.CONFIG,r,{update:!0,user_id:i}));var n,r,i,o},setUserProperties:function(t,e){return function(t,e,n,r){if(r&&r.global){for(var i={},o=0,s=Object.keys(n);o<s.length;o++){var a=s[o];i["user_properties."+a]=n[a]}t(d.SET,i)}else t(d.CONFIG,e,{update:!0,user_properties:n})}(b,c,t,e)},setAnalyticsCollectionEnabled:function(t){return e=t,void(window["ga-disable-"+c]=!e);var e}}}var P="@firebase/analytics",D="0.3.8",x="analytics";function L(t){t.INTERNAL.registerComponent(new l.Component(x,function(t){return R(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:O,EventName:i})),t.INTERNAL.registerComponent(new l.Component("analytics-internal",function(t){try{return{logEvent:t.getProvider(x).getImmediate().logEvent}}catch(t){throw I.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),t.registerVersion(P,D)}L(a.a)},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,v=n("mrSG"),i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,f=n("q/0M"),l=n("zVF4"),p=n("x7I3"),o=n("S+S0"),d=i.SDK_VERSION,g=new f.Logger("@firebase/firestore");function y(){return g.logLevel}function m(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];g.logLevel<=f.LogLevel.DEBUG&&(e=n.map(_),g.debug.apply(g,v.__spreadArrays(["Firestore ("+d+"): "+t],e)))}function h(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];g.logLevel<=f.LogLevel.ERROR&&(e=n.map(_),g.error.apply(g,v.__spreadArrays(["Firestore ("+d+"): "+t],e)))}function _(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+d+") INTERNAL ASSERTION FAILED: "+t;throw h(e),new Error(e)}function b(t){t||O()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s=(a.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},a);function a(){}function E(t,e){return t<e?-1:e<t?1:0}function u(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function c(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}var I=(Object.defineProperty(T.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),T.prototype.isEqual=function(t){return t instanceof T&&t.projectId===this.projectId&&t.database===this.database},T.prototype.o=function(t){return E(this.projectId,t.projectId)||E(this.database,t.database)},T);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T(t,e){this.projectId=t,this.database=e||"(default)"}function S(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function C(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function N(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A,k,R=(W.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.u(s,t))return a}},W.prototype.has=function(t){return void 0!==this.get(t)},W.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},W.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},W.prototype.forEach=function(a){C(this.l,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];a(o,s)}})},W.prototype._=function(){return N(this.l)},W),P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},D=(k=Error,v.__extends(B,k),B),x=(q.now=function(){return q.fromMillis(Date.now())},q.fromDate=function(t){return q.fromMillis(t.getTime())},q.fromMillis=function(t){var e=Math.floor(t/1e3);return new q(e,1e6*(t-1e3*e))},q.prototype.toDate=function(){return new Date(this.toMillis())},q.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},q.prototype.T=function(t){return this.seconds===t.seconds?E(this.nanoseconds,t.nanoseconds):E(this.seconds,t.seconds)},q.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},q.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},q.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},q),L=(V.I=function(t){return new V(t)},V.min=function(){return new V(new x(0,0))},V.prototype.o=function(t){return this.timestamp.T(t.timestamp)},V.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},V.prototype.A=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},V.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},V.prototype.R=function(){return this.timestamp},V),M=(Object.defineProperty(j.prototype,"length",{get:function(){return this.m},enumerable:!0,configurable:!0}),j.prototype.isEqual=function(t){return 0===j.P(this,t)},j.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof j?t.forEach(function(t){e.push(t)}):e.push(t),this.V(e)},j.prototype.limit=function(){return this.offset+this.length},j.prototype.g=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},j.prototype.p=function(){return this.V(this.segments,this.offset,this.length-1)},j.prototype.v=function(){return this.segments[this.offset]},j.prototype.S=function(){return this.get(this.length-1)},j.prototype.get=function(t){return this.segments[this.offset+t]},j.prototype._=function(){return 0===this.length},j.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},j.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},j.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},j.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},j.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},j),F=(A=M,v.__extends(U,A),U.prototype.V=function(t,e,n){return new U(t,e,n)},U.prototype.N=function(){return this.F().join("/")},U.prototype.toString=function(){return this.N()},U.$=function(t){if(0<=t.indexOf("//"))throw new D(P.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new U(t.split("/").filter(function(t){return 0<t.length}))},U);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(){return null!==A&&A.apply(this,arguments)||this}function j(t,e,n){void 0===e?e=0:e>t.length&&O(),void 0===n?n=t.length-e:n>t.length-e&&O(),this.segments=t,this.offset=e,this.m=n}function V(t){this.timestamp=t}function q(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new D(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new D(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new D(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new D(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function B(t,e){var n=this;return(n=k.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function W(t,e){this.h=t,this.u=e,this.l={}}F.k=new F([]);var H,G=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Q=(H=M,v.__extends(K,H),K.prototype.V=function(t,e,n){return new K(t,e,n)},K.M=function(t){return G.test(t)},K.prototype.N=function(){return this.F().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),K.M(t)||(t="`"+t+"`"),t}).join(".")},K.prototype.toString=function(){return this.N()},K.prototype.L=function(){return 1===this.length&&"__name__"===this.get(0)},K.O=function(){return new K(["__name__"])},K.B=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new D(P.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new D(P.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new D(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new D(P.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new K(e)},K);function K(){return null!==H&&H.apply(this,arguments)||this}Q.k=new Q([]);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var z=(X.q=function(t){return new X(F.$(t).g(5))},X.prototype.U=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},X.prototype.isEqual=function(t){return null!==t&&0===F.P(this.path,t.path)},X.prototype.toString=function(){return this.path.toString()},X.P=function(t,e){return F.P(t.path,e.path)},X.W=function(t){return t.length%2==0},X.j=function(t){return new X(new F(t.slice()))},X);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t){this.path=t}function Y(t){return null==t}function J(t){return-0===t&&1/t==-1/0}function $(t){return"number"==typeof t&&Number.isInteger(t)&&!J(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */z.EMPTY=new z(new F([]));
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Z=(tt.fromBase64String=function(t){return new tt(atob(t))},tt.fromUint8Array=function(t){return new tt(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},tt.prototype.toBase64=function(){return t=this.K,btoa(t);var t},tt.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.K)},tt.prototype.G=function(){return 2*this.K.length},tt.prototype.o=function(t){return E(this.K,t.K)},tt.prototype.isEqual=function(t){return this.K===t.K},tt);function tt(t){this.K=t}Z.H=new Z("");function et(t){this.count=t}var nt,rt,it=(ot.prototype.X=function(t){return new ot(this.target,this.targetId,this.Y,t,this.J,this.lastLimboFreeSnapshotVersion,this.resumeToken)},ot.prototype.Z=function(t,e){return new ot(this.target,this.targetId,this.Y,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},ot.prototype.tt=function(t){return new ot(this.target,this.targetId,this.Y,this.sequenceNumber,this.J,t,this.resumeToken)},ot);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t,e,n,r,i,o,s){void 0===i&&(i=L.min()),void 0===o&&(o=L.min()),void 0===s&&(s=Z.H),this.target=t,this.targetId=e,this.Y=n,this.sequenceNumber=r,this.J=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function st(t){switch(t){case P.OK:return O(),0;case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return 1;default:return O(),0}}function at(t){if(void 0===t)return h("GRPC error has no .code"),P.UNKNOWN;switch(t){case nt.OK:return P.OK;case nt.CANCELLED:return P.CANCELLED;case nt.UNKNOWN:return P.UNKNOWN;case nt.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case nt.INTERNAL:return P.INTERNAL;case nt.UNAVAILABLE:return P.UNAVAILABLE;case nt.UNAUTHENTICATED:return P.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case nt.NOT_FOUND:return P.NOT_FOUND;case nt.ALREADY_EXISTS:return P.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return P.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case nt.ABORTED:return P.ABORTED;case nt.OUT_OF_RANGE:return P.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return P.UNIMPLEMENTED;case nt.DATA_LOSS:return P.DATA_LOSS;default:return O()}}(rt=nt=nt||{})[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ut=(pt.prototype.et=function(t,e){return new pt(this.P,this.root.et(t,e,this.P).st(null,null,ht.nt,null,null))},pt.prototype.remove=function(t){return new pt(this.P,this.root.remove(t,this.P).st(null,null,ht.nt,null,null))},pt.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},pt.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},pt.prototype._=function(){return this.root._()},Object.defineProperty(pt.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),pt.prototype.it=function(){return this.root.it()},pt.prototype.rt=function(){return this.root.rt()},pt.prototype.ot=function(t){return this.root.ot(t)},pt.prototype.forEach=function(n){this.ot(function(t,e){return n(t,e),!1})},pt.prototype.toString=function(){var n=[];return this.ot(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},pt.prototype.ht=function(t){return this.root.ht(t)},pt.prototype.at=function(){return new ct(this.root,null,this.P,!1)},pt.prototype.ut=function(t){return new ct(this.root,t,this.P,!1)},pt.prototype.ct=function(){return new ct(this.root,null,this.P,!0)},pt.prototype.lt=function(t){return new ct(this.root,t,this.P,!0)},pt),ct=(ft.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},ft.prototype.wt=function(){return 0<this.ft.length},ft.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},ft),ht=(lt.prototype.st=function(t,e,n,r,i){return new lt(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},lt.prototype._=function(){return!1},lt.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},lt.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},lt.prototype.min=function(){return this.left._()?this:this.left.min()},lt.prototype.it=function(){return this.min().key},lt.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},lt.prototype.et=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.st(null,null,null,r.left.et(t,e,n),null):0===i?r.st(null,e,null,null,null):r.st(null,null,null,null,r.right.et(t,e,n))).Et()},lt.prototype.It=function(){if(this.left._())return lt.EMPTY;var t=this;return t.left.At()||t.left.left.At()||(t=t.Rt()),(t=t.st(null,null,null,t.left.It(),null)).Et()},lt.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left._()||r.left.At()||r.left.left.At()||(r=r.Rt()),r=r.st(null,null,null,r.left.remove(t,e),null);else{if(r.left.At()&&(r=r.Pt()),r.right._()||r.right.At()||r.right.left.At()||(r=r.Vt()),0===e(t,r.key)){if(r.right._())return lt.EMPTY;n=r.right.min(),r=r.st(n.key,n.value,null,null,r.right.It())}r=r.st(null,null,null,null,r.right.remove(t,e))}return r.Et()},lt.prototype.At=function(){return this.color},lt.prototype.Et=function(){var t=this;return t.right.At()&&!t.left.At()&&(t=t.gt()),t.left.At()&&t.left.left.At()&&(t=t.Pt()),t.left.At()&&t.right.At()&&(t=t.pt()),t},lt.prototype.Rt=function(){var t=this.pt();return t.right.left.At()&&(t=(t=(t=t.st(null,null,null,null,t.right.Pt())).gt()).pt()),t},lt.prototype.Vt=function(){var t=this.pt();return t.left.left.At()&&(t=(t=t.Pt()).pt()),t},lt.prototype.gt=function(){var t=this.st(null,null,lt.RED,null,this.right.left);return this.right.st(null,null,this.color,t,null)},lt.prototype.Pt=function(){var t=this.st(null,null,lt.RED,this.left.right,null);return this.left.st(null,null,this.color,null,t)},lt.prototype.pt=function(){var t=this.left.st(null,null,!this.left.color,null,null),e=this.right.st(null,null,!this.right.color,null,null);return this.st(null,null,!this.color,t,e)},lt.prototype.yt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},lt.prototype.bt=function(){if(this.At()&&this.left.At())throw O();if(this.right.At())throw O();var t=this.left.bt();if(t!==this.right.bt())throw O();return t+(this.At()?0:1)},lt);function lt(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:lt.RED,this.left=null!=r?r:lt.EMPTY,this.right=null!=i?i:lt.EMPTY,this.size=this.left.size+1+this.right.size}function ft(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}function pt(t,e){this.P=t,this.root=e||ht.EMPTY}function dt(){this.size=0}ht.EMPTY=null,ht.RED=!0,ht.nt=!1,ht.EMPTY=(Object.defineProperty(dt.prototype,"key",{get:function(){throw O()},enumerable:!0,configurable:!0}),Object.defineProperty(dt.prototype,"value",{get:function(){throw O()},enumerable:!0,configurable:!0}),Object.defineProperty(dt.prototype,"color",{get:function(){throw O()},enumerable:!0,configurable:!0}),Object.defineProperty(dt.prototype,"left",{get:function(){throw O()},enumerable:!0,configurable:!0}),Object.defineProperty(dt.prototype,"right",{get:function(){throw O()},enumerable:!0,configurable:!0}),dt.prototype.st=function(t,e,n,r,i){return this},dt.prototype.et=function(t,e,n){return new ht(t,e)},dt.prototype.remove=function(t,e){return this},dt.prototype._=function(){return!0},dt.prototype.ot=function(t){return!1},dt.prototype.ht=function(t){return!1},dt.prototype.it=function(){return null},dt.prototype.rt=function(){return null},dt.prototype.At=function(){return!1},dt.prototype.yt=function(){return!0},dt.prototype.bt=function(){return 0},new dt);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vt=(_t.prototype.has=function(t){return null!==this.data.get(t)},_t.prototype.first=function(){return this.data.it()},_t.prototype.last=function(){return this.data.rt()},Object.defineProperty(_t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),_t.prototype.indexOf=function(t){return this.data.indexOf(t)},_t.prototype.forEach=function(n){this.data.ot(function(t,e){return n(t),!1})},_t.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(0<=this.P(r.key,t[1]))return;e(r.key)}},_t.prototype.St=function(t,e){for(var n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},_t.prototype.Dt=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},_t.prototype.at=function(){return new gt(this.data.at())},_t.prototype.ut=function(t){return new gt(this.data.ut(t))},_t.prototype.add=function(t){return this.st(this.data.remove(t).et(t,!0))},_t.prototype.delete=function(t){return this.has(t)?this.st(this.data.remove(t)):this},_t.prototype._=function(){return this.data._()},_t.prototype.Ct=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},_t.prototype.isEqual=function(t){if(!(t instanceof _t))return!1;if(this.size!==t.size)return!1;for(var e=this.data.at(),n=t.data.at();e.wt();){var r=e.dt().key,i=n.dt().key;if(0!==this.P(r,i))return!1}return!0},_t.prototype.F=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},_t.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},_t.prototype.st=function(t){var e=new _t(this.P);return e.data=t,e},_t),gt=(mt.prototype.dt=function(){return this.Ft.dt().key},mt.prototype.wt=function(){return this.Ft.wt()},mt),yt=new ut(z.P);function mt(t){this.Ft=t}function _t(t){this.P=t,this.data=new ut(this.P)}var wt=new ut(z.P);var bt=new ut(z.P),Et=new vt(z.P);function It(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Et,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Tt=new vt(E);function St(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r}function Ct(t,e){this.targetId=t,this.ee=e}function Nt(t,e,n,r){void 0===n&&(n=Z.H),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At=(qt.kt=function(t){return new qt(t.P)},qt.prototype.has=function(t){return null!=this.Nt.get(t)},qt.prototype.get=function(t){return this.Nt.get(t)},qt.prototype.first=function(){return this.$t.it()},qt.prototype.last=function(){return this.$t.rt()},qt.prototype._=function(){return this.$t._()},qt.prototype.indexOf=function(t){var e=this.Nt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(qt.prototype,"size",{get:function(){return this.$t.size},enumerable:!0,configurable:!0}),qt.prototype.forEach=function(n){this.$t.ot(function(t,e){return n(t),!1})},qt.prototype.add=function(t){var e=this.delete(t.key);return e.st(e.Nt.et(t.key,t),e.$t.et(t,null))},qt.prototype.delete=function(t){var e=this.get(t);return e?this.st(this.Nt.remove(t),this.$t.remove(e)):this},qt.prototype.isEqual=function(t){if(!(t instanceof qt))return!1;if(this.size!==t.size)return!1;for(var e=this.$t.at(),n=t.$t.at();e.wt();){var r=e.dt().key,i=n.dt().key;if(!r.isEqual(i))return!1}return!0},qt.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},qt.prototype.st=function(t,e){var n=new qt;return n.P=this.P,n.Nt=t,n.$t=e,n},qt),kt=(Vt.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);!n||0!==t.type&&3===n.type?this.xt=this.xt.et(e,t):3===t.type&&1!==n.type?this.xt=this.xt.et(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.et(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.et(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.et(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.et(e,{type:2,doc:t.doc}):O()},Vt.prototype.Mt=function(){var n=[];return this.xt.ot(function(t,e){n.push(e)}),n},Vt),Ot=(jt.Ut=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new jt(t,e,At.kt(e),i,n,r,!0,!1)},Object.defineProperty(jt.prototype,"hasPendingWrites",{get:function(){return!this.Ot._()},enumerable:!0,configurable:!0}),jt.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.Ot.isEqual(t.Ot)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.Lt.isEqual(t.Lt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},jt),Rt=(Ut.Gt=function(t,e){var n=new Map;return n.set(t,Pt.zt(t,e)),new Ut(L.min(),n,Tt,yt,It())},Ut),Pt=(Ft.zt=function(t,e){return new Ft(Z.H,e,It(),It(),It())},Ft),Dt=(Object.defineProperty(Mt.prototype,"Ht",{get:function(){return this.re},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"he",{get:function(){return 0!==this.se},enumerable:!0,configurable:!0}),Object.defineProperty(Mt.prototype,"ae",{get:function(){return this.oe},enumerable:!0,configurable:!0}),Mt.prototype.ue=function(t){0<t.G()&&(this.oe=!0,this.ie=t)},Mt.prototype.ce=function(){var n=It(),r=It(),i=It();return this.ne.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:O()}}),new Pt(this.ie,this.re,n,r,i)},Mt.prototype.le=function(){this.oe=!1,this.ne=Wt()},Mt.prototype._e=function(t,e){this.oe=!0,this.ne=this.ne.et(t,e)},Mt.prototype.fe=function(t){this.oe=!0,this.ne=this.ne.remove(t)},Mt.prototype.de=function(){this.se+=1},Mt.prototype.we=function(){--this.se},Mt.prototype.Te=function(){this.oe=!0,this.re=!0},Mt),xt=(Lt.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof kn?this.Ve(r,t.te):t.te instanceof On&&this.ge(r,t.key,t.te)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.ge(s,t.key,t.te)}},Lt.prototype.pe=function(n){var r=this;this.ye(n,function(t){var e=r.be(t);switch(n.state){case 0:r.ve(t)&&e.ue(n.resumeToken);break;case 1:e.we(),e.he||e.le(),e.ue(n.resumeToken);break;case 2:e.we(),e.he||r.removeTarget(t);break;case 3:r.ve(t)&&(e.Te(),e.ue(n.resumeToken));break;case 4:r.ve(t)&&(r.Se(t),e.ue(n.resumeToken));break;default:O()}})},Lt.prototype.ye=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Ie.forEach(function(t,e){r.ve(e)&&n(e)})},Lt.prototype.De=function(t){var e,n,r=t.targetId,i=t.ee.count,o=this.Ce(r);o&&(ar(e=o.target)?0===i?(n=new z(e.path),this.ge(r,n,new On(n,L.min()))):b(1===i):this.Fe(r)!==i&&(this.Se(r),this.me=this.me.add(r)))},Lt.prototype.Ne=function(i){var o=this,s=new Map;this.Ie.forEach(function(t,e){var n,r=o.Ce(e);r&&(t.Ht&&ar(r.target)&&(n=new z(r.target.path),null!==o.Ae.get(n)||o.$e(e,n)||o.ge(e,n,new On(n,i))),t.ae&&(s.set(e,t.ce()),t.le()))});var r=It();this.Re.forEach(function(t,e){var n=!0;e.St(function(t){var e=o.Ce(t);return!e||2===e.Y||(n=!1)}),n&&(r=r.add(t))});var t=new Rt(i,s,this.me,this.Ae,r);return this.Ae=yt,this.Re=Bt(),this.me=new vt(E),t},Lt.prototype.Ve=function(t,e){var n;this.ve(t)&&(n=this.$e(t,e.key)?2:0,this.be(t)._e(e.key,n),this.Ae=this.Ae.et(e.key,e),this.Re=this.Re.et(e.key,this.ke(e.key).add(t)))},Lt.prototype.ge=function(t,e,n){var r;this.ve(t)&&(r=this.be(t),this.$e(t,e)?r._e(e,1):r.fe(e),this.Re=this.Re.et(e,this.ke(e).delete(t)),n&&(this.Ae=this.Ae.et(e,n)))},Lt.prototype.removeTarget=function(t){this.Ie.delete(t)},Lt.prototype.Fe=function(t){var e=this.be(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Xt.size},Lt.prototype.de=function(t){this.be(t).de()},Lt.prototype.be=function(t){var e=this.Ie.get(t);return e||(e=new Dt,this.Ie.set(t,e)),e},Lt.prototype.ke=function(t){var e=this.Re.get(t);return e||(e=new vt(E),this.Re=this.Re.et(t,e)),e},Lt.prototype.ve=function(t){var e=null!==this.Ce(t);return e||m("WatchChangeAggregator","Detected inactive target",t),e},Lt.prototype.Ce=function(t){var e=this.Ie.get(t);return e&&e.he?null:this.Ee.Me(t)},Lt.prototype.Se=function(e){var n=this;this.Ie.set(e,new Dt),this.Ee.xe(e).forEach(function(t){n.ge(e,t,null)})},Lt.prototype.$e=function(t,e){return this.Ee.xe(t).has(e)},Lt);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){this.Ee=t,this.Ie=new Map,this.Ae=yt,this.Re=Bt(),this.me=new vt(E)}function Mt(){this.se=0,this.ne=Wt(),this.ie=Z.H,this.re=!1,this.oe=!0}function Ft(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Jt=r,this.Xt=i}function Ut(t,e,n,r,i){this.J=t,this.Qt=e,this.Wt=n,this.jt=r,this.Kt=i}function jt(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Lt=n,this.docChanges=r,this.Ot=i,this.fromCache=o,this.Bt=s,this.qt=a}function Vt(){this.xt=new ut(z.P)}function qt(n){this.P=n?function(t,e){return n(t,e)||z.P(t.key,e.key)}:function(t,e){return z.P(t.key,e.key)},this.Nt=wt,this.$t=new ut(this.P)}function Bt(){return new ut(z.P)}function Wt(){return new ut(z.P)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gt(t){var e=Zt(t.mapValue.fields.__local_write_time__.timestampValue);return new x(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ht(t)?4:10:O()}function zt(r,i){var t,e,n,o=Kt(r);if(o!==Kt(i))return!1;switch(o){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return Gt(r).isEqual(Gt(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=Zt(r.timestampValue),n=Zt(t.timestampValue);return e.seconds===n.seconds&&e.nanos===n.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return n=i,ee(r.bytesValue).isEqual(ee(n.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,te((t=r).geoPointValue.latitude)===te(e.geoPointValue.latitude)&&te(t.geoPointValue.longitude)===te(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return te(t.integerValue)===te(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=te(t.doubleValue),r=te(e.doubleValue);return n===r?J(n)===J(r):isNaN(n)&&isNaN(r)}return!1}(r,i);case 9:return u(r.arrayValue.values||[],i.arrayValue.values||[],zt);case 10:return function(){var t=r.mapValue.fields||{},e=i.mapValue.fields||{};if(S(t)!==S(e))return!1;for(var n in t)if(t.hasOwnProperty(n)&&(void 0===e[n]||!zt(t[n],e[n])))return!1;return!0}();default:return O()}}function Xt(t,e){return void 0!==(t.values||[]).find(function(t){return zt(t,e)})}function Yt(t,e){var n,r,i,o,s,a,u,c,h,l,f=Kt(t),p=Kt(e);if(f!==p)return E(f,p);switch(f){case 0:return 0;case 1:return E(t.booleanValue,e.booleanValue);case 2:return c=e,h=te(t.integerValue||t.doubleValue),l=te(c.integerValue||c.doubleValue),h<l?-1:l<h?1:h===l?0:isNaN(h)?isNaN(l)?0:-1:1;case 3:return Jt(t.timestampValue,e.timestampValue);case 4:return Jt(Gt(t),Gt(e));case 5:return E(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,s=e.bytesValue,a=ee(o),u=ee(s),a.o(u);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=E(n[i],r[i]);if(0!==o)return o}return E(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,r=e.geoPointValue,0!==(i=E(te(n.latitude),te(r.latitude)))?i:E(te(n.longitude),te(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Yt(n[i],r[i]);if(o)return o}return E(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=E(r[s],o[s]);if(0!==a)return a;var u=Yt(n[r[s]],i[o[s]]);if(0!==u)return u}return E(r.length,o.length)}(t.mapValue,e.mapValue);default:throw O()}}function Jt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return E(t,e);var n=Zt(t),r=Zt(e),i=E(n.seconds,r.seconds);return 0!==i?i:E(n.nanos,r.nanos)}function $t(t){return function s(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=Zt(i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?ee(i.bytesValue).toBase64():"referenceValue"in i?(n=i.referenceValue,z.q(n).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++){e?e=!1:t+=",",t+=s(r[n])}return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(i.mapValue):O();var t,e,n}(t)}function Zt(t){if(b(!!t),"string"!=typeof t)return{seconds:te(t.seconds),nanos:te(t.nanos)};var e,n=0,r=Qt.exec(t);b(!!r),r[1]&&(e=((e=r[1])+"000000000").substr(0,9),n=Number(e));var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:n}}function te(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ee(t){return"string"==typeof t?Z.fromBase64String(t):Z.fromUint8Array(t)}function ne(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.N()}}function re(t){return t&&"integerValue"in t}function ie(t){return!!t&&"arrayValue"in t}function oe(t){return t&&"nullValue"in t}function se(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ae(t){return t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue={asc:"ASCENDING",desc:"DESCENDING"},ce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},he=function(t,e){this.s=t,this.Le=e};function le(t){return{integerValue:""+t}}function fe(t,e){if(t.Le){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:J(e)?"-0":e}}function pe(t,e){return t.Le?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function de(t,e){return t.Le?e.toBase64():e.toUint8Array()}function ve(t,e){return t.Le?(b(void 0===e||"string"==typeof e),Z.fromBase64String(e||"")):(b(void 0===e||e instanceof Uint8Array),Z.fromUint8Array(e||new Uint8Array))}function ge(t){return b(!!t),L.I((e=Zt(t),new x(e.seconds,e.nanos)));var e}function ye(t,e){return new F(["projects",t.projectId,"databases",t.database]).child("documents").child(e).N()}function me(t){var e=F.$(t);return b(xe(e)),e}function _e(t,e){return ye(t.s,e.path)}function we(t,e){var n=me(e);return b(n.get(1)===t.s.projectId),b(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new z(Te(n))}function be(t,e){return ye(t.s,e)}function Ee(t){var e=me(t);return 4===e.length?F.k:Te(e)}function Ie(t){return new F(["projects",t.s.projectId,"databases",t.s.database]).N()}function Te(t){return b(4<t.length&&"documents"===t.get(4)),t.g(5)}function Se(t,e,n){return{name:_e(t,e),fields:n.proto.mapValue.fields}}function Ce(t,e){var n,r,i,o,s,a;if(e instanceof tn)n={update:Se(t,e.key,e.value)};else if(e instanceof rn)n={delete:_e(t,e.key)};else if(e instanceof en)n={update:Se(t,e.key,e.data),updateMask:(r=e.Oe,i=[],r.fields.forEach(function(t){return i.push(t.N())}),{fieldPaths:i})};else if(e instanceof nn)n={transform:{document:_e(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof Le)return{fieldPath:t.field.N(),setToServerValue:"REQUEST_TIME"};if(e instanceof Fe)return{fieldPath:t.field.N(),appendMissingElements:{values:e.elements}};if(e instanceof Ue)return{fieldPath:t.field.N(),removeAllFromArray:{values:e.elements}};if(e instanceof je)return{fieldPath:t.field.N(),increment:e.Be};throw O()})}};else{if(!(e instanceof on))return O();n={verify:_e(t,e.key)}}return e.Ue.qe||(n.currentDocument=void 0!==(o=e.Ue).updateTime?{updateTime:(s=t,a=o.updateTime,pe(s,a.R()))}:void 0!==o.exists?{exists:o.exists}:O()),n}function Ne(e,t){var n,r,i=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?$e.updateTime(ge(n.updateTime)):void 0!==n.exists?$e.exists(n.exists):$e.Qe():$e.Qe();if(t.update){t.update.name;var o=we(e,t.update.name),s=new sn({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=(r=t.updateMask.fieldPaths||[],new Ye(r.map(function(t){return Q.B(t)})));return new en(o,s,a,i)}return new tn(o,s,i)}if(t.delete){var u=we(e,t.delete);return new rn(u,i)}if(t.transform){var c=we(e,t.transform.document),h=t.transform.fieldTransforms.map(function(t){return function(t,e){var n,r,i=null;"setToServerValue"in e?(b("REQUEST_TIME"===e.setToServerValue),i=Le.instance):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],i=new Fe(n)):"removeAllFromArray"in e?(r=e.removeAllFromArray.values||[],i=new Ue(r)):"increment"in e?i=new je(t,e.increment):O();var o=Q.B(e.fieldPath);return new Je(o,i)}(e,t)});return b(!0===i.exists),new nn(c,h)}if(t.verify){var l=we(e,t.verify);return new on(l,i)}return O()}function Ae(t,e){return{documents:[be(t,e.path)]}}function ke(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=be(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=be(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return t instanceof Dn?function(t){if("=="===t.op){if(se(t.value))return{unaryFilter:{field:Pe(t.field),op:"IS_NAN"}};if(oe(t.value))return{unaryFilter:{field:Pe(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:Pe(t.field),op:(e=t.op,ce[e]),value:t.value}};var e}(t):O()});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return{field:Pe((e=t).field),direction:(n=e.dir,ue[n])};var e,n})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a=(s=e.limit,t.Le||Y(s)?s:{value:s});return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Oe(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Oe(e.endAt)),n}function Oe(t){return{before:t.before,values:t.position}}function Re(t){var e=!!t.before,n=t.values||[];return new jn(n,e)}function Pe(t){return{fieldPath:t.N()}}function De(t){return Q.B(t.fieldPath)}function xe(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le=(Me.prototype.je=function(t,e){return n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}},t&&(n.fields.__previous_value__=t),{mapValue:n};var n},Me.prototype.Ke=function(t,e){return e},Me.prototype.Ge=function(t){return null},Me.prototype.isEqual=function(t){return t instanceof Me},Me);function Me(){}Le.instance=new Le;var Fe=(Be.prototype.je=function(t,e){return this.apply(t)},Be.prototype.Ke=function(t,e){return this.apply(t)},Be.prototype.apply=function(t){for(var n=We(t),e=0,r=this.elements;e<r.length;e++)!function(e){n.some(function(t){return zt(t,e)})||n.push(e)}(r[e]);return{arrayValue:{values:n}}},Be.prototype.Ge=function(t){return null},Be.prototype.isEqual=function(t){return t instanceof Be&&u(this.elements,t.elements,zt)},Be),Ue=(qe.prototype.je=function(t,e){return this.apply(t)},qe.prototype.Ke=function(t,e){return this.apply(t)},qe.prototype.apply=function(t){for(var n=We(t),e=0,r=this.elements;e<r.length;e++)!function(e){n=n.filter(function(t){return!zt(t,e)})}(r[e]);return{arrayValue:{values:n}}},qe.prototype.Ge=function(t){return null},qe.prototype.isEqual=function(t){return t instanceof qe&&u(this.elements,t.elements,zt)},qe),je=(Ve.prototype.je=function(t,e){var n=this.Ge(t),r=this.asNumber(n)+this.asNumber(this.Be);return re(n)&&re(this.Be)?le(r):fe(this.serializer,r)},Ve.prototype.Ke=function(t,e){return e},Ve.prototype.Ge=function(t){return re(e=t)||e&&"doubleValue"in e?t:{integerValue:0};var e},Ve.prototype.isEqual=function(t){return t instanceof Ve&&zt(this.Be,t.Be)},Ve.prototype.asNumber=function(t){return te(t.integerValue||t.doubleValue)},Ve);function Ve(t,e){this.serializer=t,this.Be=e}function qe(t){this.elements=t}function Be(t){this.elements=t}function We(t){return ie(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t,e){this.version=t,this.transformResults=e}var Ge,Qe,Ke,ze,Xe,Ye=(mn.prototype.ze=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},mn.prototype.isEqual=function(t){return u(this.fields,t.fields,function(t,e){return t.isEqual(e)})},mn),Je=(yn.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},yn),$e=(gn.Qe=function(){return new gn},gn.exists=function(t){return new gn(void 0,t)},gn.updateTime=function(t){return new gn(t)},Object.defineProperty(gn.prototype,"qe",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),gn.prototype.He=function(t){return void 0!==this.updateTime?t instanceof kn&&t.version.isEqual(this.updateTime):void 0===this.exists||this.exists===t instanceof kn},gn.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},gn),Ze=(vn.prototype.Ye=function(t){},vn.Je=function(t){return t instanceof kn?t.version:L.min()},vn),tn=(Xe=Ze,v.__extends(dn,Xe),dn.prototype.Ke=function(t,e){this.Ye(t);var n=e.version;return new kn(this.key,n,this.value,{hasCommittedMutations:!0})},dn.prototype.je=function(t,e,n){if(this.Ye(t),!this.Ue.He(t))return t;var r=Ze.Je(t);return new kn(this.key,r,this.value,{Xe:!0})},dn.prototype.Ze=function(t){return null},dn.prototype.isEqual=function(t){return t instanceof dn&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.Ue.isEqual(t.Ue)},dn),en=(ze=Ze,v.__extends(pn,ze),pn.prototype.Ke=function(t,e){if(this.Ye(t),!this.Ue.He(t))return new Rn(this.key,e.version);var n=this.ts(t);return new kn(this.key,e.version,n,{hasCommittedMutations:!0})},pn.prototype.je=function(t,e,n){if(this.Ye(t),!this.Ue.He(t))return t;var r=Ze.Je(t),i=this.ts(t);return new kn(this.key,r,i,{Xe:!0})},pn.prototype.Ze=function(t){return null},pn.prototype.isEqual=function(t){return t instanceof pn&&this.key.isEqual(t.key)&&this.Oe.isEqual(t.Oe)&&this.Ue.isEqual(t.Ue)},pn.prototype.ts=function(t){var e=t instanceof kn?t.data():sn.empty();return this.es(e)},pn.prototype.es=function(t){var n=this,r=new an(t);return this.Oe.fields.forEach(function(t){var e;t._()||(null!==(e=n.data.field(t))?r.set(t,e):r.delete(t))}),r.ss()},pn),nn=(Ke=Ze,v.__extends(fn,Ke),fn.prototype.Ke=function(t,e){if(this.Ye(t),b(null!=e.transformResults),!this.Ue.He(t))return new Rn(this.key,e.version);var n=this.ns(t),r=this.rs(t,e.transformResults),i=e.version,o=this.os(n.data(),r);return new kn(this.key,i,o,{hasCommittedMutations:!0})},fn.prototype.je=function(t,e,n){if(this.Ye(t),!this.Ue.He(t))return t;var r=this.ns(t),i=this.hs(n,t,e),o=this.os(r.data(),i);return new kn(this.key,r.version,o,{Xe:!0})},fn.prototype.Ze=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof kn?t.field(i.field):void 0,s=i.transform.Ge(o||null);null!=s&&(e=null==e?(new an).set(i.field,s):e.set(i.field,s))}return e?e.ss():null},fn.prototype.isEqual=function(t){return t instanceof fn&&this.key.isEqual(t.key)&&u(this.fieldTransforms,t.fieldTransforms,function(t,e){return t.isEqual(e)})&&this.Ue.isEqual(t.Ue)},fn.prototype.ns=function(t){return t},fn.prototype.rs=function(t,e){var n=[];b(this.fieldTransforms.length===e.length);for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof kn&&(s=t.field(i.field)),n.push(o.Ke(s,e[r]))}return n},fn.prototype.hs=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof kn&&(u=e.field(s.field)),null===u&&n instanceof kn&&(u=n.field(s.field)),r.push(a.je(u,t))}return r},fn.prototype.os=function(t,e){for(var n=new an(t),r=0;r<this.fieldTransforms.length;r++){var i=this.fieldTransforms[r].field;n.set(i,e[r])}return n.ss()},fn),rn=(Qe=Ze,v.__extends(ln,Qe),ln.prototype.Ke=function(t,e){return this.Ye(t),new On(this.key,e.version,{hasCommittedMutations:!0})},ln.prototype.je=function(t,e,n){return this.Ye(t),this.Ue.He(t)?new On(this.key,L.min()):t},ln.prototype.Ze=function(t){return null},ln.prototype.isEqual=function(t){return t instanceof ln&&this.key.isEqual(t.key)&&this.Ue.isEqual(t.Ue)},ln),on=(Ge=Ze,v.__extends(hn,Ge),hn.prototype.Ke=function(t,e){O()},hn.prototype.je=function(t,e,n){O()},hn.prototype.Ze=function(t){O()},hn.prototype.isEqual=function(t){return t instanceof hn&&this.key.isEqual(t.key)&&this.Ue.isEqual(t.Ue)},hn),sn=(cn.empty=function(){return new cn({mapValue:{}})},cn.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!ae(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},cn.prototype.isEqual=function(t){return zt(this.proto,t.proto)},cn),an=(un.prototype.set=function(t,e){return this.cs(t,e),this},un.prototype.delete=function(t){return this.cs(t,null),this},un.prototype.cs=function(t,e){for(var n=this.us,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===Kt(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.S(),e)},un.prototype.ss=function(){var t=this.ls(Q.k,this.us);return null!=t?new sn(t):this.as},un.prototype.ls=function(r,t){var i=this,o=!1,e=this.as.field(r),s=ae(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.ls(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},un);function un(t){void 0===t&&(t=sn.empty()),this.as=t,this.us=new Map}function cn(t){this.proto=t}function hn(t,e){var n=this;return(n=Ge.call(this)||this).key=t,n.Ue=e,n.type=4,n}function ln(t,e){var n=this;return(n=Qe.call(this)||this).key=t,n.Ue=e,n.type=3,n}function fn(t,e){var n=this;return(n=Ke.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Ue=$e.exists(!0),n}function pn(t,e,n,r){var i=this;return(i=ze.call(this)||this).key=t,i.data=e,i.Oe=n,i.Ue=r,i.type=1,i}function dn(t,e,n){var r=this;return(r=Xe.call(this)||this).key=t,r.value=e,r.Ue=n,r.type=0,r}function vn(){}function gn(t,e){this.updateTime=t,this.exists=e}function yn(t,e){this.field=t,this.transform=e}function mn(t){(this.fields=t).sort(Q.P)}function _n(t,e){this.key=t,this.version=e}var wn,bn,En,In,Tn,Sn,Cn,Nn,An,kn=(An=_n,v.__extends(Xn,An),Xn.prototype.field=function(t){return this._s.field(t)},Xn.prototype.data=function(){return this._s},Xn.prototype.fs=function(){return this._s.proto},Xn.prototype.isEqual=function(t){return t instanceof Xn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Xe===t.Xe&&this.hasCommittedMutations===t.hasCommittedMutations&&this._s.isEqual(t._s)},Xn.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this._s.toString()+", {hasLocalMutations: "+this.Xe+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Xn.prototype,"hasPendingWrites",{get:function(){return this.Xe||this.hasCommittedMutations},enumerable:!0,configurable:!0}),Xn),On=(Nn=_n,v.__extends(zn,Nn),zn.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(zn.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),zn.prototype.isEqual=function(t){return t instanceof zn&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},zn),Rn=(Cn=_n,v.__extends(Kn,Cn),Kn.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Kn.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Kn.prototype.isEqual=function(t){return t instanceof Kn&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Kn),Pn=(Qn.As=function(t){return new Qn(t)},Object.defineProperty(Qn.prototype,"orderBy",{get:function(){if(null===this.Ts){this.Ts=[];var t=this.Rs(),e=this.ms();if(null!==t&&null===e)t.L()||this.Ts.push(new tr(t)),this.Ts.push(new tr(Q.O(),"asc"));else{for(var n,r=!1,i=0,o=this.ds;i<o.length;i++){var s=o[i];this.Ts.push(s),s.field.L()&&(r=!0)}r||(n=0<this.ds.length?this.ds[this.ds.length-1].dir:"asc",this.Ts.push(new tr(Q.O(),n)))}}return this.Ts},enumerable:!0,configurable:!0}),Qn.prototype.Ps=function(t){var e=this.filters.concat([t]);return new Qn(this.path,this.collectionGroup,this.ds.slice(),e,this.limit,this.ws,this.startAt,this.endAt)},Qn.prototype.Vs=function(t){var e=this.ds.concat([t]);return new Qn(this.path,this.collectionGroup,e,this.filters.slice(),this.limit,this.ws,this.startAt,this.endAt)},Qn.prototype.gs=function(t){return new Qn(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),t,"F",this.startAt,this.endAt)},Qn.prototype.ps=function(t){return new Qn(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),t,"L",this.startAt,this.endAt)},Qn.prototype.ys=function(t){return new Qn(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),this.limit,this.ws,t,this.endAt)},Qn.prototype.bs=function(t){return new Qn(this.path,this.collectionGroup,this.ds.slice(),this.filters.slice(),this.limit,this.ws,this.startAt,t)},Qn.prototype.vs=function(t){return new Qn(t,null,this.ds.slice(),this.filters.slice(),this.limit,this.ws,this.startAt,this.endAt)},Qn.prototype.Ss=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.ds.length||1===this.ds.length&&this.ds[0].field.L())},Qn.prototype.canonicalId=function(){return or(this.We())+"|lt:"+this.ws},Qn.prototype.toString=function(){return"Query(target="+(t=this.We(),e=t.path.N(),null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),0<t.filters.length&&(e+=", filters: ["+t.filters.join(", ")+"]"),Y(t.limit)||(e+=", limit: "+t.limit),0<t.orderBy.length&&(e+=", orderBy: ["+t.orderBy.join(", ")+"]"),t.startAt&&(e+=", startAt: "+Yn(t.startAt)),t.endAt&&(e+=", endAt: "+Yn(t.endAt)),"Target("+e+")")+"; limitType="+this.ws+")";var t,e},Qn.prototype.isEqual=function(t){return sr(this.We(),t.We())&&this.ws===t.ws},Qn.prototype.Ds=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.L()}return 0},Qn.prototype.matches=function(t){return this.Cs(t)&&this.Fs(t)&&this.Ns(t)&&this.$s(t)},Qn.prototype.ks=function(){return!Y(this.limit)&&"F"===this.ws},Qn.prototype.xs=function(){return!Y(this.limit)&&"L"===this.ws},Qn.prototype.ms=function(){return 0<this.ds.length?this.ds[0].field:null},Qn.prototype.Rs=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Dn&&n.Ms())return n.field}return null},Qn.prototype.Ls=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Dn&&0<=t.indexOf(r.op))return r.op}return null},Qn.prototype.Os=function(){return ar(this.We())},Qn.prototype.Bs=function(){return null!==this.collectionGroup},Qn.prototype.We=function(){if(!this.Es)if("F"===this.ws)this.Es=ir(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i="desc"===r.dir?"asc":"desc";t.push(new tr(r.field,i))}var o=this.endAt?new jn(this.endAt.position,!this.endAt.before):null,s=this.startAt?new jn(this.startAt.position,!this.startAt.before):null;this.Es=ir(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.Es},Qn.prototype.Cs=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.U(this.collectionGroup)&&this.path.D(e):z.W(this.path)?this.path.isEqual(e):this.path.C(e)},Qn.prototype.Fs=function(t){for(var e=0,n=this.ds;e<n.length;e++){var r=n[e];if(!r.field.L()&&null===t.field(r.field))return!1}return!0},Qn.prototype.Ns=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},Qn.prototype.$s=function(t){return!(this.startAt&&!Jn(this.startAt,this.orderBy,t)||this.endAt&&Jn(this.endAt,this.orderBy,t))},Qn.prototype.Is=function(t){},Qn),Dn=(Sn=function(){},v.__extends(Gn,Sn),Gn.create=function(t,e,n){if(t.L())return"in"===e?new Ln(t,n):new xn(t,e,n);if(oe(n)){if("=="!==e)throw new D(P.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new Gn(t,e,n)}if(se(n)){if("=="!==e)throw new D(P.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new Gn(t,e,n)}return"array-contains"===e?new Mn(t,n):"in"===e?new Fn(t,n):"array-contains-any"===e?new Un(t,n):new Gn(t,e,n)},Gn.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Kt(this.value)===Kt(e)&&this.qs(Yt(e,this.value))},Gn.prototype.qs=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return 0<t;case">=":return 0<=t;default:return O()}},Gn.prototype.Ms=function(){return 0<=["<","<=",">",">="].indexOf(this.op)},Gn.prototype.canonicalId=function(){return this.field.N()+this.op.toString()+$t(this.value)},Gn.prototype.isEqual=function(t){return t instanceof Gn&&this.op===t.op&&this.field.isEqual(t.field)&&zt(this.value,t.value)},Gn.prototype.toString=function(){return this.field.N()+" "+this.op+" "+$t(this.value)},Gn),xn=(Tn=Dn,v.__extends(Hn,Tn),Hn.prototype.matches=function(t){var e=z.P(t.key,this.key);return this.qs(e)},Hn),Ln=(In=Dn,v.__extends(Wn,In),Wn.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},Wn),Mn=(En=Dn,v.__extends(Bn,En),Bn.prototype.matches=function(t){var e=t.field(this.field);return ie(e)&&Xt(e.arrayValue,this.value)},Bn),Fn=(bn=Dn,v.__extends(qn,bn),qn.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Xt(this.value.arrayValue,e)},qn),Un=(wn=Dn,v.__extends(Vn,wn),Vn.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ie(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Xt(e.value.arrayValue,t)})},Vn),jn=function(t,e){this.position=t,this.before=e};function Vn(t,e){return wn.call(this,t,"array-contains-any",e)||this}function qn(t,e){return bn.call(this,t,"in",e)||this}function Bn(t,e){return En.call(this,t,"array-contains",e)||this}function Wn(t,e){var n=this;return(n=In.call(this,t,"in",e)||this).keys=(e.arrayValue.values||[]).map(function(t){return z.q(t.referenceValue)}),n}function Hn(t,e,n){var r=this;return(r=Tn.call(this,t,e,n)||this).key=z.q(n.referenceValue),r}function Gn(t,e,n){var r=this;return(r=Sn.call(this)||this).field=t,r.op=e,r.value=n,r}function Qn(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.ds=n,this.filters=r,this.limit=i,this.ws=o,this.startAt=s,this.endAt=a,this.Ts=null,this.Es=null,this.startAt&&this.Is(this.startAt),this.endAt&&this.Is(this.endAt)}function Kn(){return null!==Cn&&Cn.apply(this,arguments)||this}function zn(t,e,n){var r=this;return(r=Nn.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Xn(t,e,n,r){var i=this;return(i=An.call(this,t,e)||this)._s=n,i.Xe=!!r.Xe,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function Yn(t){return(t.before?"b":"a")+":"+t.position.map($t).join(",")}function Jn(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.L()?z.P(z.q(s.referenceValue),n.key):Yt(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function $n(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!zt(t.position[n],e.position[n]))return!1;return!0}var Zn,tr=(rr.prototype.compare=function(t,e){var n,r,i,o,s=this.Us?z.P(t.key,e.key):(n=this.field,r=e,i=t.field(n),o=r.field(n),null!==i&&null!==o?Yt(i,o):O());switch(this.dir){case"asc":return s;case"desc":return-1*s;default:return O()}},rr.prototype.canonicalId=function(){return this.field.N()+this.dir.toString()},rr.prototype.toString=function(){return this.field.N()+" ("+this.dir+")"},rr.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},rr),er=(Zn=function(t,e,n,r,i,o,s){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s},v.__extends(nr,Zn),nr);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null);var a=this;return(a=Zn.call(this,t,e,n,r,i,o,s)||this).Qs=null,a}function rr(t,e){this.field=t,void 0===e&&(e="asc"),this.dir=e,this.Us=t.L()}function ir(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new er(t,e,n,r,i,o,s)}function or(t){var e,n=t;return null===n.Qs&&(e=n.path.N(),null!==n.collectionGroup&&(e+="|cg:"+n.collectionGroup),e+="|f:",e+=n.filters.map(function(t){return t.canonicalId()}).join(","),e+="|ob:",e+=n.orderBy.map(function(t){return t.canonicalId()}).join(","),Y(n.limit)||(e+="|l:",e+=n.limit),n.startAt&&(e+="|lb:",e+=Yn(n.startAt)),n.endAt&&(e+="|ub:",e+=Yn(n.endAt)),n.Qs=e),n.Qs}function sr(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!t.orderBy[n].isEqual(e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(!t.filters[r].isEqual(e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$n(t.startAt,e.startAt)&&$n(t.endAt,e.endAt)}function ar(t){return z.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ur=(Tr.prototype.Ke=function(t,e,n){for(var r=n.js,i=0;i<this.mutations.length;i++){var o,s=this.mutations[i];s.key.isEqual(t)&&(o=r[i],e=s.Ke(e,o))}return e},Tr.prototype.je=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=i.je(e,e,this.Ws))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=u.je(e,o,this.Ws))}return e},Tr.prototype.Ks=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.je(t.key,n.get(t.key));e&&(i=i.et(t.key,e))}),i},Tr.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},It())},Tr.prototype.isEqual=function(t){return this.batchId===t.batchId&&u(this.mutations,t.mutations,function(t,e){return t.isEqual(e)})&&u(this.baseMutations,t.baseMutations,function(t,e){return t.isEqual(e)})},Tr),cr=(Ir.from=function(t,e,n){b(t.mutations.length===n.length);for(var r=bt,i=t.mutations,o=0;o<i.length;o++)r=r.et(i[o].key,n[o].version);return new Ir(t,e,n,r)},Ir),hr=(Er.prototype.catch=function(t){return this.next(void 0,t)},Er.prototype.next=function(r,i){var o=this;return this.Xs&&O(),this.Xs=!0,this.Js?this.error?this.Zs(i,this.error):this.tn(r,this.result):new Er(function(e,n){o.Hs=function(t){o.tn(r,t).next(e,n)},o.Ys=function(t){o.Zs(i,t).next(e,n)}})},Er.prototype.en=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},Er.prototype.sn=function(t){try{var e=t();return e instanceof Er?e:Er.resolve(e)}catch(t){return Er.reject(t)}},Er.prototype.tn=function(t,e){return t?this.sn(function(){return t(e)}):Er.resolve(e)},Er.prototype.Zs=function(t,e){return t?this.sn(function(){return t(e)}):Er.reject(e)},Er.resolve=function(n){return new Er(function(t,e){t(n)})},Er.reject=function(n){return new Er(function(t,e){e(n)})},Er.nn=function(t){return new Er(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},Er.rn=function(t){for(var n=Er.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?Er.resolve(t):e()})}(r[e]);return n},Er.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.nn(i)},Er),lr=(Object.defineProperty(br.prototype,"readTime",{get:function(){return this.an},set:function(t){this.an=t},enumerable:!0,configurable:!0}),br.prototype.un=function(t,e){this.cn(),this.readTime=e,this.on.set(t.key,t)},br.prototype.ln=function(t,e){this.cn(),e&&(this.readTime=e),this.on.set(t,null)},br.prototype._n=function(t,e){this.cn();var n=this.on.get(e);return void 0!==n?hr.resolve(n):this.fn(t,e)},br.prototype.getEntries=function(t,e){return this.dn(t,e)},br.prototype.apply=function(t){return this.cn(),this.hn=!0,this.wn(t)},br.prototype.cn=function(){},br),fr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pr=(wr.prototype.En=function(t){this.Tn.push(t)},wr.prototype.In=function(){this.Tn.forEach(function(t){return t()})},wr),dr=(_r.prototype.Pn=function(e,n){var r=this;return this.Rn.Vn(e,n).next(function(t){return r.gn(e,n,t)})},_r.prototype.gn=function(t,r,i){return this.An._n(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].je(r,t);return t})},_r.prototype.pn=function(t,e,i){var o=yt;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].je(t,e);o=o.et(t,e)}),o},_r.prototype.yn=function(e,t){var n=this;return this.An.getEntries(e,t).next(function(t){return n.bn(e,t)})},_r.prototype.bn=function(r,i){var o=this;return this.Rn.vn(r,i).next(function(t){var e=o.pn(r,i,t),n=yt;return e.forEach(function(t,e){e=e||new On(t,L.min()),n=n.et(t,e)}),n})},_r.prototype.Sn=function(t,e,n){return e.Os()?this.Dn(t,e.path):e.Bs()?this.Cn(t,e,n):this.Fn(t,e,n)},_r.prototype.Dn=function(t,e){return this.Pn(t,new z(e)).next(function(t){var e=wt;return t instanceof kn&&(e=e.et(t.key,t)),e})},_r.prototype.Cn=function(n,r,i){var o=this,s=r.collectionGroup,a=wt;return this.mn.Nn(n,s).next(function(t){return hr.forEach(t,function(t){var e=r.vs(t.child(s));return o.Fn(n,e,i).next(function(t){t.forEach(function(t,e){a=a.et(t,e)})})}).next(function(){return a})})},_r.prototype.Fn=function(e,n,t){var h,l,r=this;return this.An.Sn(e,n,t).next(function(t){return h=t,r.Rn.$n(e,n)}).next(function(t){return l=t,r.kn(e,l,h).next(function(t){h=t;for(var e=0,n=l;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=h.get(a),c=s.je(u,u,r.Ws);h=c instanceof kn?h.et(a,c):h.remove(a)}})}).next(function(){return h.forEach(function(t,e){n.matches(e)||(h=h.remove(t))}),h})},_r.prototype.kn=function(t,e,n){for(var r=It(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof en&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.An.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof kn&&(c=c.et(t,e))}),c})},_r),vr=(mr.Ln=function(t,e){for(var n=It(),r=It(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new mr(t,e.fromCache,n,r)},mr),gr=(yr.prototype.Bn=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},yr.prototype.next=function(){var t=++this.previousValue;return this.qn&&this.qn(t),t},yr);function yr(t,e){var n=this;this.previousValue=t,e&&(e.On=function(t){return n.Bn(t)},this.qn=function(t){return e.Un(t)})}function mr(t,e,n,r){this.targetId=t,this.fromCache=e,this.xn=n,this.Mn=r}function _r(t,e,n){this.An=t,this.Rn=e,this.mn=n}function wr(){this.Tn=[]}function br(){this.on=new R(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.hn=!1}function Er(t){var e=this;this.Hs=null,this.Ys=null,this.result=void 0,this.error=void 0,this.Js=!1,this.Xs=!1,t(function(t){e.Js=!0,e.result=t,e.Hs&&e.Hs(t)},function(t){e.Js=!0,e.error=t,e.Ys&&e.Ys(t)})}function Ir(t,e,n,r){this.batch=t,this.Gs=e,this.js=n,this.zs=r}function Tr(t,e,n,r){this.batchId=t,this.Ws=e,this.baseMutations=n,this.mutations=r}gr.Qn=-1;function Sr(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Cr=(Nr.prototype.reset=function(){this.Hn=0},Nr.prototype.Xn=function(){this.Hn=this.zn},Nr.prototype.Zn=function(t){var e=this;this.cancel();var n=Math.floor(this.Hn+this.ti()),r=Math.max(0,Date.now()-this.Jn),i=Math.max(0,n-r);0<i&&m("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Hn+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Yn=this.Wn.ei(this.jn,i,function(){return e.Jn=Date.now(),t()}),this.Hn*=this.Gn,this.Hn<this.Kn&&(this.Hn=this.Kn),this.Hn>this.zn&&(this.Hn=this.zn)},Nr.prototype.si=function(){null!==this.Yn&&(this.Yn.ni(),this.Yn=null)},Nr.prototype.cancel=function(){null!==this.Yn&&(this.Yn.cancel(),this.Yn=null)},Nr.prototype.ti=function(){return(Math.random()-.5)*this.Hn},Nr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Wn=t,this.jn=e,this.Kn=n,this.Gn=r,this.zn=i,this.Hn=0,this.Yn=null,this.Jn=Date.now(),this.reset()}function Ar(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=kr(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return kr(e)}function kr(t){return t+""}function Or(t){var e=t.length;if(b(2<=e),2===e)return b(""===t.charAt(0)&&""===t.charAt(1)),F.k;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&O(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:O()}o=s+2}return new F(r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rr=(Mr.prototype.ri=function(t,e){return this.ii.add(e),hr.resolve()},Mr.prototype.Nn=function(t,e){return hr.resolve(this.ii.getEntries(e))},Mr),Pr=(Lr.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new vt(F.P),i=!r.has(n);return this.index[e]=r.add(n),i},Lr.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},Lr.prototype.getEntries=function(t){return(this.index[t]||new vt(F.P)).F()},Lr),Dr=(xr.prototype.ri=function(t,e){var n=this;if(this.oi.has(e))return hr.resolve();var r=e.S(),i=e.p();t.En(function(){n.oi.add(e)});var o={collectionId:r,parent:Ar(i)};return Fr(t).put(o)},xr.prototype.Nn=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[c(i),""],!1,!0);return Fr(t).hi(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(Or(r.parent))}return o})},xr);function xr(){this.oi=new Pr}function Lr(){this.index={}}function Mr(){this.ii=new Pr}function Fr(t){return fi.ai(t,Wi.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ur=function(t){this.ui=t};function jr(t,e){if(e.document)return n=t.ui,r=e.document,i=!!e.hasCommittedMutations,o=we(n,r.name),s=ge(r.updateTime),a=new sn({mapValue:{fields:r.fields}}),new kn(o,s,a,{hasCommittedMutations:!!i});var n,r,i,o,s,a;if(e.noDocument){var u=z.j(e.noDocument.path),c=Hr(e.noDocument.readTime);return new On(u,c,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var h=z.j(e.unknownDocument.path),l=Hr(e.unknownDocument.version);return new Rn(h,l)}return O()}function Vr(t,e,n){var r,i,o=qr(n),s=e.key.path.p().F();if(e instanceof kn){var a={name:_e(r=t.ui,(i=e).key),fields:i.fs().mapValue.fields,updateTime:pe(r,i.version.R())},u=e.hasCommittedMutations;return new Ui(null,null,a,u,o,s)}if(e instanceof On){var c=e.key.path.F(),h=Wr(e.version),l=e.hasCommittedMutations;return new Ui(null,new Mi(c,h),null,l,o,s)}if(e instanceof Rn){var f=e.key.path.F(),p=Wr(e.version);return new Ui(new Fi(f,p),null,null,!0,o,s)}return O()}function qr(t){var e=t.R();return[e.seconds,e.nanoseconds]}function Br(t){var e=new x(t[0],t[1]);return L.I(e)}function Wr(t){var e=t.R();return new ki(e.seconds,e.nanoseconds)}function Hr(t){var e=new x(t.seconds,t.nanoseconds);return L.I(e)}function Gr(e,t){var n=(t.baseMutations||[]).map(function(t){return Ne(e.ui,t)}),r=t.mutations.map(function(t){return Ne(e.ui,t)}),i=x.fromMillis(t.localWriteTimeMs);return new ur(t.batchId,i,n,r)}function Qr(t){var e=Hr(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Hr(t.lastLimboFreeSnapshotVersion):L.min(),r=(void 0!==t.query.documents?function(t){b(1===t.documents.length);var e=t.documents[0];return Pn.As(Ee(e)).We()}:function(t){var e,n=Ee(t.parent),r=t.structuredQuery,i=r.from?r.from.length:0,o=null;0<i&&(b(1===i),(e=r.from[0]).allDescendants?o=e.collectionId:n=n.child(e.collectionId));var s=[];r.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=De(t.unaryFilter.field);return Dn.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=De(t.unaryFilter.field);return Dn.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return O()}}(e)]:void 0!==e.fieldFilter?[(n=e,Dn.create(De(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return O()}}(),n.fieldFilter.value))]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(t).reduce(function(t,e){return t.concat(e)}):O():[];var n}(r.where));var a=[];r.orderBy&&(a=r.orderBy.map(function(t){return new tr(De((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}));var u,c,h=null;r.limit&&(u=r.limit,h=Y(c="object"==typeof u?u.value:u)?null:c);var l=null;r.startAt&&(l=Re(r.startAt));var f=null;return r.endAt&&(f=Re(r.endAt)),new Pn(n,o,a,s,h,"F",l,f).We()})(t.query);return new it(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Z.fromBase64String(t.resumeToken))}function Kr(t,e){var n=Wr(e.J),r=Wr(e.lastLimboFreeSnapshotVersion),i=(ar(e.target)?Ae:ke)(t.ui,e.target),o=e.resumeToken.toBase64();return new Vi(e.targetId,or(e.target),n,o,e.sequenceNumber,r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zr,Xr=(Yr.prototype.un=function(t,e,n){return $r(t).put(Zr(e),n)},Yr.prototype.ln=function(t,e){var n=$r(t),r=Zr(e);return n.delete(r)},Yr.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.ci(e,t)})},Yr.prototype._n=function(t,e){var n=this;return $r(t).get(Zr(e)).next(function(t){return n.li(t)})},Yr.prototype._i=function(t,e){var n=this;return $r(t).get(Zr(e)).next(function(t){var e=n.li(t);return e?{fi:e,size:ti(t)}:null})},Yr.prototype.getEntries=function(t,e){var r=this,i=yt;return this.di(t,e,function(t,e){var n=r.li(e);i=i.et(t,n)}).next(function(){return i})},Yr.prototype.wi=function(t,e){var r=this,i=yt,o=new ut(z.P);return this.di(t,e,function(t,e){var n=r.li(e);o=n?(i=i.et(t,n),o.et(t,ti(e))):(i=i.et(t,null),o.et(t,0))}).next(function(){return{Ti:i,Ei:o}})},Yr.prototype.di=function(t,e,i){if(e._())return hr.resolve();var n=IDBKeyRange.bound(e.first().path.F(),e.last().path.F()),o=e.at(),s=o.dt();return $r(t).Ii({range:n},function(t,e,n){for(var r=z.j(t);s&&z.P(s,r)<0;)i(s,null),s=o.dt();s&&s.isEqual(r)&&(i(s,e),s=o.wt()?o.dt():null),s?n.Ai(s.path.F()):n.done()}).next(function(){for(;s;)i(s,null),s=o.wt()?o.dt():null})},Yr.prototype.Sn=function(t,i,e){var n,r,o,s=this,a=wt,u=i.path.length+1,c={};return e.isEqual(L.min())?(n=i.path.F(),c.range=IDBKeyRange.lowerBound(n)):(r=i.path.F(),o=qr(e),c.range=IDBKeyRange.lowerBound([r,o],!0),c.index=Ui.collectionReadTimeIndex),$r(t).Ii(c,function(t,e,n){var r;t.length===u&&(r=jr(s.serializer,e),i.path.D(r.key.path)?r instanceof kn&&i.matches(r)&&(a=a.et(r.key,r)):n.done())}).next(function(){return a})},Yr.prototype.Ri=function(t,e){var r=this,i=yt,o=qr(e),n=$r(t),s=IDBKeyRange.lowerBound(o,!0);return n.Ii({index:Ui.readTimeIndex,range:s},function(t,e){var n=jr(r.serializer,e);i=i.et(n.key,n),o=e.readTime}).next(function(){return{mi:i,readTime:Br(o)}})},Yr.prototype.Pi=function(t){var e=$r(t),r=L.min();return e.Ii({index:Ui.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=Br(e.readTime)),n.done()}).next(function(){return r})},Yr.prototype.Vi=function(t){return new Yr.gi(this,!!t&&t.pi)},Yr.prototype.yi=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},Yr.prototype.getMetadata=function(t){return Jr(t).get(ji.key).next(function(t){return b(!!t),t})},Yr.prototype.ci=function(t,e){return Jr(t).put(ji.key,e)},Yr.prototype.li=function(t){if(t){var e=jr(this.serializer,t);return e instanceof On&&e.version.isEqual(L.min())?null:e}return null},Yr);function Yr(t,e){this.serializer=t,this.mn=e}function Jr(t){return fi.ai(t,ji.store)}function $r(t){return fi.ai(t,Ui.store)}function Zr(t){return t.path.F()}function ti(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw O();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t,e){var n=this;return(n=zr.call(this)||this).bi=t,n.pi=e,n.vi=new R(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}Xr.gi=(zr=lr,v.__extends(ei,zr),ei.prototype.wn=function(s){var a=this,u=[],c=0,h=new vt(function(t,e){return E(t.N(),e.N())});return this.on.forEach(function(t,e){var n,r,i,o=a.vi.get(t);e?(n=Vr(a.bi.serializer,e,a.readTime),h=h.add(t.path.p()),r=ti(n),c+=r-o,u.push(a.bi.un(s,t,n))):(c-=o,a.pi?(i=Vr(a.bi.serializer,new On(t,L.min()),a.readTime),u.push(a.bi.un(s,t,i))):u.push(a.bi.ln(s,t)))}),h.forEach(function(t){u.push(a.bi.mn.ri(s,t))}),u.push(this.bi.updateMetadata(s,c)),hr.nn(u)},ei.prototype.fn=function(t,e){var n=this;return this.bi._i(t,e).next(function(t){return null===t?(n.vi.set(e,0),null):(n.vi.set(e,t.size),t.fi)})},ei.prototype.dn=function(t,e){var n=this;return this.bi.wi(t,e).next(function(t){var e=t.Ti;return t.Ei.forEach(function(t,e){n.vi.set(t,e)}),e})},ei);var ni=(oi.prototype.next=function(){return this.Si+=2,this.Si},oi.Di=function(){return new oi(0)},oi.Ci=function(){return new oi(-1)},oi),ri=(ii.prototype.Ni=function(n){var r=this;return this.$i(n).next(function(t){var e=new ni(t.highestTargetId);return t.highestTargetId=e.next(),r.ki(n,t).next(function(){return t.highestTargetId})})},ii.prototype.xi=function(t){return this.$i(t).next(function(t){return L.I(new x(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},ii.prototype.Mi=function(t){return this.$i(t).next(function(t){return t.highestListenSequenceNumber})},ii.prototype.Li=function(e,n,r){var i=this;return this.$i(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.R()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.ki(e,t)})},ii.prototype.Oi=function(e,n){var r=this;return this.Bi(e,n).next(function(){return r.$i(e).next(function(t){return t.targetCount+=1,r.qi(n,t),r.ki(e,t)})})},ii.prototype.Ui=function(t,e){return this.Bi(t,e)},ii.prototype.Qi=function(e,t){var n=this;return this.Wi(e,t.targetId).next(function(){return si(e).delete(t.targetId)}).next(function(){return n.$i(e)}).next(function(t){return b(0<t.targetCount),--t.targetCount,n.ki(e,t)})},ii.prototype.ji=function(r,i,o){var s=this,a=0,u=[];return si(r).Ii(function(t,e){var n=Qr(e);n.sequenceNumber<=i&&null===o.get(n.targetId)&&(a++,u.push(s.Qi(r,n)))}).next(function(){return hr.nn(u)}).next(function(){return a})},ii.prototype.ye=function(t,r){return si(t).Ii(function(t,e){var n=Qr(e);r(n)})},ii.prototype.$i=function(t){return ai(t).get(Bi.key).next(function(t){return b(null!==t),t})},ii.prototype.ki=function(t,e){return ai(t).put(Bi.key,e)},ii.prototype.Bi=function(t,e){return si(t).put(Kr(this.serializer,e))},ii.prototype.qi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},ii.prototype.Ki=function(t){return this.$i(t).next(function(t){return t.targetCount})},ii.prototype.Gi=function(t,i){var e=or(i),n=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),o=null;return si(t).Ii({range:n,index:Vi.queryTargetsIndexName},function(t,e,n){var r=Qr(e);sr(i,r.target)&&(o=r,n.done())}).next(function(){return o})},ii.prototype.zi=function(n,t,r){var i=this,o=[],s=ui(n);return t.forEach(function(t){var e=Ar(t.path);o.push(s.put(new qi(r,e))),o.push(i.Fi.Hi(n,r,t))}),hr.nn(o)},ii.prototype.Yi=function(n,t,r){var i=this,o=ui(n);return hr.forEach(t,function(t){var e=Ar(t.path);return hr.nn([o.delete([r,e]),i.Fi.Ji(n,r,t)])})},ii.prototype.Wi=function(t,e){var n=ui(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},ii.prototype.Xi=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ui(t),o=It();return r.Ii({range:n,Zi:!0},function(t,e,n){var r=Or(t[1]),i=new z(r);o=o.add(i)}).next(function(){return o})},ii.prototype.tr=function(t,e){var n=Ar(e.path),r=IDBKeyRange.bound([n],[c(n)],!1,!0),i=0;return ui(t).Ii({index:qi.documentTargetsIndex,Zi:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},ii.prototype.Me=function(t,e){return si(t).get(e).next(function(t){return t?Qr(t):null})},ii);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(t,e){this.Fi=t,this.serializer=e}function oi(t){this.Si=t}function si(t){return fi.ai(t,Vi.store)}function ai(t){return fi.ai(t,Bi.store)}function ui(t){return fi.ai(t,qi.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ci,hi="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",li=(ci=pr,v.__extends(di,ci),di),fi=(pi.ai=function(t,e){if(t instanceof li)return zi.ai(t.er,e);throw O()},pi.prototype.start=function(){var e=this;return zi.Ir(this.dr,Ni,new Ai(this.serializer)).then(function(t){return e.Ar=t,e.Rr()}).then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new D(P.FAILED_PRECONDITION,hi);return e.mr(),e.Pr(),e.Vr(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.Tr.Mi(t)})}).then(function(t){e.rr=new gr(t,e.nr)}).then(function(){e.or=!0}).catch(function(t){return e.Ar&&e.Ar.close(),Promise.reject(t)})},pi.prototype.gr=function(n){var t=this;return this.lr=function(e){return v.__awaiter(t,void 0,void 0,function(){return v.__generator(this,function(t){return this.pr?[2,n(e)]:[2]})})},n(this.isPrimary)},pi.prototype.yr=function(n){var t=this;this.Ar.br(function(e){return v.__awaiter(t,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},pi.prototype.vr=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Wn.Sr(function(){return v.__awaiter(e,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.pr?[4,this.Rr()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},pi.prototype.Rr=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return gi(e).put(new Gi(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.Dr(e).next(function(t){t||(n.isPrimary=!1,n.Wn.Cr(function(){return n.lr(!1)}))})}).next(function(){return n.Fr(e)}).next(function(t){return n.isPrimary&&!t?n.Nr(e).next(function(){return!1}):!!t&&n.$r(e).next(function(){return!0})})}).catch(function(t){if(to(t))return m("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return m("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Wn.Cr(function(){return n.lr(t)}),n.isPrimary=t})},pi.prototype.Dr=function(t){var e=this;return vi(t).get(Oi.key).next(function(t){return hr.resolve(e.kr(t))})},pi.prototype.xr=function(t){return gi(t).delete(this.clientId)},pi.prototype.Mr=function(){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o=this;return v.__generator(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.Lr(this.cr,18e5)?[3,2]:(this.cr=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=pi.ai(t,Gi.store);return r.hi().next(function(t){var e=o.Or(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return hr.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Er)for(n=0,r=e;n<r.length;n++)i=r[n],this.Er.removeItem(this.Br(i.clientId));t.label=2;case 2:return[2]}})})},pi.prototype.Vr=function(){var t=this;this.ur=this.Wn.ei("client_metadata_refresh",4e3,function(){return t.Rr().then(function(){return t.Mr()}).then(function(){return t.Vr()})})},pi.prototype.kr=function(t){return!!t&&t.ownerId===this.clientId},pi.prototype.Fr=function(e){var i=this;return this.ir?hr.resolve(!0):vi(e).get(Oi.key).next(function(t){if(null!==t&&i.Lr(t.leaseTimestampMs,5e3)&&!i.qr(t.ownerId)){if(i.kr(t)&&i.networkEnabled)return!0;if(!i.kr(t)){if(!t.allowTabSynchronization)throw new D(P.FAILED_PRECONDITION,hi);return!1}}return!(!i.networkEnabled||!i.inForeground)||gi(e).hi().next(function(t){return void 0===i.Or(t,5e3).find(function(t){if(i.clientId!==t.clientId){var e=!i.networkEnabled&&t.networkEnabled,n=!i.inForeground&&t.inForeground,r=i.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1})})}).next(function(t){return i.isPrimary!==t&&m("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},pi.prototype.Ur=function(){return v.__awaiter(this,void 0,void 0,function(){var e=this;return v.__generator(this,function(t){switch(t.label){case 0:return this.or=!1,this.Qr(),this.ur&&(this.ur.cancel(),this.ur=null),this.Wr(),this.jr(),[4,this.runTransaction("shutdown","readwrite",function(t){return e.Nr(t).next(function(){return e.xr(t)})}).catch(function(t){m("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)})];case 1:return t.sent(),this.Ar.close(),this.Kr(),[2]}})})},pi.prototype.Or=function(t,e){var n=this;return t.filter(function(t){return n.Lr(t.updateTimeMs,e)&&!n.qr(t.clientId)})},pi.prototype.Gr=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return gi(t).hi().next(function(t){return e.Or(t,18e5).map(function(t){return t.clientId})})})},pi.clearPersistence=function(n){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:return pi._r()?(e=n+pi.wr,[4,zi.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})},Object.defineProperty(pi.prototype,"pr",{get:function(){return this.or},enumerable:!0,configurable:!0}),pi.prototype.zr=function(t){return wi.Hr(t,this.serializer,this.mn,this.Fi)},pi.prototype.Yr=function(){return this.Tr},pi.prototype.Jr=function(){return this.An},pi.prototype.Xr=function(){return this.mn},pi.prototype.runTransaction=function(e,n,r){var i=this;m("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.Ar.runTransaction(t,Ki,function(t){return o=new li(t,i.rr?i.rr.next():gr.Qn),"readwrite-primary"===n?i.Dr(o).next(function(t){return!!t||i.Fr(o)}).next(function(t){if(!t)throw h("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Wn.Cr(function(){return i.lr(!1)}),new D(P.FAILED_PRECONDITION,fr);return r(o)}).next(function(t){return i.$r(o).next(function(){return t})}):i.Zr(o).next(function(){return r(o)})}).then(function(t){return o.In(),t})},pi.prototype.Zr=function(t){var e=this;return vi(t).get(Oi.key).next(function(t){if(null!==t&&e.Lr(t.leaseTimestampMs,5e3)&&!e.qr(t.ownerId)&&!e.kr(t)&&!(e.ir||e.allowTabSynchronization&&t.allowTabSynchronization))throw new D(P.FAILED_PRECONDITION,hi)})},pi.prototype.$r=function(t){var e=new Oi(this.clientId,this.allowTabSynchronization,Date.now());return vi(t).put(Oi.key,e)},pi._r=function(){return zi._r()},pi.to=function(t){var e=t.s.projectId;return t.s.i||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},pi.prototype.Nr=function(t){var e=this,n=vi(t);return n.get(Oi.key).next(function(t){return e.kr(t)?(m("IndexedDbPersistence","Releasing primary lease."),n.delete(Oi.key)):hr.resolve()})},pi.prototype.Lr=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(h("Detected an update time that is in the future: "+t+" > "+n),1))},pi.prototype.mr=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ar=function(){t.Wn.Sr(function(){return t.inForeground="visible"===t.document.visibilityState,t.Rr()})},this.document.addEventListener("visibilitychange",this.ar),this.inForeground="visible"===this.document.visibilityState)},pi.prototype.Wr=function(){this.ar&&(this.document.removeEventListener("visibilitychange",this.ar),this.ar=null)},pi.prototype.Pr=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.hr=function(){e.Qr(),e.Wn.Sr(function(){return e.Ur()})},this.window.addEventListener("unload",this.hr))},pi.prototype.jr=function(){this.hr&&(this.window.removeEventListener("unload",this.hr),this.hr=null)},pi.prototype.qr=function(t){var e;try{var n=null!==(null===(e=this.Er)||void 0===e?void 0:e.getItem(this.Br(t)));return m("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return h("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},pi.prototype.Qr=function(){if(this.Er)try{this.Er.setItem(this.Br(this.clientId),String(Date.now()))}catch(t){h("Failed to set zombie client id.",t)}},pi.prototype.Kr=function(){if(this.Er)try{this.Er.removeItem(this.Br(this.clientId))}catch(t){}},pi.prototype.Br=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},pi);function pi(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Wn=i,this.window=o,this.document=s,this.nr=u,this.ir=c,this.rr=null,this.or=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hr=null,this.inForeground=!1,this.ar=null,this.ur=null,this.cr=Number.NEGATIVE_INFINITY,this.lr=function(t){return Promise.resolve()},!pi._r())throw new D(P.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Fi=new yi(this,r),this.dr=e+pi.wr,this.serializer=new Ur(a),this.Tr=new ri(this.Fi,this.serializer),this.mn=new Dr,this.An=new Xr(this.serializer,this.mn),this.window&&this.window.localStorage?this.Er=this.window.localStorage:(this.Er=null,!1===c&&h("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function di(t,e){var n=this;return(n=ci.call(this)||this).er=t,n.sr=e,n}function vi(t){return fi.ai(t,Oi.store)}function gi(t){return fi.ai(t,Gi.store)}fi.wr="main";var yi=(mi.prototype.so=function(t){var n=this.no(t);return this.db.Yr().Ki(t).next(function(e){return n.next(function(t){return e+t})})},mi.prototype.no=function(t){var e=0;return this.io(t,function(t){e++}).next(function(){return e})},mi.prototype.ye=function(t,e){return this.db.Yr().ye(t,e)},mi.prototype.io=function(t,n){return this.ro(t,function(t,e){return n(e)})},mi.prototype.Hi=function(t,e,n){return _i(t,n)},mi.prototype.Ji=function(t,e,n){return _i(t,n)},mi.prototype.ji=function(t,e,n){return this.db.Yr().ji(t,e,n)},mi.prototype.oo=_i,mi.prototype.ho=function(t,e){return r=e,i=!1,Ci(n=t).ao(function(t){return Ei(n,t,r).next(function(t){return t&&(i=!0),hr.resolve(!t)})}).next(function(){return i});var n,r,i},mi.prototype.uo=function(r,i){var o=this,s=this.db.Jr().Vi(),a=[],u=0;return this.ro(r,function(e,t){var n;t<=i&&(n=o.ho(r,e).next(function(t){if(!t)return u++,s._n(r,e).next(function(){return s.ln(e),ui(r).delete([0,Ar(e.path)])})}),a.push(n))}).next(function(){return hr.nn(a)}).next(function(){return s.apply(r)}).next(function(){return u})},mi.prototype.removeTarget=function(t,e){var n=e.X(t.sr);return this.db.Yr().Ui(t,n)},mi.prototype.co=_i,mi.prototype.ro=function(t,o){var s,e=ui(t),a=gr.Qn;return e.Ii({index:qi.documentTargetsIndex},function(t,e){var n=t[0],r=(t[1],e.path),i=e.sequenceNumber;0===n?(a!==gr.Qn&&o(new z(Or(s)),a),a=i,s=r):a=gr.Qn}).next(function(){a!==gr.Qn&&o(new z(Or(s)),a)})},mi.prototype.lo=function(t){return this.db.Jr().yi(t)},mi);function mi(t,e){this.db=t,this.eo=new Eo(this,e)}function _i(t,e){return ui(t).put((n=t.sr,new qi(0,Ar(e.path),n)));var n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wi=(bi.Hr=function(t,e,n,r){return b(""!==t.uid),new bi(t.fo()?t.uid:"",e,n,r)},bi.prototype.do=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ti(t).Ii({index:Di.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},bi.prototype.wo=function(d,v,g,y){var m=this,_=Si(d),w=Ti(d);return w.add({}).next(function(t){b("number"==typeof t);for(var e,n,r,i,o,s=new ur(t,v,g,y),a=(e=m.serializer,n=m.userId,i=(r=s).baseMutations.map(function(t){return Ce(e.ui,t)}),o=r.mutations.map(function(t){return Ce(e.ui,t)}),new Di(n,r.batchId,r.Ws.toMillis(),i,o)),u=[],c=new vt(function(t,e){return E(t.N(),e.N())}),h=0,l=y;h<l.length;h++){var f=l[h],p=xi.key(m.userId,f.key.path,t),c=c.add(f.key.path.p());u.push(w.put(a)),u.push(_.put(p,xi.PLACEHOLDER))}return c.forEach(function(t){u.push(m.mn.ri(d,t))}),d.En(function(){m._o[t]=s.keys()}),hr.nn(u).next(function(){return s})})},bi.prototype.To=function(t,e){var n=this;return Ti(t).get(e).next(function(t){return t?(b(t.userId===n.userId),Gr(n.serializer,t)):null})},bi.prototype.Eo=function(t,n){var r=this;return this._o[n]?hr.resolve(this._o[n]):this.To(t,n).next(function(t){if(t){var e=t.keys();return r._o[n]=e}return null})},bi.prototype.Io=function(t,e){var r=this,i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Ti(t).Ii({index:Di.userMutationsIndex,range:n},function(t,e,n){e.userId===r.userId&&(b(e.batchId>=i),o=Gr(r.serializer,e)),n.done()}).next(function(){return o})},bi.prototype.Ao=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Ti(t).Ii({index:Di.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},bi.prototype.Ro=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ti(t).hi(Di.userMutationsIndex,n).next(function(t){return t.map(function(t){return Gr(e.serializer,t)})})},bi.prototype.Vn=function(a,u){var c=this,t=xi.prefixForPath(this.userId,u.path),e=IDBKeyRange.lowerBound(t),h=[];return Si(a).Ii({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=Or(i);if(r===c.userId&&u.path.isEqual(s))return Ti(a).get(o).next(function(t){if(!t)throw O();b(t.userId===c.userId),h.push(Gr(c.serializer,t))});n.done()}).next(function(){return h})},bi.prototype.vn=function(r,t){var u=this,c=new vt(E),i=[];return t.forEach(function(a){var t=xi.prefixForPath(u.userId,a.path),e=IDBKeyRange.lowerBound(t),n=Si(r).Ii({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=Or(i);r===u.userId&&a.path.isEqual(s)?c=c.add(o):n.done()});i.push(n)}),hr.nn(i).next(function(){return u.mo(r,c)})},bi.prototype.$n=function(t,e){var a=this,u=e.path,c=u.length+1,n=xi.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),h=new vt(E);return Si(t).Ii({range:r},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=Or(i);r===a.userId&&u.D(s)?s.length===c&&(h=h.add(o)):n.done()}).next(function(){return a.mo(t,h)})},bi.prototype.mo=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Ti(e).get(t).next(function(t){if(null===t)throw O();b(t.userId===n.userId),r.push(Gr(n.serializer,t))}))}),hr.nn(i).next(function(){return r})},bi.prototype.Po=function(e,n){var r=this;return Ii(e.er,this.userId,n).next(function(t){return e.En(function(){r.Vo(n.batchId)}),hr.forEach(t,function(t){return r.Fi.oo(e,t)})})},bi.prototype.Vo=function(t){delete this._o[t]},bi.prototype.po=function(n){var o=this;return this.do(n).next(function(t){if(!t)return hr.resolve();var e=IDBKeyRange.lowerBound(xi.prefixForUser(o.userId)),i=[];return Si(n).Ii({range:e},function(t,e,n){var r;t[0]===o.userId?(r=Or(t[1]),i.push(r)):n.done()}).next(function(){b(0===i.length)})})},bi.prototype.tr=function(t,e){return Ei(t,this.userId,e)},bi.prototype.yo=function(t){var e=this;return Ci(t).get(this.userId).next(function(t){return t||new Pi(e.userId,-1,"")})},bi);function bi(t,e,n,r){this.userId=t,this.serializer=e,this.mn=n,this.Fi=r,this._o={}}function Ei(t,o,e){var n=xi.prefixForPath(o,e.path),s=n[1],r=IDBKeyRange.lowerBound(n),a=!1;return Si(t).Ii({range:r,Zi:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function Ii(t,e,n){var r=t.store(Di.store),i=t.store(xi.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ii({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){b(1===a)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=xi.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return hr.nn(o).next(function(){return c})}function Ti(t){return fi.ai(t,Di.store)}function Si(t){return fi.ai(t,xi.store)}function Ci(t){return fi.ai(t,Pi.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni=10,Ai=(Ri.prototype.createOrUpgrade=function(n,r,t,e){var i=this;b(t<e&&0<=t&&e<=Ni);var o,s=new eo(r);t<1&&1<=e&&(n.createObjectStore(Oi.store),(o=n).createObjectStore(Pi.store,{keyPath:Pi.keyPath}),o.createObjectStore(Di.store,{keyPath:Di.keyPath,autoIncrement:!0}).createIndex(Di.userMutationsIndex,Di.userMutationsKeyPath,{unique:!0}),o.createObjectStore(xi.store),Hi(n),n.createObjectStore(Ui.store));var a,u=hr.resolve();return t<3&&3<=e&&(0!==t&&((a=n).deleteObjectStore(qi.store),a.deleteObjectStore(Vi.store),a.deleteObjectStore(Bi.store),Hi(n)),u=u.next(function(){return t=s.store(Bi.store),e=new Bi(0,0,L.min().R(),0),t.put(Bi.key,e);var t,e})),t<4&&4<=e&&(0!==t&&(u=u.next(function(){return r=n,(i=s).store(Di.store).hi().next(function(t){r.deleteObjectStore(Di.store),r.createObjectStore(Di.store,{keyPath:Di.keyPath,autoIncrement:!0}).createIndex(Di.userMutationsIndex,Di.userMutationsKeyPath,{unique:!0});var e=i.store(Di.store),n=t.map(function(t){return e.put(t)});return hr.nn(n)});var r,i})),u=u.next(function(){n.createObjectStore(Gi.store,{keyPath:Gi.keyPath})})),t<5&&5<=e&&(u=u.next(function(){return i.removeAcknowledgedMutations(s)})),t<6&&6<=e&&(u=u.next(function(){return n.createObjectStore(ji.store),i.addDocumentGlobal(s)})),t<7&&7<=e&&(u=u.next(function(){return i.ensureSequenceNumbers(s)})),t<8&&8<=e&&(u=u.next(function(){return i.createCollectionParentIndex(n,s)})),t<9&&9<=e&&(u=u.next(function(){var t,e;(e=n).objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges"),(t=r.objectStore(Ui.store)).createIndex(Ui.readTimeIndex,Ui.readTimeIndexPath,{unique:!1}),t.createIndex(Ui.collectionReadTimeIndex,Ui.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=e&&(u=u.next(function(){return i.rewriteCanonicalIds(s)})),u},Ri.prototype.addDocumentGlobal=function(e){var n=0;return e.store(Ui.store).Ii(function(t,e){n+=ti(e)}).next(function(){var t=new ji(n);return e.store(ji.store).put(ji.key,t)})},Ri.prototype.removeAcknowledgedMutations=function(r){var i=this,t=r.store(Pi.store),e=r.store(Di.store);return t.hi().next(function(t){return hr.forEach(t,function(n){var t=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return e.hi(Di.userMutationsIndex,t).next(function(t){return hr.forEach(t,function(t){b(t.userId===n.userId);var e=Gr(i.serializer,t);return Ii(r,n.userId,e).next(function(){})})})})})},Ri.prototype.ensureSequenceNumbers=function(t){var s=t.store(qi.store),e=t.store(Ui.store);return t.store(Bi.store).get(Bi.key).next(function(i){var o=[];return e.Ii(function(t,e){var n=new F(t),r=[0,Ar(n)];o.push(s.get(r).next(function(t){return t?hr.resolve():s.put(new qi(0,Ar(n),i.highestListenSequenceNumber))}))}).next(function(){return hr.nn(o)})})},Ri.prototype.createCollectionParentIndex=function(t,e){function i(t){if(o.add(t)){var e=t.S(),n=t.p();return r.put({collectionId:e,parent:Ar(n)})}}t.createObjectStore(Wi.store,{keyPath:Wi.keyPath});var r=e.store(Wi.store),o=new Pr;return e.store(Ui.store).Ii({Zi:!0},function(t,e){var n=new F(t);return i(n.p())}).next(function(){return e.store(xi.store).Ii({Zi:!0},function(t,e){t[0];var n=t[1],r=(t[2],Or(n));return i(r.p())})})},Ri.prototype.rewriteCanonicalIds=function(t){var i=this,o=t.store(Vi.store);return o.Ii(function(t,e){var n=Qr(e),r=Kr(i.serializer,n);return o.put(r)})},Ri),ki=function(t,e){this.seconds=t,this.nanoseconds=e},Oi=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function Ri(t){this.serializer=t}Oi.store="owner",Oi.key="owner";var Pi=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Pi.store="mutationQueues",Pi.keyPath="userId";var Di=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Di.store="mutations",Di.keyPath="batchId",Di.userMutationsIndex="userMutationsIndex",Di.userMutationsKeyPath=["userId","batchId"];var xi=(Li.prefixForUser=function(t){return[t]},Li.prefixForPath=function(t,e){return[t,Ar(e)]},Li.key=function(t,e,n){return[t,Ar(e),n]},Li);function Li(){}xi.store="documentMutations",xi.PLACEHOLDER=new xi;var Mi=function(t,e){this.path=t,this.readTime=e},Fi=function(t,e){this.path=t,this.version=e},Ui=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Ui.store="remoteDocuments",Ui.readTimeIndex="readTimeIndex",Ui.readTimeIndexPath="readTime",Ui.collectionReadTimeIndex="collectionReadTimeIndex",Ui.collectionReadTimeIndexPath=["parentPath","readTime"];var ji=function(t){this.byteSize=t};ji.store="remoteDocumentGlobal",ji.key="remoteDocumentGlobalKey";var Vi=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Vi.store="targets",Vi.keyPath="targetId",Vi.queryTargetsIndexName="queryTargetsIndex",Vi.queryTargetsKeyPath=["canonicalId","targetId"];var qi=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};qi.store="targetDocuments",qi.keyPath=["targetId","path"],qi.documentTargetsIndex="documentTargetsIndex",qi.documentTargetsKeyPath=["path","targetId"];var Bi=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Bi.key="targetGlobalKey",Bi.store="targetGlobal";var Wi=function(t,e){this.collectionId=t,this.parent=e};function Hi(t){t.createObjectStore(qi.store,{keyPath:qi.keyPath}).createIndex(qi.documentTargetsIndex,qi.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Vi.store,{keyPath:Vi.keyPath}).createIndex(Vi.queryTargetsIndexName,Vi.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Bi.store)}Wi.store="collectionParents",Wi.keyPath=["collectionId","parent"];var Gi=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Gi.store="clientMetadata",Gi.keyPath="clientId";var Qi,Ki=v.__spreadArrays(v.__spreadArrays(v.__spreadArrays([Pi.store,Di.store,xi.store,Ui.store,Vi.store,Oi.store,Bi.store,qi.store],[Gi.store]),[ji.store]),[Wi.store]),zi=(Zi.Ir=function(o,t,s){return m("SimpleDb","Opening database:",o),new hr(function(n,r){var i=indexedDB.open(o,t);i.onsuccess=function(t){var e=t.target.result;n(new Zi(e))},i.onblocked=function(){r(new D(P.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var e=t.target.error;"VersionError"===e.name?r(new D(P.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(e)},i.onupgradeneeded=function(t){m("SimpleDb",'Database "'+o+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;s.createOrUpgrade(e,i.transaction,t.oldVersion,Ni).next(function(){m("SimpleDb","Database upgrade to version "+Ni+" complete")})}}).en()},Zi.delete=function(t){return m("SimpleDb","Removing database:",t),oo(window.indexedDB.deleteDatabase(t)).en()},Zi._r=function(){if("undefined"==typeof indexedDB)return!1;if(Zi.vo())return!0;var t=l.getUA(),e=Zi.bo(t),n=0<e&&e<10,r=Zi.So(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},Zi.vo=function(){var t;return"undefined"!=typeof __PRIVATE_process&&"YES"===(null===(t=__PRIVATE_process.__PRIVATE_env)||void 0===t?void 0:t.Do)},Zi.ai=function(t,e){return t.store(e)},Zi.bo=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},Zi.So=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},Zi.prototype.br=function(e){this.db.onversionchange=function(t){return e(t)}},Zi.prototype.runTransaction=function(r,c,h){return v.__awaiter(this,void 0,void 0,function(){var s,a,e,u,n;return v.__generator(this,function(t){switch(t.label){case 0:s="readonly"===r,a=0,e=function(){var e,n,r,i,o;return v.__generator(this,function(t){switch(t.label){case 0:++a,e=eo.open(u.db,s?"readonly":"readwrite",c),t.label=1;case 1:return t.trys.push([1,3,,4]),n=h(e).catch(function(t){return e.abort(t),hr.reject(t)}).en(),r={},n.catch(function(){}),[4,e.Co];case 2:return[2,(r.value=(t.sent(),n),r)];case 3:return i=t.sent(),o="FirebaseError"!==i.name&&a<3,m("SimpleDb","Transaction failed with error: %s. Retrying: %s.",i.message,o),o?[3,4]:[2,{value:Promise.reject(i)}];case 4:return[2]}})},u=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(n=t.sent()))return[2,n.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},Zi.prototype.close=function(){this.db.close()},Zi),Xi=(Object.defineProperty($i.prototype,"Js",{get:function(){return this.No},enumerable:!0,configurable:!0}),Object.defineProperty($i.prototype,"ko",{get:function(){return this.$o},enumerable:!0,configurable:!0}),Object.defineProperty($i.prototype,"cursor",{set:function(t){this.Fo=t},enumerable:!0,configurable:!0}),$i.prototype.done=function(){this.No=!0},$i.prototype.Ai=function(t){this.$o=t},$i.prototype.delete=function(){return oo(this.Fo.delete())},$i),Yi=(Qi=D,v.__extends(Ji,Qi),Ji);function Ji(t){var e=this;return(e=Qi.call(this,P.UNAVAILABLE,"IndexedDB transaction failed: "+t)||this).name="IndexedDbTransactionError",e}function $i(t){this.Fo=t,this.No=!1,this.$o=null}function Zi(t){this.db=t,12.2===Zi.bo(l.getUA())&&h("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function to(t){return"IndexedDbTransactionError"===t.name}var eo=(io.open=function(t,e,n){return new io(t.transaction(n,e))},Object.defineProperty(io.prototype,"Co",{get:function(){return this.xo.promise},enumerable:!0,configurable:!0}),io.prototype.abort=function(t){t&&this.xo.reject(t),this.aborted||(m("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},io.prototype.store=function(t){var e=this.transaction.objectStore(t);return new no(e)},io),no=(ro.prototype.put=function(t,e){var n=void 0!==e?(m("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(m("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return oo(n)},ro.prototype.add=function(t){return m("SimpleDb","ADD",this.store.name,t,t),oo(this.store.add(t))},ro.prototype.get=function(e){var n=this;return oo(this.store.get(e)).next(function(t){return void 0===t&&(t=null),m("SimpleDb","GET",n.store.name,e,t),t})},ro.prototype.delete=function(t){return m("SimpleDb","DELETE",this.store.name,t),oo(this.store.delete(t))},ro.prototype.count=function(){return m("SimpleDb","COUNT",this.store.name),oo(this.store.count())},ro.prototype.hi=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mo(n,function(t,e){r.push(e)}).next(function(){return r})},ro.prototype.Lo=function(t,e){m("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Zi=!1;var r=this.cursor(n);return this.Mo(r,function(t,e,n){return n.delete()})},ro.prototype.Ii=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mo(r,e)},ro.prototype.ao=function(i){var t=this.cursor({});return new hr(function(n,r){t.onerror=function(t){var e=ao(t.target.error);r(e)},t.onsuccess=function(t){var e=t.target.result;e?i(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},ro.prototype.Mo=function(t,s){var a=[];return new hr(function(o,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n,r,i=t.target.result;i?(e=new Xi(i),(n=s(i.primaryKey,i.value,e))instanceof hr&&(r=n.catch(function(t){return e.done(),hr.reject(t)}),a.push(r)),e.Js?o():null===e.ko?i.continue():i.continue(e.ko)):o()}}).next(function(){return hr.nn(a)})},ro.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},ro.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Zi?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},ro);function ro(t){this.store=t}function io(t){var n=this;this.transaction=t,this.aborted=!1,this.xo=new Sr,this.transaction.oncomplete=function(){n.xo.resolve()},this.transaction.onabort=function(){t.error?n.xo.reject(new Yi(t.error)):n.xo.resolve()},this.transaction.onerror=function(t){var e=ao(t.target.error);n.xo.reject(new Yi(e))}}function oo(t){return new hr(function(n,r){t.onsuccess=function(t){var e=t.target.result;n(e)},t.onerror=function(t){var e=ao(t.target.error);r(e)}})}var so=!1;function ao(t){var e=zi.bo(l.getUA());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new D("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return so||(so=!0,setTimeout(function(){throw r},0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(){return"undefined"!=typeof window?window:null}var co=(fo.Qo=function(t,e,n,r,i){var o=new fo(t,e,Date.now()+n,r,i);return o.start(n),o},fo.prototype.start=function(t){var e=this;this.Wo=setTimeout(function(){return e.jo()},t)},fo.prototype.ni=function(){return this.jo()},fo.prototype.cancel=function(t){null!==this.Wo&&(this.clearTimeout(),this.Uo.reject(new D(P.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},fo.prototype.jo=function(){var e=this;this.Oo.Sr(function(){return null!==e.Wo?(e.clearTimeout(),e.op().then(function(t){return e.Uo.resolve(t)})):Promise.resolve()})},fo.prototype.clearTimeout=function(){null!==this.Wo&&(this.qo(this),clearTimeout(this.Wo),this.Wo=null)},fo),ho=(Object.defineProperty(lo.prototype,"eh",{get:function(){return this.zo},enumerable:!0,configurable:!0}),lo.prototype.Sr=function(t){this.enqueue(t)},lo.prototype.sh=function(t){this.nh(),this.ih(t)},lo.prototype.rh=function(t){return this.nh(),this.ih(t)},lo.prototype.oh=function(n){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:return this.nh(),this.zo?[3,2]:(this.zo=!0,(e=uo())&&e.removeEventListener("visibilitychange",this.th),[4,this.rh(n)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},lo.prototype.enqueue=function(t){return this.nh(),this.zo?new Promise(function(t){}):this.ih(t)},lo.prototype.Cr=function(i){var t=this;this.nh(),this.zo||(this.Go=this.Go.then(function(){var n=new Sr,r=function(){return v.__awaiter(t,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,i()];case 1:return t.sent(),n.resolve(),this.Zo.reset(),[3,3];case 2:if(!to(e=t.sent()))throw n.resolve(),e;return m("AsyncQueue","Operation failed with retryable error: "+e),this.Zo.Zn(r),[3,3];case 3:return[2]}})})};return t.Sr(r),n.promise}))},lo.prototype.ih=function(t){var r=this,e=this.Ko.then(function(){return r.Jo=!0,t().catch(function(t){throw r.Yo=t,r.Jo=!1,h("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.Jo=!1,t})});return this.Ko=e},lo.prototype.ei=function(t,e,n){var r=this;this.nh(),-1<this.Xo.indexOf(t)&&(e=0);var i=co.Qo(this,t,e,n,function(t){return r.hh(t)});return this.Ho.push(i),i},lo.prototype.nh=function(){this.Yo&&O()},lo.prototype.ah=function(){},lo.prototype.uh=function(){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:return[4,e=this.Ko];case 1:t.sent(),t.label=2;case 2:if(e!==this.Ko)return[3,0];t.label=3;case 3:return[2]}})})},lo.prototype.lh=function(t){for(var e=0,n=this.Ho;e<n.length;e++)if(n[e].jn===t)return!0;return!1},lo.prototype._h=function(r){var i=this;return this.uh().then(function(){i.Ho.sort(function(t,e){return t.Bo-e.Bo});for(var t=0,e=i.Ho;t<e.length;t++){var n=e[t];if(n.ni(),"all"!==r&&n.jn===r)break}return i.uh()})},lo.prototype.fh=function(t){this.Xo.push(t)},lo.prototype.hh=function(t){var e=this.Ho.indexOf(t);this.Ho.splice(e,1)},lo);function lo(){var t=this;this.Ko=Promise.resolve(),this.Go=Promise.resolve(),this.zo=!1,this.Ho=[],this.Yo=null,this.Jo=!1,this.Xo=[],this.Zo=new Cr(this,"async_queue_retry"),this.th=function(){return t.Zo.si()};var e=uo();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.th)}function fo(t,e,n,r,i){this.Oo=t,this.jn=e,this.Bo=n,this.op=r,this.qo=i,this.Uo=new Sr,this.then=this.Uo.promise.then.bind(this.Uo.promise),this.Uo.promise.catch(function(t){})}function po(t,e){if(h("AsyncQueue",e+": "+t),to(t))return new D(P.UNAVAILABLE,e+": "+t);throw t}function vo(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=E(n,i);return 0===s?E(r,o):s}var go=(wo.prototype.Th=function(){return++this.wh},wo.prototype.Eh=function(t){var e,n=[t,this.Th()];this.buffer.size<this.dh?this.buffer=this.buffer.add(n):vo(n,e=this.buffer.last())<0&&(this.buffer=this.buffer.delete(e).add(n))},Object.defineProperty(wo.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),wo),yo={Ih:!1,Ah:0,Rh:0,mh:0},mo=(_o.ph=function(t){return new _o(t,_o.yh,_o.bh)},_o);function _o(t,e,n){this.Ph=t,this.Vh=e,this.gh=n}function wo(t){this.dh=t,this.buffer=new vt(vo),this.wh=0}mo.vh=-1,mo.Sh=1048576,mo.Dh=41943040,mo.yh=10,mo.bh=1e3,mo.Ch=new mo(mo.Dh,mo.yh,mo.bh),mo.DISABLED=new mo(mo.vh,0,0);var bo=(Co.prototype.start=function(t){this.eo.$h.Ph!==mo.vh&&this.kh(t)},Co.prototype.stop=function(){this.Nh&&(this.Nh.cancel(),this.Nh=null)},Object.defineProperty(Co.prototype,"pr",{get:function(){return null!==this.Nh},enumerable:!0,configurable:!0}),Co.prototype.kh=function(n){var t=this,e=this.Fh?3e5:6e4;m("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.Nh=this.Oo.ei("lru_garbage_collection",e,function(){return v.__awaiter(t,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:this.Nh=null,this.Fh=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.xh(this.eo)];case 2:return t.sent(),[3,7];case 3:return to(e=t.sent())?(m("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Oo(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.kh(n)];case 8:return t.sent(),[2]}})})})},Co),Eo=(So.prototype.Lh=function(t,e){return this.Mh.so(t).next(function(t){return Math.floor(e/100*t)})},So.prototype.Oh=function(t,e){var n=this;if(0===e)return hr.resolve(gr.Qn);var r=new go(e);return this.Mh.ye(t,function(t){return r.Eh(t.sequenceNumber)}).next(function(){return n.Mh.io(t,function(t){return r.Eh(t)})}).next(function(){return r.maxValue})},So.prototype.ji=function(t,e,n){return this.Mh.ji(t,e,n)},So.prototype.uo=function(t,e){return this.Mh.uo(t,e)},So.prototype.Bh=function(e,n){var r=this;return this.$h.Ph===mo.vh?(m("LruGarbageCollector","Garbage collection skipped; disabled"),hr.resolve(yo)):this.lo(e).next(function(t){return t<r.$h.Ph?(m("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.$h.Ph),yo):r.qh(e,n)})},So.prototype.lo=function(t){return this.Mh.lo(t)},So.prototype.qh=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.Lh(e,this.$h.Vh).next(function(t){return i=t>h.$h.gh?(m("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.$h.gh+" from "+t),h.$h.gh):t,s=Date.now(),h.Oh(e,i)}).next(function(t){return r=t,a=Date.now(),h.ji(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.uo(e,r)}).next(function(t){return c=Date.now(),y()<=f.LogLevel.DEBUG&&m("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),hr.resolve({Ih:!0,Ah:i,Rh:o,mh:t})})},So),Io=(To.prototype.start=function(){return Promise.resolve()},To.prototype.Hh=function(i){return v.__awaiter(this,void 0,void 0,function(){var e,m,n,r=this;return v.__generator(this,function(t){switch(t.label){case 0:return e=this.Rn,m=this.Gh,[4,this.persistence.runTransaction("Handle user change","readonly",function(g){var y;return r.Rn.Ro(g).next(function(t){return y=t,e=r.persistence.zr(i),m=new dr(r.Kh,e,r.persistence.Xr()),e.Ro(g)}).next(function(t){for(var e=[],n=[],r=It(),i=0,o=y;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.yn(g,r).next(function(t){return{Yh:t,Jh:e,Xh:n}})})})];case 1:return n=t.sent(),[2,(this.Rn=e,this.Gh=m,this.Uh.zh(this.Gh),n)]}})})},To.prototype.Zh=function(a){var u,c=this,h=x.now(),t=a.reduce(function(t,e){return t.add(e.key)},It());return this.persistence.runTransaction("Locally write mutations","readwrite",function(s){return c.Gh.yn(s,t).next(function(t){u=t;for(var e=[],n=0,r=a;n<r.length;n++){var i=r[n],o=i.Ze(u.get(i.key));null!=o&&e.push(new en(i.key,o,function a(t){var u=[];return C(t.fields||{},function(t,e){var n=new Q([t]);if(ae(e)){var r=a(e.mapValue).fields;if(0===r.length)u.push(n);else for(var i=0,o=r;i<o.length;i++){var s=o[i];u.push(n.child(s))}}else u.push(n)}),new Ye(u)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(o.proto.mapValue),$e.exists(!0)))}return c.Rn.wo(s,h,e,a)})}).then(function(t){var e=t.Ks(u);return{batchId:t.batchId,on:e}})},To.prototype.ta=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e=r.batch.keys(),n=i.Kh.Vi({pi:!0});return i.ea(t,r,n).next(function(){return n.apply(t)}).next(function(){return i.Rn.po(t)}).next(function(){return i.Gh.yn(t,e)})})},To.prototype.sa=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return r.Rn.To(e,t).next(function(t){return b(null!==t),n=t.keys(),r.Rn.Po(e,t)}).next(function(){return r.Rn.po(e)}).next(function(){return r.Gh.yn(e,n)})})},To.prototype.Ao=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Rn.Ao(t)})},To.prototype.xi=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Tr.xi(t)})},To.prototype.na=function(u){var c=this,h=u.J,l=this.Qh;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var i=c.Kh.Vi({pi:!0});l=c.Qh;var s=[];u.Qt.forEach(function(t,e){var n,r,i=l.get(e);i&&(s.push(c.Tr.Yi(o,t.Xt,e).next(function(){return c.Tr.zi(o,t.Yt,e)})),0<(n=t.resumeToken).G()&&(r=i.Z(n,h).X(o.sr),l=l.et(e,r),To.ia(i,r,t)&&s.push(c.Tr.Ui(o,r))))});var t,a=yt,n=It();return u.jt.forEach(function(t,e){n=n.add(t)}),s.push(i.getEntries(o,n).next(function(r){u.jt.forEach(function(t,e){var n=r.get(t);e instanceof On&&e.version.isEqual(L.min())?(i.ln(t,h),a=a.et(t,e)):null==n||0<e.version.o(n.version)||0===e.version.o(n.version)&&n.hasPendingWrites?(i.un(e,h),a=a.et(t,e)):m("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.Kt.has(t)&&s.push(c.persistence.Fi.co(o,t))})})),h.isEqual(L.min())||(t=c.Tr.xi(o).next(function(t){return c.Tr.Li(o,o.sr,h)}),s.push(t)),hr.nn(s).next(function(){return i.apply(o)}).next(function(){return c.Gh.bn(o,a)})}).then(function(t){return c.Qh=l,t})},To.ia=function(t,e,n){return b(0<e.resumeToken.G()),0===t.resumeToken.G()||e.J.A()-t.J.A()>=this.ra||0<n.Yt.size+n.Jt.size+n.Xt.size},To.prototype.oa=function(h){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c=this;return v.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return hr.forEach(h,function(e){return hr.forEach(e.xn,function(t){return c.persistence.Fi.Hi(n,e.targetId,t)}).next(function(){return hr.forEach(e.Mn,function(t){return c.persistence.Fi.Ji(n,e.targetId,t)})})})})];case 1:return t.sent(),[3,3];case 2:if(!to(e=t.sent()))throw e;return m("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=h;n<r.length;n++)i=r[n],o=i.targetId,i.fromCache||(s=this.Qh.get(o),a=s.J,u=s.tt(a),this.Qh=this.Qh.et(o,u));return[2]}})})},To.prototype.ha=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Rn.Io(t,e)})},To.prototype.aa=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(t){return n.Gh.Pn(t,e)})},To.prototype.ua=function(r){var i=this;return this.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.Tr.Gi(e,r).next(function(t){return t?(n=t,hr.resolve(n)):i.Tr.Ni(e).next(function(t){return n=new it(r,t,0,e.sr),i.Tr.Oi(e,n).next(function(){return n})})})}).then(function(t){var e=i.Qh.get(t.targetId);return(null===e||0<t.J.o(e.J))&&(i.Qh=i.Qh.et(t.targetId,t),i.Wh.set(r,t.targetId)),t})},To.prototype.Gi=function(t,e){var n=this.Wh.get(e);return void 0!==n?hr.resolve(this.Qh.get(n)):this.Tr.Gi(t,e)},To.prototype.ca=function(t,e){var n=this,r=this.Qh.get(t),i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,function(t){return e?hr.resolve():n.persistence.Fi.removeTarget(t,r)}).then(function(){n.Qh=n.Qh.remove(t),n.Wh.delete(r.target)})},To.prototype.la=function(t,n){var r=this,i=L.min(),o=It();return this.persistence.runTransaction("Execute query","readonly",function(e){return r.Gi(e,t.We()).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Tr.Xi(e,t.targetId).next(function(t){o=t})}).next(function(){return r.Uh.Sn(e,t,n?i:L.min(),n?o:It())}).next(function(t){return{documents:t,_a:o}})})},To.prototype.ea=function(t,i,o){var e=this,s=i.batch,n=s.keys(),a=hr.resolve();return n.forEach(function(r){a=a.next(function(){return o._n(t,r)}).next(function(t){var e=t,n=i.zs.get(r);b(null!==n),(!e||e.version.o(n)<0)&&(e=s.Ke(r,e,i))&&o.un(e,i.Gs)})}),a.next(function(){return e.Rn.Po(t,s)})},To.prototype.xh=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Bh(t,n.Qh)})},To);function To(t,e,n){this.persistence=t,this.Uh=e,this.Qh=new ut(E),this.Wh=new R(or,sr),this.jh=L.min(),this.Rn=t.zr(n),this.Kh=t.Jr(),this.Tr=t.Yr(),this.Gh=new dr(this.Kh,this.Rn,this.persistence.Xr()),this.Uh.zh(this.Gh)}function So(t,e){this.Mh=t,this.$h=e}function Co(t,e){this.eo=t,this.Oo=e,this.Fh=!1,this.Nh=null}Io.ra=3e8;var No,Ao=(No=Io,v.__extends(ko,No),ko.prototype.start=function(){return this.fa()},ko.prototype.da=function(t){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return n.Rn.Eo(e,t).next(function(t){return t?n.Gh.yn(e,t):hr.resolve(null)})})},ko.prototype.wa=function(t){this.Rn.Vo(t)},ko.prototype.vr=function(t){this.persistence.vr(t)},ko.prototype.Gr=function(){return this.persistence.Gr()},ko.prototype.Ta=function(e){var n=this,t=this.Qh.get(e);return t?Promise.resolve(t.target):this.persistence.runTransaction("Get target data","readonly",function(t){return n.Tr.Me(t,e).next(function(t){return t?t.target:null})})},ko.prototype.Ri=function(){var r=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return r.Kh.Ri(t,r.jh)}).then(function(t){var e=t.mi,n=t.readTime;return r.jh=n,e})},ko.prototype.fa=function(){return v.__awaiter(this,void 0,void 0,function(){var e,n=this;return v.__generator(this,function(t){switch(t.label){case 0:return[4,(e=this).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return n.Kh.Pi(t)})];case 1:return e.jh=t.sent(),[2]}})})},ko);function ko(t,e,n){var r=this;return(r=No.call(this,t,e,n)||this).persistence=t,r.Rn=t.zr(n),r.Kh=t.Jr(),r.Tr=t.Yr(),r}function Oo(e){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){if(e.code!==P.FAILED_PRECONDITION||e.message!==fr)throw e;return m("LocalStore","Unexpectedly lost primary lease"),[2]})})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ro=(xo.prototype._=function(){return this.Ea._()},xo.prototype.Hi=function(t,e){var n=new Po(t,e);this.Ea=this.Ea.add(n),this.Aa=this.Aa.add(n)},xo.prototype.ma=function(t,e){var n=this;t.forEach(function(t){return n.Hi(t,e)})},xo.prototype.Ji=function(t,e){this.Pa(new Po(t,e))},xo.prototype.Va=function(t,e){var n=this;t.forEach(function(t){return n.Ji(t,e)})},xo.prototype.ga=function(t){var e=this,n=z.EMPTY,r=new Po(n,t),i=new Po(n,t+1),o=[];return this.Aa.vt([r,i],function(t){e.Pa(t),o.push(t.key)}),o},xo.prototype.pa=function(){var e=this;this.Ea.forEach(function(t){return e.Pa(t)})},xo.prototype.Pa=function(t){this.Ea=this.Ea.delete(t),this.Aa=this.Aa.delete(t)},xo.prototype.ya=function(t){var e=z.EMPTY,n=new Po(e,t),r=new Po(e,t+1),i=It();return this.Aa.vt([n,r],function(t){i=i.add(t.key)}),i},xo.prototype.tr=function(t){var e=new Po(t,0),n=this.Ea.Dt(e);return null!==n&&t.isEqual(n.key)},xo),Po=(Do.Ia=function(t,e){return z.P(t.key,e.key)||E(t.ba,e.ba)},Do.Ra=function(t,e){return E(t.ba,e.ba)||z.P(t.key,e.key)},Do);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(t,e){this.key=t,this.ba=e}function xo(){this.Ea=new vt(Po.Ia),this.Aa=new vt(Po.Ra)}function Lo(t,e){if(0!==e.length)throw new D(P.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Zo(e.length,"argument")+".")}function Mo(t,e,n){if(e.length!==n)throw new D(P.INVALID_ARGUMENT,"Function "+t+"() requires "+Zo(n,"argument")+", but was called with "+Zo(e.length,"argument")+".")}function Fo(t,e,n){if(e.length<n)throw new D(P.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Zo(n,"argument")+", but was called with "+Zo(e.length,"argument")+".")}function Uo(t,e,n,r){if(e.length<n||e.length>r)throw new D(P.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Zo(e.length,"argument")+".")}function jo(t,e,n,r){Go(t,e,$o(n)+" argument",r)}function Vo(t,e,n,r){void 0!==r&&jo(t,e,n,r)}function qo(t,e,n,r){Go(t,e,n+" option",r)}function Bo(t,e,n,r){void 0!==r&&qo(t,e,n,r)}function Wo(t,e,n,r,u){void 0!==r&&function(t,e,n){for(var r=[],i=0,o=u;i<o.length;i++){var s=o[i];if(s===n)return;r.push(Ko(s))}var a=Ko(n);throw new D(P.INVALID_ARGUMENT,"Invalid value "+a+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+r.join(", "))}(t,n,r)}function Ho(t,e,n,r){if(!e.some(function(t){return t===r}))throw new D(P.INVALID_ARGUMENT,"Invalid value "+Ko(r)+" provided to function "+t+"() for its "+$o(n)+" argument. Acceptable values: "+e.join(", "));return r}function Go(t,e,n,r){if(!("object"===e?Qo(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Ko(r);throw new D(P.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function Qo(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Ko(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":O();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function zo(t,e,n){if(void 0===n)throw new D(P.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+$o(e)+" argument, but it was undefined.")}function Xo(n,t,r){C(t,function(t,e){if(r.indexOf(t)<0)throw new D(P.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function Yo(t,e,n,r){var i=Ko(r);return new D(P.INVALID_ARGUMENT,"Function "+t+"() requires its "+$o(n)+" argument to be a "+e+", but it was: "+i)}function Jo(t,e,n){if(n<=0)throw new D(P.INVALID_ARGUMENT,"Function "+t+"() requires its "+$o(e)+" argument to be a positive number, but it was: "+n+".")}function $o(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Zo(t,e){return t+" "+e+(1===t?"":"s")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){if("undefined"==typeof Uint8Array)throw new D(P.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function es(){if("undefined"==typeof atob)throw new D(P.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function ns(t){!function(){if(!(t instanceof Array)||t.length<1)throw new D(P.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var e=0;e<t.length;++e)if(jo("FieldPath","string",e,t[e]),0===t[e].length)throw new D(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Sa=new Q(t)}var rs,is=(as.fromBase64String=function(t){Mo("Blob.fromBase64String",arguments,1),jo("Blob.fromBase64String","string",1,t),es();try{return new as(Z.fromBase64String(t))}catch(t){throw new D(P.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},as.fromUint8Array=function(t){if(Mo("Blob.fromUint8Array",arguments,1),ts(),!(t instanceof Uint8Array))throw Yo("Blob.fromUint8Array","Uint8Array",1,t);return new as(Z.fromUint8Array(t))},as.prototype.toBase64=function(){return Mo("Blob.toBase64",arguments,0),es(),this.va.toBase64()},as.prototype.toUint8Array=function(){return Mo("Blob.toUint8Array",arguments,0),ts(),this.va.toUint8Array()},as.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},as.prototype.isEqual=function(t){return this.va.isEqual(t.va)},as),os=(rs=ns,v.__extends(ss,rs),ss.documentId=function(){return ss.Da},ss.prototype.isEqual=function(t){if(!(t instanceof ss))throw Yo("isEqual","FieldPath",1,t);return this.Sa.isEqual(t.Sa)},ss);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return rs.call(this,t)||this}function as(t){es(),this.va=t}os.Da=new os(Q.O().N());var us,cs,hs,ls,fs,ps,ds,vs=new RegExp("[~\\*/\\[\\]]"),gs=function(){this.Ca=this},ys=(ds=gs,v.__extends(Ps,ds),Ps.prototype.Na=function(t){if(2!==t.$a)throw 1===t.$a?t.ka(this.Fa+"() can only appear at the top level of your update data"):t.ka(this.Fa+"() cannot be used with set() unless you pass {merge:true}");return t.Oe.push(t.path),null},Ps.prototype.isEqual=function(t){return t instanceof Ps},Ps),ms=(ps=gs,v.__extends(Rs,ps),Rs.prototype.Na=function(t){return new Je(t.path,Le.instance)},Rs.prototype.isEqual=function(t){return t instanceof Rs},Rs),_s=(fs=gs,v.__extends(Os,fs),Os.prototype.Na=function(t){var e=new qs({$a:3,methodName:this.Fa,Ma:!0},t.s,t.serializer,t.ignoreUndefinedProperties),n=this.xa.map(function(t){return Gs(t,e)}),r=new Fe(n);return new Je(t.path,r)},Os.prototype.isEqual=function(t){return this===t},Os),ws=(ls=gs,v.__extends(ks,ls),ks.prototype.Na=function(t){var e=new qs({$a:3,methodName:this.Fa,Ma:!0},t.s,t.serializer,t.ignoreUndefinedProperties),n=this.xa.map(function(t){return Gs(t,e)}),r=new Ue(n);return new Je(t.path,r)},ks.prototype.isEqual=function(t){return this===t},ks),bs=(hs=gs,v.__extends(As,hs),As.prototype.Na=function(t){var e=new qs({$a:3,methodName:this.Fa},t.s,t.serializer,t.ignoreUndefinedProperties),n=Gs(this.La,e),r=new je(t.serializer,n);return new Je(t.path,r)},As.prototype.isEqual=function(t){return this===t},As),Es=(cs=gs,v.__extends(Ns,cs),Ns.delete=function(){return Lo("FieldValue.delete",arguments),new Is(new ys("FieldValue.delete"))},Ns.serverTimestamp=function(){return Lo("FieldValue.serverTimestamp",arguments),new Is(new ms("FieldValue.serverTimestamp"))},Ns.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Fo("FieldValue.arrayUnion",arguments,1),new Is(new _s("FieldValue.arrayUnion",t))},Ns.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Fo("FieldValue.arrayRemove",arguments,1),new Is(new ws("FieldValue.arrayRemove",t))},Ns.increment=function(t){return jo("FieldValue.increment","number",1,t),Mo("FieldValue.increment",arguments,1),new Is(new bs("FieldValue.increment",t))},Ns),Is=(us=Es,v.__extends(Cs,us),Cs.prototype.Na=function(t){return this.Ca.Na(t)},Cs.prototype.isEqual=function(t){return t instanceof Cs&&this.Ca.isEqual(t.Ca)},Cs),Ts=(Object.defineProperty(Ss.prototype,"latitude",{get:function(){return this.Oa},enumerable:!0,configurable:!0}),Object.defineProperty(Ss.prototype,"longitude",{get:function(){return this.Ba},enumerable:!0,configurable:!0}),Ss.prototype.isEqual=function(t){return this.Oa===t.Oa&&this.Ba===t.Ba},Ss.prototype.T=function(t){return E(this.Oa,t.Oa)||E(this.Ba,t.Ba)},Ss);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t,e){if(Mo("GeoPoint",arguments,2),jo("GeoPoint","number",1,t),jo("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new D(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new D(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Oa=t,this.Ba=e}function Cs(t){var e=this;return(e=us.call(this)||this).Ca=t,e.Fa=t.Fa,e}function Ns(){return null!==cs&&cs.apply(this,arguments)||this}function As(t,e){var n=this;return(n=hs.call(this)||this).Fa=t,n.La=e,n}function ks(t,e){var n=this;return(n=ls.call(this)||this).Fa=t,n.xa=e,n}function Os(t,e){var n=this;return(n=fs.call(this)||this).Fa=t,n.xa=e,n}function Rs(t){var e=this;return(e=ps.call(this)||this).Fa=t,e}function Ps(t){var e=this;return(e=ds.call(this)||this).Fa=t,e}function Ds(t){return new he(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xs=/^__.*__$/,Ls=function(t,e,n){this.qa=t,this.Ua=e,this.Qa=n},Ms=(js.prototype.Wa=function(t,e){var n=[];return null!==this.Oe?n.push(new en(t,this.data,this.Oe,e)):n.push(new tn(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new nn(t,this.fieldTransforms)),n},js),Fs=(Us.prototype.Wa=function(t,e){var n=[new en(t,this.data,this.Oe,e)];return 0<this.fieldTransforms.length&&n.push(new nn(t,this.fieldTransforms)),n},Us);function Us(t,e,n){this.data=t,this.Oe=e,this.fieldTransforms=n}function js(t,e,n){this.data=t,this.Oe=e,this.fieldTransforms=n}function Vs(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw O()}}var qs=(Object.defineProperty(Hs.prototype,"path",{get:function(){return this.settings.path},enumerable:!0,configurable:!0}),Object.defineProperty(Hs.prototype,"$a",{get:function(){return this.settings.$a},enumerable:!0,configurable:!0}),Hs.prototype.Ka=function(t){return new Hs(Object.assign(Object.assign({},this.settings),t),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Oe)},Hs.prototype.Ga=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ka({path:n,Ma:!1});return r.za(t),r},Hs.prototype.Ha=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Ka({path:n,Ma:!1});return r.ja(),r},Hs.prototype.Ya=function(t){return this.Ka({path:void 0,Ma:!0})},Hs.prototype.ka=function(t){var e=!this.path||this.path._()?"":" (found in field "+this.path.toString()+")";return new D(P.INVALID_ARGUMENT,"Function "+this.settings.methodName+"() called with invalid data. "+t+e)},Hs.prototype.contains=function(e){return void 0!==this.Oe.find(function(t){return e.D(t)})||void 0!==this.fieldTransforms.find(function(t){return e.D(t.field)})},Hs.prototype.ja=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.za(this.path.get(t))},Hs.prototype.za=function(t){if(0===t.length)throw this.ka("Document fields must not be empty");if(Vs(this.$a)&&xs.test(t))throw this.ka('Document fields cannot begin and end with "__"')},Hs),Bs=(Ws.prototype.Ja=function(t,e,n){void 0===n&&(n={});var r=this.Xa(n.merge||n.mergeFields?2:0,t);zs("Data must be an object, but it was:",r,e);var i,o,s=Qs(e,r);if(n.merge)i=new Ye(r.Oe),o=r.fieldTransforms;else if(n.mergeFields){for(var a=[],u=0,c=n.mergeFields;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof ns)l=h.Sa;else{if("string"!=typeof h)throw O();l=Ys(t,h)}if(!r.contains(l))throw new D(P.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");Js(a,l)||a.push(l)}i=new Ye(a),o=r.fieldTransforms.filter(function(t){return i.ze(t.field)})}else i=null,o=r.fieldTransforms;return new Ms(new sn(s),i,o)},Ws.prototype.Za=function(o,t){var s=this.Xa(1,o);zs("Data must be an object, but it was:",s,t);var a=[],u=new an;C(t,function(t,e){var n,r=Ys(o,t),i=s.Ha(r);e instanceof gs&&e.Ca instanceof ys?a.push(r):null!=(n=Gs(e,i))&&(a.push(r),u.set(r,n))});var e=new Ye(a);return new Fs(u.ss(),e,s.fieldTransforms)},Ws.prototype.tu=function(t,e,n,r){var i=this.Xa(1,t),o=[Xs(t,e)],s=[n];if(r.length%2!=0)throw new D(P.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(Xs(t,r[a])),s.push(r[a+1]);for(var u,c,h,l,f=[],p=new an,d=o.length-1;0<=d;--d)Js(f,o[d])||(u=o[d],c=s[d],h=i.Ha(u),c instanceof gs&&c.Ca instanceof ys?f.push(u):null!=(l=Gs(c,h))&&(f.push(u),p.set(u,l)));var v=new Ye(f);return new Fs(p.ss(),v,i.fieldTransforms)},Ws.prototype.Xa=function(t,e){return new qs({$a:t,methodName:e,path:Q.k,Ma:!1},this.s,this.serializer,this.ignoreUndefinedProperties)},Ws.prototype.eu=function(t,e,n){return void 0===n&&(n=!1),Gs(e,this.Xa(n?4:3,t))},Ws);function Ws(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||Ds(t)}function Hs(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ja(),this.fieldTransforms=i||[],this.Oe=o||[]}function Gs(s,t){if(Ks(s))return zs("Unsupported field value:",t,s),Qs(s,t);if(s instanceof gs)return function(t,e){if(!Vs(e.$a))throw e.ka(t.Fa+"() can only be used with update() and set()");if(!e.path)throw e.ka(t.Fa+"() is not currently supported inside arrays");var n=t.Na(e);n&&e.fieldTransforms.push(n)}(s,t),null;if(t.path&&t.Oe.push(t.path),s instanceof Array){if(t.settings.Ma&&4!==t.$a)throw t.ka("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=Gs(i[r],t.Ya(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return n=e.serializer,$(r=t)?le(r):fe(n,r);var n,r;if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var i=x.fromDate(t);return{timestampValue:pe(e.serializer,i)}}if(t instanceof x){var o=new x(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:pe(e.serializer,o)}}if(t instanceof Ts)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof is)return{bytesValue:de(e.serializer,t)};if(t instanceof Ls){var s=e.s,a=t.qa;if(!a.isEqual(s))throw e.ka("Document reference is for database "+a.projectId+"/"+a.database+" but should be for database "+s.projectId+"/"+s.database);return{referenceValue:ye(t.qa||e.s,t.Ua.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.ka("Unsupported field value: "+Ko(t))}(s,t)}function Qs(t,r){var i={};return N(t)?r.path&&0<r.path.length&&r.Oe.push(r.path):C(t,function(t,e){var n=Gs(e,r.Ga(t));null!=n&&(i[t]=n)}),{mapValue:{fields:i}}}function Ks(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof x||t instanceof Ts||t instanceof is||t instanceof Ls||t instanceof gs)}function zs(t,e,n){if(!Ks(n)||!Qo(n)){var r=Ko(n);throw"an object"===r?e.ka(t+" a custom object"):e.ka(t+" "+r)}}function Xs(t,e){if(e instanceof ns)return e.Sa;if("string"==typeof e)return Ys(t,e);throw new D(P.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Ys(t,e){try{return function(e){if(0<=e.search(vs))throw new D(P.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(os.bind.apply(os,v.__spreadArrays([void 0],e.split("."))))}catch(t){throw new D(P.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Sa}catch(e){var n=e instanceof Error?e.message:e.toString();throw new D(P.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function Js(t,e){return t.some(function(t){return t.isEqual(e)})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $s=(Zs.prototype.fo=function(){return null!=this.uid},Zs.prototype.su=function(){return this.fo()?"uid:"+this.uid:"anonymous-user"},Zs.prototype.isEqual=function(t){return t.uid===this.uid},Zs);function Zs(t){this.uid=t}$s.UNAUTHENTICATED=new $s(null),$s.nu=new $s("google-credentials-uid"),$s.iu=new $s("first-party-uid");function ta(t,e){this.user=e,this.type="OAuth",this.ru={},this.ru.Authorization="Bearer "+t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ea,na,ra,ia=(Sa.prototype.getToken=function(){return Promise.resolve(null)},Sa.prototype.hu=function(){},Sa.prototype.au=function(t){(this.ou=t)($s.UNAUTHENTICATED)},Sa.prototype.uu=function(){this.ou=null},Sa),oa=(Ta.prototype.getToken=function(){var e=this,n=this._u,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e._u!==n?(m("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(b("string"==typeof t.accessToken),new ta(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},Ta.prototype.hu=function(){this.forceRefresh=!0},Ta.prototype.au=function(t){this.ou=t,this.lu&&t(this.currentUser)},Ta.prototype.uu=function(){this.auth&&this.auth.removeAuthTokenListener(this.cu),this.cu=null,this.ou=null},Ta.prototype.fu=function(){var t=this.auth&&this.auth.getUid();return b(null===t||"string"==typeof t),new $s(t)},Ta),sa=(Object.defineProperty(Ia.prototype,"ru",{get:function(){var t={"X-Goog-AuthUser":this.wu},e=this.du.auth.Tu([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),Ia),aa=(Ea.prototype.getToken=function(){return Promise.resolve(new sa(this.du,this.wu))},Ea.prototype.au=function(t){t($s.iu)},Ea.prototype.uu=function(){},Ea.prototype.hu=function(){},Ea),ua=(ba.prototype.Pu=function(){return 1===this.state||2===this.state||4===this.state},ba.prototype.Vu=function(){return 2===this.state},ba.prototype.start=function(){3!==this.state?this.auth():this.gu()},ba.prototype.stop=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.Pu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},ba.prototype.pu=function(){this.state=0,this.Zo.reset()},ba.prototype.yu=function(){var t=this;this.Vu()&&null===this.mu&&(this.mu=this.Wn.ei(this.Eu,6e4,function(){return t.bu()}))},ba.prototype.vu=function(t){this.Su(),this.stream.send(t)},ba.prototype.bu=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){return this.Vu()?[2,this.close(0)]:[2]})})},ba.prototype.Su=function(){this.mu&&(this.mu.cancel(),this.mu=null)},ba.prototype.close=function(e,n){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.Su(),this.Zo.cancel(),this.Ru++,3!==e?this.Zo.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(h(n.toString()),h("Using maximum backoff delay to prevent overloading the backend."),this.Zo.Xn()):n&&n.code===P.UNAUTHENTICATED&&this.Au.hu(),null!==this.stream&&(this.Du(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Cu(n)];case 1:return t.sent(),[2]}})})},ba.prototype.Du=function(){},ba.prototype.auth=function(){var n=this;this.state=1;var t=this.Fu(this.Ru),e=this.Ru;this.Au.getToken().then(function(t){n.Ru===e&&n.Nu(t)},function(e){t(function(){var t=new D(P.UNKNOWN,"Fetching auth token failed: "+e.message);return n.$u(t)})})},ba.prototype.Nu=function(t){var e=this,n=this.Fu(this.Ru);this.stream=this.ku(t),this.stream.xu(function(){n(function(){return e.state=2,e.listener.xu()})}),this.stream.Cu(function(t){n(function(){return e.$u(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},ba.prototype.gu=function(){var t=this;this.state=4,this.Zo.Zn(function(){return v.__awaiter(t,void 0,void 0,function(){return v.__generator(this,function(t){return this.state=0,this.start(),[2]})})})},ba.prototype.$u=function(t){return m("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},ba.prototype.Fu=function(e){var n=this;return function(t){n.Wn.Sr(function(){return n.Ru===e?t():(m("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},ba),ca=(ra=ua,v.__extends(wa,ra),wa.prototype.ku=function(t){return this.Iu.Mu("Listen",t)},wa.prototype.onMessage=function(t){this.Zo.reset();var e=function(t,e){var n,r,i;if("targetChange"in e){e.targetChange;var o="NO_CHANGE"===(i=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===i?1:"REMOVE"===i?2:"CURRENT"===i?3:"RESET"===i?4:O(),s=e.targetChange.targetIds||[],a=ve(t,e.targetChange.resumeToken),u=e.targetChange.cause,c=u&&(r=void 0===(n=u).code?P.UNKNOWN:at(n.code),new D(r,n.message||"")),h=new Nt(o,s,a,c||null)}else if("documentChange"in e){e.documentChange;var l=e.documentChange;l.document,l.document.name,l.document.updateTime;var f=we(t,l.document.name),p=ge(l.document.updateTime),d=new sn({mapValue:{fields:l.document.fields}}),v=new kn(f,p,d,{}),g=l.targetIds||[],y=l.removedTargetIds||[];h=new St(g,y,v.key,v)}else if("documentDelete"in e){e.documentDelete;var m=e.documentDelete;m.document;var _=we(t,m.document),w=m.readTime?ge(m.readTime):L.min(),b=new On(_,w),E=m.removedTargetIds||[];h=new St([],E,b.key,b)}else if("documentRemove"in e){e.documentRemove;var I=e.documentRemove;I.document;var T=we(t,I.document),S=I.removedTargetIds||[];h=new St([],S,T,null)}else{if(!("filter"in e))return O();e.filter;var C=e.filter;C.targetId;var N=C.count||0,A=new et(N),k=C.targetId;h=new Ct(k,A)}return h}(this.serializer,t),n=function(t){if(!("targetChange"in t))return L.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?L.min():ge(e.readTime)}(t);return this.listener.Lu(e,n)},wa.prototype.Ou=function(t){var e,n,r,i,o={};o.database=Ie(this.serializer),o.addTarget=(e=this.serializer,i=(n=t).target,(r=ar(i)?{documents:Ae(e,i)}:{query:ke(e,i)}).targetId=n.targetId,0<n.resumeToken.G()&&(r.resumeToken=de(e,n.resumeToken)),r);var s,a,u=(this.serializer,s=t,null==(a=function(){switch(s.Y){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return O()}}())?null:{"goog-listen-tags":a});u&&(o.labels=u),this.vu(o)},wa.prototype.Bu=function(t){var e={};e.database=Ie(this.serializer),e.removeTarget=t,this.vu(e)},wa),ha=(na=ua,v.__extends(_a,na),Object.defineProperty(_a.prototype,"Uu",{get:function(){return this.qu},enumerable:!0,configurable:!0}),_a.prototype.start=function(){this.qu=!1,this.lastStreamToken=Z.H,na.prototype.start.call(this)},_a.prototype.Du=function(){this.qu&&this.Qu([])},_a.prototype.ku=function(t){return this.Iu.Mu("Write",t)},_a.prototype.onMessage=function(t){if(b(!!t.streamToken),this.lastStreamToken=ve(this.serializer,t.streamToken),this.qu){this.Zo.reset();var e=(r=t.writeResults,i=t.commitTime,r&&0<r.length?(b(void 0!==i),r.map(function(t){return function(t,e){var n=t.updateTime?ge(t.updateTime):ge(e);n.isEqual(L.min())&&(n=ge(e));var r=null;return t.transformResults&&0<t.transformResults.length&&(r=t.transformResults),new He(n,r)}(t,i)})):[]),n=ge(t.commitTime);return this.listener.Wu(n,e)}var r,i;return b(!t.writeResults||0===t.writeResults.length),this.qu=!0,this.listener.ju()},_a.prototype.Ku=function(){var t={};t.database=Ie(this.serializer),this.vu(t)},_a.prototype.Qu=function(t){var e=this,n={streamToken:de(this.serializer,this.lastStreamToken),writes:t.map(function(t){return Ce(e.serializer,t)})};this.vu(n)},_a),la=(ea=function(){this.Gu=void 0},v.__extends(ma,ea),ma.prototype.Hu=function(){if(this.zu)throw new D(P.FAILED_PRECONDITION,"The client has already been terminated.")},ma.prototype.Yu=function(e,n){var r=this;return this.Hu(),this.credentials.getToken().then(function(t){return r.Iu.Yu(e,n,t)}).catch(function(t){throw t.code===P.UNAUTHENTICATED&&r.credentials.hu(),t})},ma.prototype.Ju=function(e,n){var r=this;return this.Hu(),this.credentials.getToken().then(function(t){return r.Iu.Ju(e,n,t)}).catch(function(t){throw t.code===P.UNAUTHENTICATED&&r.credentials.hu(),t})},ma),fa=(ya.prototype.nc=function(r){return v.__awaiter(this,void 0,void 0,function(){var e,n=this;return v.__generator(this,function(t){switch(t.label){case 0:if(this.ic(),0<this.mutations.length)throw new D(P.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return v.__awaiter(this,void 0,void 0,function(){var i,e,n,o,r;return v.__generator(this,function(t){switch(t.label){case 0:return e={database:Ie((i=s).serializer),documents:a.map(function(t){return _e(i.serializer,t)})},[4,i.Ju("BatchGetDocuments",e)];case 1:return n=t.sent(),o=new Map,n.forEach(function(t){var e,n,r=(e=i.serializer,"found"in(n=t)?function(t,e){b(!!e.found),e.found.name,e.found.updateTime;var n=we(t,e.found.name),r=ge(e.found.updateTime),i=new sn({mapValue:{fields:e.found.fields}});return new kn(n,r,i,{})}(e,n):"missing"in n?function(t,e){b(!!e.missing),b(!!e.readTime);var n=we(t,e.missing),r=ge(e.readTime);return new On(n,r)}(e,n):O());o.set(r.key.toString(),r)}),r=[],[2,(a.forEach(function(t){var e=o.get(t.toString());b(!!e),r.push(e)}),r)]}})})}(this.Xu,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof On||t instanceof kn?n.rc(t):O()}),e)]}})})},ya.prototype.set=function(t,e){this.write(e.Wa(t,this.Ue(t))),this.sc.add(t)},ya.prototype.update=function(t,e){try{this.write(e.Wa(t,this.oc(t)))}catch(t){this.ec=t}this.sc.add(t)},ya.prototype.delete=function(t){this.write([new rn(t,this.Ue(t))]),this.sc.add(t)},ya.prototype.commit=function(){return v.__awaiter(this,void 0,void 0,function(){var e,r=this;return v.__generator(this,function(t){switch(t.label){case 0:if(this.ic(),this.ec)throw this.ec;return e=this.Zu,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){var n=new z(F.$(e));r.mutations.push(new on(n,r.Ue(n)))}),[4,function(r,i){return v.__awaiter(this,void 0,void 0,function(){var e,n;return v.__generator(this,function(t){switch(t.label){case 0:return n={database:Ie((e=r).serializer),writes:i.map(function(t){return Ce(e.serializer,t)})},[4,e.Yu("Commit",n)];case 1:return t.sent(),[2]}})})}(this.Xu,this.mutations)];case 1:return t.sent(),this.tc=!0,[2]}})})},ya.prototype.rc=function(t){var e;if(t instanceof kn)e=t.version;else{if(!(t instanceof On))throw O();e=L.min()}var n=this.Zu.get(t.key.toString());if(n){if(!e.isEqual(n))throw new D(P.ABORTED,"Document version changed between two reads.")}else this.Zu.set(t.key.toString(),e)},ya.prototype.Ue=function(t){var e=this.Zu.get(t.toString());return!this.sc.has(t)&&e?$e.updateTime(e):$e.Qe()},ya.prototype.oc=function(t){var e=this.Zu.get(t.toString());if(this.sc.has(t)||!e)return $e.exists(!0);if(e.isEqual(L.min()))throw new D(P.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $e.updateTime(e)},ya.prototype.write=function(t){this.ic(),this.mutations=this.mutations.concat(t)},ya.prototype.ic=function(){},ya),pa=(ga.prototype.lc=function(){var t=this;0===this.ac&&(this._c("Unknown"),this.uc=this.Oo.ei("online_state_timeout",1e4,function(){return t.uc=null,t.fc("Backend didn't respond within 10 seconds."),t._c("Offline"),Promise.resolve()}))},ga.prototype.dc=function(t){"Online"===this.state?this._c("Unknown"):(this.ac++,1<=this.ac&&(this.wc(),this.fc("Connection failed 1 times. Most recent error: "+t.toString()),this._c("Offline")))},ga.prototype.set=function(t){this.wc(),this.ac=0,"Online"===t&&(this.cc=!1),this._c(t)},ga.prototype._c=function(t){t!==this.state&&(this.state=t,this.hc(t))},ga.prototype.fc=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.cc?(h(e),this.cc=!1):m("OnlineStateTracker",e)},ga.prototype.wc=function(){null!==this.uc&&(this.uc.cancel(),this.uc=null)},ga),da=(va.prototype.start=function(){return this.enableNetwork()},va.prototype.enableNetwork=function(){return this.Rc.delete(0),this.$c()},va.prototype.$c=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.Vc()?(this.kc()?this.xc():this.pc.set("Unknown"),[4,this.Mc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},va.prototype.disableNetwork=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.Rc.add(0),[4,this.Lc()];case 1:return t.sent(),this.pc.set("Offline"),[2]}})})},va.prototype.Lc=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return[4,this.Dc.stop()];case 1:return t.sent(),[4,this.yc.stop()];case 2:return t.sent(),0<this.Ec.length&&(m("RemoteStore","Stopping write stream with "+this.Ec.length+" pending writes"),this.Ec=[]),this.Oc(),[2]}})})},va.prototype.Ur=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return m("RemoteStore","RemoteStore shutting down."),this.Rc.add(5),[4,this.Lc()];case 1:return t.sent(),this.mc.Ur(),this.pc.set("Unknown"),[2]}})})},va.prototype.listen=function(t){this.Ic.has(t.targetId)||(this.Ic.set(t.targetId,t),this.kc()?this.xc():this.yc.Vu()&&this.Bc(t))},va.prototype.qc=function(t){this.Ic.delete(t),this.yc.Vu()&&this.Uc(t),0===this.Ic.size&&(this.yc.Vu()?this.yc.yu():this.Vc()&&this.pc.set("Unknown"))},va.prototype.Me=function(t){return this.Ic.get(t)||null},va.prototype.xe=function(t){return this.Qc.xe(t)},va.prototype.Bc=function(t){this.Ac.de(t.targetId),this.yc.Ou(t)},va.prototype.Uc=function(t){this.Ac.de(t),this.yc.Bu(t)},va.prototype.xc=function(){this.Ac=new xt(this),this.yc.start(),this.pc.lc()},va.prototype.kc=function(){return this.Vc()&&!this.yc.Pu()&&0<this.Ic.size},va.prototype.Vc=function(){return 0===this.Rc.size},va.prototype.Oc=function(){this.Ac=null},va.prototype.bc=function(){return v.__awaiter(this,void 0,void 0,function(){var n=this;return v.__generator(this,function(t){return this.Ic.forEach(function(t,e){n.Bc(t)}),[2]})})},va.prototype.vc=function(e){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){return this.Oc(),this.kc()?(this.pc.dc(e),this.xc()):this.pc.set("Unknown"),[2]})})},va.prototype.Sc=function(i,o){return v.__awaiter(this,void 0,void 0,function(){var e,n,r;return v.__generator(this,function(t){switch(t.label){case 0:if(this.pc.set("Online"),!(i instanceof Nt&&2===i.state&&i.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,this.Wc(i)];case 2:return t.sent(),[3,5];case 3:return e=t.sent(),m("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),e),[4,this.jc(e)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(i instanceof St?this.Ac.Pe(i):i instanceof Ct?this.Ac.De(i):this.Ac.pe(i),o.isEqual(L.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,this.Tc.xi()];case 8:return n=t.sent(),0<=o.o(n)?[4,this.Kc(o)]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return m("RemoteStore","Failed to raise snapshot:",r=t.sent()),[4,this.jc(r)];case 12:return t.sent(),[3,13];case 13:return[2]}})})},va.prototype.jc=function(n,r){return v.__awaiter(this,void 0,void 0,function(){var e=this;return v.__generator(this,function(t){switch(t.label){case 0:if(!to(n))throw n;return this.Rc.add(1),[4,this.Lc()];case 1:return t.sent(),this.pc.set("Offline"),r=r||function(){return e.Tc.xi()},this.Oo.Cr(function(){return v.__awaiter(e,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return m("RemoteStore","Retrying IndexedDB access"),[4,r()];case 1:return t.sent(),this.Rc.delete(1),[4,this.$c()];case 2:return t.sent(),[2]}})})}),[2]}})})},va.prototype.Gc=function(e){var n=this;return e().catch(function(t){return n.jc(t,e)})},va.prototype.Kc=function(r){var i=this,t=this.Ac.Ne(r);return t.Qt.forEach(function(t,e){var n;0<t.resumeToken.G()&&(n=i.Ic.get(e))&&i.Ic.set(e,n.Z(t.resumeToken,r))}),t.Wt.forEach(function(t){var e,n=i.Ic.get(t);n&&(i.Ic.set(t,n.Z(Z.H,n.J)),i.Uc(t),e=new it(n.target,t,1,n.sequenceNumber),i.Bc(e))}),this.Qc.na(t)},va.prototype.Wc=function(o){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return v.__generator(this,function(t){switch(t.label){case 0:e=o.cause,n=0,r=o.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],this.Ic.has(i)?[4,this.Qc.zc(i,e)]:[3,3]):[3,5];case 2:t.sent(),this.Ic.delete(i),this.Ac.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})},va.prototype.Mc=function(){return v.__awaiter(this,void 0,void 0,function(){var e,n,r;return v.__generator(this,function(t){switch(t.label){case 0:e=0<this.Ec.length?this.Ec[this.Ec.length-1].batchId:-1,t.label=1;case 1:if(!this.Hc())return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,this.Tc.ha(e)];case 3:return null===(n=t.sent())?(0===this.Ec.length&&this.Dc.yu(),[3,7]):(e=n.batchId,this.Yc(n),[3,6]);case 4:return r=t.sent(),[4,this.jc(r)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return this.Jc()&&this.Xc(),[2]}})})},va.prototype.Hc=function(){return this.Vc()&&this.Ec.length<10},va.prototype.Zc=function(){return this.Ec.length},va.prototype.Yc=function(t){this.Ec.push(t),this.Dc.Vu()&&this.Dc.Uu&&this.Dc.Qu(t.mutations)},va.prototype.Jc=function(){return this.Vc()&&!this.Dc.Pu()&&0<this.Ec.length},va.prototype.Xc=function(){this.Dc.start()},va.prototype.Cc=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){return this.Dc.Ku(),[2]})})},va.prototype.Nc=function(){return v.__awaiter(this,void 0,void 0,function(){var e,n,r;return v.__generator(this,function(t){for(e=0,n=this.Ec;e<n.length;e++)r=n[e],this.Dc.Qu(r.mutations);return[2]})})},va.prototype.Wu=function(i,o){return v.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return v.__generator(this,function(t){switch(t.label){case 0:return e=this.Ec.shift(),n=cr.from(e,i,o),[4,this.Gc(function(){return r.Qc.tl(n)})];case 1:return t.sent(),[4,this.Mc()];case 2:return t.sent(),[2]}})})},va.prototype.Fc=function(e){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return e&&this.Dc.Uu?[4,this.el(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.Jc()&&this.Xc(),[2]}})})},va.prototype.el=function(i){return v.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return v.__generator(this,function(t){switch(t.label){case 0:return st(n=i.code)&&n!==P.ABORTED?(e=this.Ec.shift(),this.Dc.pu(),[4,this.Gc(function(){return r.Qc.sl(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,this.Mc()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},va.prototype.nl=function(){return new fa(this.Xu)},va.prototype.gc=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.Rc.add(4),[4,this.Lc()];case 1:return t.sent(),this.pc.set("Unknown"),this.Rc.delete(4),[4,this.$c()];case 2:return t.sent(),[2]}})})},va.prototype.il=function(e){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.Oo.ah(),m("RemoteStore","RemoteStore received new credentials"),this.Rc.add(3),[4,this.Lc()];case 1:return t.sent(),this.pc.set("Unknown"),[4,this.Qc.il(e)];case 2:return t.sent(),this.Rc.delete(3),[4,this.$c()];case 3:return t.sent(),[2]}})})},va.prototype.rl=function(e){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return e?(this.Rc.delete(2),[4,this.$c()]):[3,2];case 1:return t.sent(),[3,5];case 2:return e?[3,4]:(this.Rc.add(2),[4,this.Lc()]);case 3:t.sent(),this.pc.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})},va);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(t,e,n,r,i){var o,s,a,u,c,h,l=this;this.Tc=t,this.Xu=e,this.Oo=n,this.Ec=[],this.Ic=new Map,this.Ac=null,this.Rc=new Set,this.mc=i,this.mc.Pc(function(t){n.Sr(function(){return v.__awaiter(l,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.Vc()?(m("RemoteStore","Restarting streams for network reachability change."),[4,this.gc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.pc=new pa(n,r),this.yc=(u=this.Xu,c=n,h={xu:this.bc.bind(this),Cu:this.vc.bind(this),Lu:this.Sc.bind(this)},new ca(c,u.Iu,u.credentials,u.serializer,h)),this.Dc=(o=this.Xu,s=n,a={xu:this.Cc.bind(this),Cu:this.Fc.bind(this),ju:this.Nc.bind(this),Wu:this.Wu.bind(this)},new ha(s,o.Iu,o.credentials,o.serializer,a))}function ga(t,e){this.Oo=t,this.hc=e,this.state="Unknown",this.ac=0,this.uc=null,this.cc=!0}function ya(t){this.Xu=t,this.Zu=new Map,this.mutations=[],this.tc=!1,this.ec=null,this.sc=new Set}function ma(t,e,n){var r=this;return(r=ea.call(this)||this).Iu=t,r.credentials=e,r.serializer=n,r.zu=!1,r}function _a(t,e,n,r,i){var o=this;return(o=na.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.qu=!1,o.lastStreamToken=Z.H,o}function wa(t,e,n,r,i){var o=this;return(o=ra.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function ba(t,e,n,r,i,o){this.Wn=t,this.Eu=n,this.Iu=r,this.Au=i,this.listener=o,this.state=0,this.Ru=0,this.mu=null,this.stream=null,this.Zo=new Cr(t,e)}function Ea(t,e){this.du=t,this.wu=e}function Ia(t,e){this.du=t,this.wu=e,this.type="FirstParty",this.user=$s.iu}function Ta(t){var e=this;this.cu=null,this.currentUser=$s.UNAUTHENTICATED,this.lu=!1,this._u=0,this.ou=null,this.forceRefresh=!1,this.cu=function(){e._u++,e.currentUser=e.fu(),e.lu=!0,e.ou&&e.ou(e.currentUser)},this._u=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.cu):(this.cu(null),t.get().then(function(t){e.auth=t,e.cu&&e.auth.addAuthTokenListener(e.cu)},function(){}))}function Sa(){this.ou=null}function Ca(t,e){return"firestore_clients_"+t+"_"+e}function Na(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.fo()&&(r+="_"+e.uid),r}function Aa(t,e){return"firestore_targets_"+t+"_"+e}function ka(t){this.key=t}function Oa(t){this.key=t}function Ra(t,e,n){this.query=t,this.targetId=e,this.view=n}function Pa(t){this.key=t,this.R_=!1}function Da(){this.if=void 0,this.rf=[]}var xa,La,Ma=(pu.ol=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new D(r.error.code,r.error.message)),i?new pu(t,e,r.state,o):(h("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},pu.prototype.hl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},pu),Fa=(fu.ol=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new D(n.error.code,n.error.message)),r?new fu(t,n.state,i):(h("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},fu.prototype.hl=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},fu),Ua=(lu.ol=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Tt,o=0;r&&o<n.activeTargetIds.length;++o)r=$(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new lu(t,i):(h("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},lu),ja=(hu.ol=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new hu(e.clientId,e.onlineState):(h("SharedClientState","Failed to parse online state: "+t),null)},hu),Va=(cu.prototype.al=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},cu.prototype.ul=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},cu.prototype.hl=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},cu),qa=(uu._r=function(t){return!(!t||!t.localStorage)},uu.prototype.start=function(){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f=this;return v.__generator(this,function(t){switch(t.label){case 0:return[4,this.Qc.Gr()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.cl&&(o=this.getItem(Ca(this.persistenceKey,i)))&&(s=Ua.ol(i,o))&&(this.fl=this.fl.et(s.clientId,s));for(this.ml(),(a=this.storage.getItem(this.Rl))&&(u=this.Pl(a))&&this.Vl(u),c=0,h=this.dl;c<h.length;c++)l=h[c],this._l(l);return this.dl=[],this.window.addEventListener("unload",function(){return f.Ur()}),this.pr=!0,[2]}})})},uu.prototype.Un=function(t){this.setItem(this.Tl,JSON.stringify(t))},uu.prototype.gl=function(){return this.pl(this.fl)},uu.prototype.yl=function(n){var r=!1;return this.fl.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},uu.prototype.bl=function(t){this.vl(t,"pending")},uu.prototype.Sl=function(t,e,n){this.vl(t,e,n),this.Dl(t)},uu.prototype.Cl=function(t){var e,n,r="not-current";return this.yl(t)&&(!(e=this.storage.getItem(Aa(this.persistenceKey,t)))||(n=Fa.ol(t,e))&&(r=n.state)),this.Fl.al(t),this.ml(),r},uu.prototype.Nl=function(t){this.Fl.ul(t),this.ml()},uu.prototype.$l=function(t){return this.Fl.activeTargetIds.has(t)},uu.prototype.kl=function(t){this.removeItem(Aa(this.persistenceKey,t))},uu.prototype.xl=function(t,e,n){this.Ml(t,e,n)},uu.prototype.Hh=function(t,e,n){var r=this;e.forEach(function(t){r.Dl(t)}),this.currentUser=t,n.forEach(function(t){r.bl(t)})},uu.prototype.Ll=function(t){this.Ol(t)},uu.prototype.Ur=function(){this.pr&&(this.window.removeEventListener("storage",this.ll),this.removeItem(this.wl),this.pr=!1)},uu.prototype.getItem=function(t){var e=this.storage.getItem(t);return m("SharedClientState","READ",t,e),e},uu.prototype.setItem=function(t,e){m("SharedClientState","SET",t,e),this.storage.setItem(t,e)},uu.prototype.removeItem=function(t){m("SharedClientState","REMOVE",t),this.storage.removeItem(t)},uu.prototype._l=function(t){var e=this,a=t;if(a.storageArea===this.storage){if(m("SharedClientState","EVENT",a.key,a.newValue),a.key===this.wl)return void h("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Wn.Cr(function(){return v.__awaiter(e,void 0,void 0,function(){var e,n,r,i,o,s;return v.__generator(this,function(t){if(this.pr){if(null!==a.key)if(this.El.test(a.key)){if(null==a.newValue)return e=this.Bl(a.key),[2,this.ql(e,null)];if(n=this.Ul(a.key,a.newValue))return[2,this.ql(n.clientId,n)]}else if(this.Il.test(a.key)){if(null!==a.newValue&&(r=this.Ql(a.key,a.newValue)))return[2,this.Wl(r)]}else if(this.Al.test(a.key)){if(null!==a.newValue&&(i=this.jl(a.key,a.newValue)))return[2,this.Kl(i)]}else if(a.key===this.Rl){if(null!==a.newValue&&(o=this.Pl(a.newValue)))return[2,this.Vl(o)]}else a.key===this.Tl&&(s=function(t){var e=gr.Qn;if(null!=t)try{var n=JSON.parse(t);b("number"==typeof n),e=n}catch(t){h("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(a.newValue))!==gr.Qn&&this.On(s)}else this.dl.push(a);return[2]})})})}},Object.defineProperty(uu.prototype,"Fl",{get:function(){return this.fl.get(this.cl)},enumerable:!0,configurable:!0}),uu.prototype.ml=function(){this.setItem(this.wl,this.Fl.hl())},uu.prototype.vl=function(t,e,n){var r=new Ma(this.currentUser,t,e,n),i=Na(this.persistenceKey,this.currentUser,t);this.setItem(i,r.hl())},uu.prototype.Dl=function(t){var e=Na(this.persistenceKey,this.currentUser,t);this.removeItem(e)},uu.prototype.Ol=function(t){var e={clientId:this.cl,onlineState:t};this.storage.setItem(this.Rl,JSON.stringify(e))},uu.prototype.Ml=function(t,e,n){var r=Aa(this.persistenceKey,t),i=new Fa(t,e,n);this.setItem(r,i.hl())},uu.prototype.Bl=function(t){var e=this.El.exec(t);return e?e[1]:null},uu.prototype.Ul=function(t,e){var n=this.Bl(t);return Ua.ol(n,e)},uu.prototype.Ql=function(t,e){var n=this.Il.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ma.ol(new $s(i),r,e)},uu.prototype.jl=function(t,e){var n=this.Al.exec(t),r=Number(n[1]);return Fa.ol(r,e)},uu.prototype.Pl=function(t){return ja.ol(t)},uu.prototype.Wl=function(e){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.Qc.Gl(e.batchId,e.state,e.error)]:(m("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},uu.prototype.Kl=function(t){return this.Qc.zl(t.targetId,t.state,t.error)},uu.prototype.ql=function(t,e){var n=this,r=e?this.fl.et(t,e):this.fl.remove(t),i=this.pl(this.fl),o=this.pl(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.Qc.Hl(s,a).then(function(){n.fl=r})},uu.prototype.Vl=function(t){this.fl.get(t.clientId)&&this.hc(t.onlineState)},uu.prototype.pl=function(t){var n=Tt;return t.forEach(function(t,e){n=n.Ct(e.activeTargetIds)}),n},uu),Ba=(au.prototype.bl=function(t){},au.prototype.Sl=function(t,e,n){},au.prototype.Cl=function(t){return this.Yl.al(t),this.Jl[t]||"not-current"},au.prototype.xl=function(t,e,n){this.Jl[t]=e},au.prototype.Nl=function(t){this.Yl.ul(t)},au.prototype.$l=function(t){return this.Yl.activeTargetIds.has(t)},au.prototype.kl=function(t){delete this.Jl[t]},au.prototype.gl=function(){return this.Yl.activeTargetIds},au.prototype.yl=function(t){return this.Yl.activeTargetIds.has(t)},au.prototype.start=function(){return this.Yl=new Va,Promise.resolve()},au.prototype.Hh=function(t,e,n){},au.prototype.Ll=function(t){},au.prototype.Ur=function(){},au.prototype.Un=function(t){},au),Wa=(Object.defineProperty(su.prototype,"s_",{get:function(){return this.Xl},enumerable:!0,configurable:!0}),su.prototype.n_=function(t,e){var a=this,u=e?e.i_:new kt,c=e?e.e_:this.e_,h=e?e.Ot:this.Ot,l=c,f=!1,p=this.query.ks()&&c.size===this.query.limit?c.last():null,d=this.query.xs()&&c.size===this.query.limit?c.first():null;if(t.ot(function(t,e){var n=c.get(t),r=(r=e instanceof kn?e:null)&&(a.query.matches(r)?r:null),i=!!n&&a.Ot.has(n.key),o=!!r&&(r.Xe||a.Ot.has(r.key)&&r.hasCommittedMutations),s=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),s=!0):a.r_(n,r)||(u.track({type:2,doc:r}),s=!0,(p&&0<a.query.Ds(r,p)||d&&a.query.Ds(r,d)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),s=!0):n&&!r&&(u.track({type:1,doc:n}),s=!0,(p||d)&&(f=!0)),s&&(h=r?(l=l.add(r),o?h.add(t):h.delete(t)):(l=l.delete(t),h.delete(t)))}),this.query.ks()||this.query.xs())for(;l.size>this.query.limit;){var n=this.query.ks()?l.last():l.first(),l=l.delete(n.key),h=h.delete(n.key);u.track({type:1,doc:n})}return{e_:l,i_:u,o_:f,Ot:h}},su.prototype.r_=function(t,e){return t.Xe&&e.hasCommittedMutations&&!e.Xe},su.prototype.wn=function(t,e,n){var o=this,r=this.e_;this.e_=t.e_,this.Ot=t.Ot;var i=t.i_.Mt();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.query.Ds(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return O()}}var r,i}),this.h_(n);var s=e?this.a_():[],a=0===this.t_.size&&this.Ht?1:0,u=a!==this.Zl;return this.Zl=a,0!==i.length||u?{snapshot:new Ot(this.query,t.e_,r,i,t.Ot,0==a,u,!1),u_:s}:{u_:s}},su.prototype.c_=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.wn({e_:this.e_,i_:new kt,Ot:this.Ot,o_:!1},!1)):{u_:[]}},su.prototype.l_=function(t){return!this.Xl.has(t)&&!!this.e_.has(t)&&!this.e_.get(t).Xe},su.prototype.h_=function(t){var e=this;t&&(t.Yt.forEach(function(t){return e.Xl=e.Xl.add(t)}),t.Jt.forEach(function(t){}),t.Xt.forEach(function(t){return e.Xl=e.Xl.delete(t)}),this.Ht=t.Ht)},su.prototype.a_=function(){var e=this;if(!this.Ht)return[];var n=this.t_;this.t_=It(),this.e_.forEach(function(t){e.l_(t.key)&&(e.t_=e.t_.add(t.key))});var r=[];return n.forEach(function(t){e.t_.has(t)||r.push(new Oa(t))}),this.t_.forEach(function(t){n.has(t)||r.push(new ka(t))}),r},su.prototype.__=function(t){this.Xl=t._a,this.t_=It();var e=this.n_(t.documents);return this.wn(e,!0)},su.prototype.f_=function(){return Ot.Ut(this.query,this.e_,this.Ot,0===this.Zl)},su),Ha=(ou.prototype.w_=function(){this.T_()},ou.prototype.T_=function(){var t=this;this.Zo.Zn(function(){return v.__awaiter(t,void 0,void 0,function(){var e,n,r=this;return v.__generator(this,function(t){return e=new fa(this.Xu),(n=this.E_(e))&&n.then(function(t){r.Oo.Sr(function(){return e.commit().then(function(){r.Uo.resolve(t)}).catch(function(t){r.I_(t)})})}).catch(function(t){r.I_(t)}),[2]})})})},ou.prototype.E_=function(t){try{var e=this.updateFunction(t);return!Y(e)&&e.catch&&e.then?e:(this.Uo.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Uo.reject(t),null}},ou.prototype.I_=function(t){var e=this;0<this.d_&&this.A_(t)?(--this.d_,this.Oo.Sr(function(){return e.T_(),Promise.resolve()})):this.Uo.reject(t)},ou.prototype.A_=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!st(e)},ou),Ga=(Object.defineProperty(iu.prototype,"k_",{get:function(){return!0},enumerable:!0,configurable:!0}),iu.prototype.subscribe=function(t){this.g_=t},iu.prototype.listen=function(s){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return v.__generator(this,function(t){switch(t.label){case 0:return this.x_("listen()"),(r=this.p_.get(s))?(e=r.targetId,this.P_.Cl(e),n=r.view.f_(),[3,4]):[3,1];case 1:return[4,this.Tc.ua(s.We())];case 2:return i=t.sent(),o=this.P_.Cl(i.targetId),e=i.targetId,[4,this.M_(s,e,"current"===o)];case 3:n=t.sent(),this.k_&&this.m_.listen(i),t.label=4;case 4:return[2,n]}})})},iu.prototype.M_=function(a,u,c){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s;return v.__generator(this,function(t){switch(t.label){case 0:return[4,this.Tc.la(a,!0)];case 1:return e=t.sent(),n=new Wa(a,e._a),r=n.n_(e.documents),i=Pt.zt(u,c&&"Offline"!==this.onlineState),o=n.wn(r,this.k_,i),this.L_(u,o.u_),s=new Ra(a,u,n),[2,(this.p_.set(a,s),this.y_.has(u)?this.y_.get(u).push(a):this.y_.set(u,[a]),o.snapshot)]}})})},iu.prototype.qc=function(i){return v.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return v.__generator(this,function(t){switch(t.label){case 0:return this.x_("unlisten()"),e=this.p_.get(i),1<(n=this.y_.get(e.targetId)).length?[2,(this.y_.set(e.targetId,n.filter(function(t){return!t.isEqual(i)})),void this.p_.delete(i))]:this.k_?(this.P_.Nl(e.targetId),this.P_.yl(e.targetId)?[3,2]:[4,this.Tc.ca(e.targetId,!1).then(function(){r.P_.kl(e.targetId),r.m_.qc(e.targetId),r.O_(e.targetId)}).catch(Oo)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.O_(e.targetId),[4,this.Tc.ca(e.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},iu.prototype.write=function(i,o){return v.__awaiter(this,void 0,void 0,function(){var e,n,r;return v.__generator(this,function(t){switch(t.label){case 0:this.x_("write()"),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,this.Tc.Zh(i)];case 2:return e=t.sent(),this.P_.bl(e.batchId),this.B_(e.batchId,o),[4,this.q_(e.on)];case 3:return t.sent(),[4,this.m_.Mc()];case 4:return t.sent(),[3,6];case 5:return n=t.sent(),r=po(n,"Failed to persist write"),o.reject(r),[3,6];case 6:return[2]}})})},iu.prototype.runTransaction=function(t,e,n){new Ha(t,this.Xu,e,n).w_()},iu.prototype.na=function(n){return v.__awaiter(this,void 0,void 0,function(){var e,r=this;return v.__generator(this,function(t){switch(t.label){case 0:this.x_("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Tc.na(n)];case 2:return e=t.sent(),n.Qt.forEach(function(t,e){var n=r.S_.get(e);n&&(b(t.Yt.size+t.Jt.size+t.Xt.size<=1),0<t.Yt.size?n.R_=!0:0<t.Jt.size?b(n.R_):0<t.Xt.size&&(b(n.R_),n.R_=!1))}),[4,this.q_(e,n)];case 3:return t.sent(),[3,6];case 4:return[4,Oo(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},iu.prototype.c_=function(r,t){this.x_("applyOnlineStateChange()");var i=[];this.p_.forEach(function(t,e){var n=e.view.c_(r);n.snapshot&&i.push(n.snapshot)}),this.g_.U_(r),this.g_.Lu(i),this.onlineState=r},iu.prototype.zc=function(a,u){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return v.__generator(this,function(t){switch(t.label){case 0:return this.x_("rejectListens()"),this.P_.xl(a,"rejected",u),e=this.S_.get(a),(n=e&&e.key)?(r=(r=new ut(z.P)).et(n,new On(n,L.min())),i=It().add(n),o=new Rt(L.min(),new Map,new vt(E),r,i),[4,this.na(o)]):[3,2];case 1:return t.sent(),this.v_=this.v_.remove(n),this.S_.delete(a),this.Q_(),[3,4];case 2:return[4,this.Tc.ca(a,!1).then(function(){return s.O_(a,u)}).catch(Oo)];case 3:t.sent(),t.label=4;case 4:return[2]}})})},iu.prototype.tl=function(r){return v.__awaiter(this,void 0,void 0,function(){var e,n;return v.__generator(this,function(t){switch(t.label){case 0:this.x_("applySuccessfulWrite()"),e=r.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Tc.ta(r)];case 2:return n=t.sent(),this.W_(e,null),this.j_(e),this.P_.Sl(e,"acknowledged"),[4,this.q_(n)];case 3:return t.sent(),[3,6];case 4:return[4,Oo(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},iu.prototype.sl=function(n,r){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:this.x_("rejectFailedWrite()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Tc.sa(n)];case 2:return e=t.sent(),this.W_(n,r),this.j_(n),this.P_.Sl(n,"rejected",r),[4,this.q_(e)];case 3:return t.sent(),[3,6];case 4:return[4,Oo(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},iu.prototype.K_=function(o){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return v.__generator(this,function(t){switch(t.label){case 0:this.m_.Vc()||m("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Tc.Ao()];case 2:return-1===(e=t.sent())?[2,void o.resolve()]:((n=this.F_.get(e)||[]).push(o),this.F_.set(e,n),[3,4]);case 3:return r=t.sent(),i=po(r,"Initialization of waitForPendingWrites() operation failed"),o.reject(i),[3,4];case 4:return[2]}})})},iu.prototype.j_=function(t){(this.F_.get(t)||[]).forEach(function(t){t.resolve()}),this.F_.delete(t)},iu.prototype.G_=function(e){this.F_.forEach(function(t){t.forEach(function(t){t.reject(new D(P.CANCELLED,e))})}),this.F_.clear()},iu.prototype.B_=function(t,e){var n=this.C_[this.currentUser.su()];n=(n=n||new ut(E)).et(t,e),this.C_[this.currentUser.su()]=n},iu.prototype.W_=function(t,e){var n,r=this.C_[this.currentUser.su()];r&&((n=r.get(t))&&(e?n.reject(e):n.resolve(),r=r.remove(t)),this.C_[this.currentUser.su()]=r)},iu.prototype.O_=function(t,e){var n=this;void 0===e&&(e=null),this.P_.Nl(t);for(var r=0,i=this.y_.get(t);r<i.length;r++){var o=i[r];this.p_.delete(o),e&&this.g_.z_(o,e)}this.y_.delete(t),this.k_&&this.D_.ga(t).forEach(function(t){n.D_.tr(t)||n.H_(t)})},iu.prototype.H_=function(t){var e=this.v_.get(t);null!==e&&(this.m_.qc(e),this.v_=this.v_.remove(t),this.S_.delete(e),this.Q_())},iu.prototype.L_=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof ka?(this.D_.Hi(i.key,t),this.Y_(i)):i instanceof Oa?(m("SyncEngine","Document no longer in limbo: "+i.key),this.D_.Ji(i.key,t),this.D_.tr(i.key)||this.H_(i.key)):O()}},iu.prototype.Y_=function(t){var e=t.key;this.v_.get(e)||(m("SyncEngine","New document in limbo: "+e),this.b_.push(e),this.Q_())},iu.prototype.Q_=function(){for(;0<this.b_.length&&this.v_.size<this.V_;){var t=this.b_.shift(),e=this.N_.next();this.S_.set(e,new Pa(t)),this.v_=this.v_.et(t,e),this.m_.listen(new it(Pn.As(t.path).We(),e,2,gr.Qn))}},iu.prototype.J_=function(){return this.v_},iu.prototype.X_=function(){return this.b_},iu.prototype.q_=function(r,u){return v.__awaiter(this,void 0,void 0,function(){var o,s,e,a=this;return v.__generator(this,function(t){switch(t.label){case 0:return o=[],s=[],e=[],this.p_.forEach(function(t,i){e.push(Promise.resolve().then(function(){var n=i.view.n_(r);return n.o_?a.Tc.la(i.query,!1).then(function(t){var e=t.documents;return i.view.n_(e,n)}):n}).then(function(t){var e,n=u&&u.Qt.get(i.targetId),r=i.view.wn(t,a.k_,n);a.L_(i.targetId,r.u_),r.snapshot&&(a.k_&&a.P_.xl(i.targetId,r.snapshot.fromCache?"not-current":"current"),o.push(r.snapshot),e=vr.Ln(i.targetId,r.snapshot),s.push(e))}))}),[4,Promise.all(e)];case 1:return t.sent(),this.g_.Lu(o),[4,this.Tc.oa(s)];case 2:return t.sent(),[2]}})})},iu.prototype.x_=function(t){},iu.prototype.il=function(n){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:return this.currentUser.isEqual(n)?[3,3]:(m("SyncEngine","User change. New user:",n.su()),[4,this.Tc.Hh(n)]);case 1:return e=t.sent(),this.currentUser=n,this.G_("'waitForPendingWrites' promise is rejected due to a user change."),this.P_.Hh(n,e.Jh,e.Xh),[4,this.q_(e.Yh)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},iu.prototype.enableNetwork=function(){return this.m_.enableNetwork()},iu.prototype.disableNetwork=function(){return this.m_.disableNetwork()},iu.prototype.xe=function(t){var e=this.S_.get(t);if(e&&e.R_)return It().add(e.key);var n=It(),r=this.y_.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++)var s=o[i],a=this.p_.get(s),n=n.Ct(a.view.s_);return n},iu),Qa=(xa=Ga,v.__extends(ru,xa),Object.defineProperty(ru.prototype,"k_",{get:function(){return!0===this.Z_},enumerable:!0,configurable:!0}),ru.prototype.enableNetwork=function(){return this.Tc.vr(!0),xa.prototype.enableNetwork.call(this)},ru.prototype.disableNetwork=function(){return this.Tc.vr(!1),xa.prototype.disableNetwork.call(this)},ru.prototype.tf=function(r){return v.__awaiter(this,void 0,void 0,function(){var e,n;return v.__generator(this,function(t){switch(t.label){case 0:return[4,this.Tc.la(r.query,!0)];case 1:return e=t.sent(),n=r.view.__(e),[2,(this.Z_&&this.L_(r.targetId,n.u_),n)]}})})},ru.prototype.c_=function(t,e){this.k_&&0===e&&(xa.prototype.c_.call(this,t,e),this.P_.Ll(t)),this.k_||1!==e||xa.prototype.c_.call(this,t,e)},ru.prototype.Gl=function(n,r,i){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:return this.x_("applyBatchState()"),[4,this.Tc.da(n)];case 1:return null===(e=t.sent())?[3,6]:"pending"!==r?[3,3]:[4,this.m_.Mc()];case 2:return t.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(this.W_(n,i||null),this.Tc.wa(n)):O(),t.label=4;case 4:return[4,this.q_(e)];case 5:return t.sent(),[3,7];case 6:m("SyncEngine","Cannot apply mutation batch with id: "+n),t.label=7;case 7:return[2]}})})},ru.prototype.rl=function(c){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u=this;return v.__generator(this,function(t){switch(t.label){case 0:return!0!==c||!0===this.Z_?[3,3]:(e=this.P_.gl(),[4,this.ef(e.F(),!0)]);case 1:return n=t.sent(),this.Z_=!0,[4,this.m_.rl(!0)];case 2:for(t.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.m_.listen(o);return[3,7];case 3:return!1!==c||!1===this.Z_?[3,7]:(s=[],a=Promise.resolve(),this.y_.forEach(function(t,e){u.P_.$l(e)?s.push(e):a=a.then(function(){return u.O_(e),u.Tc.ca(e,!0)}),u.m_.qc(e)}),[4,a]);case 4:return t.sent(),[4,this.ef(s,!1)];case 5:return t.sent(),this.sf(),this.Z_=!1,[4,this.m_.rl(!1)];case 6:t.sent(),t.label=7;case 7:return[2]}})})},ru.prototype.sf=function(){var n=this;this.S_.forEach(function(t,e){n.m_.qc(e)}),this.D_.pa(),this.S_=new Map,this.v_=new ut(z.P)},ru.prototype.ef=function(d,t){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f,p;return v.__generator(this,function(t){switch(t.label){case 0:e=[],n=[],r=0,i=d,t.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(a=this.y_.get(o))&&0!==a.length?[4,this.Tc.ua(a[0].We())]:[3,7]):[3,13];case 2:s=t.sent(),u=0,c=a,t.label=3;case 3:return u<c.length?(h=c[u],l=this.p_.get(h),[4,this.tf(l)]):[3,6];case 4:(f=t.sent()).snapshot&&n.push(f.snapshot),t.label=5;case 5:return u++,[3,3];case 6:return[3,11];case 7:return[4,this.Tc.Ta(o)];case 8:return p=t.sent(),[4,this.Tc.ua(p)];case 9:return s=t.sent(),[4,this.M_(this.nf(p),o,!1)];case 10:t.sent(),t.label=11;case 11:e.push(s),t.label=12;case 12:return r++,[3,1];case 13:return[2,(this.g_.Lu(n),e)]}})})},ru.prototype.nf=function(t){return new Pn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},ru.prototype.Gr=function(){return this.Tc.Gr()},ru.prototype.zl=function(r,i,o){return v.__awaiter(this,void 0,void 0,function(){var e,n;return v.__generator(this,function(t){switch(t.label){case 0:return this.Z_?(m("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.y_.has(r))return[3,8];switch(i){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Tc.Ri()];case 3:return e=t.sent(),n=Rt.Gt(r,"current"===i),[4,this.q_(e,n)];case 4:return t.sent(),[3,8];case 5:return[4,this.Tc.ca(r,!0)];case 6:return t.sent(),this.O_(r,o),[3,8];case 7:O(),t.label=8;case 8:return[2]}})})},ru.prototype.Hl=function(f,p){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return v.__generator(this,function(t){switch(t.label){case 0:if(!this.Z_)return[3,10];e=0,n=f,t.label=1;case 1:return e<n.length?(r=n[e],this.y_.has(r)?(m("SyncEngine","Adding an already active target "+r),[3,5]):[4,this.Tc.Ta(r)]):[3,6];case 2:return i=t.sent(),[4,this.Tc.ua(i)];case 3:return o=t.sent(),[4,this.M_(this.nf(i),o.targetId,!1)];case 4:t.sent(),this.m_.listen(o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return v.__generator(this,function(t){switch(t.label){case 0:return a.y_.has(e)?[4,a.Tc.ca(e,!1).then(function(){l.m_.qc(e),l.O_(e)}).catch(Oo)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=this,u=0,c=p,t.label=7;case 7:return u<c.length?(h=c[u],[5,s(h)]):[3,10];case 8:t.sent(),t.label=9;case 9:return u++,[3,7];case 10:return[2]}})})},ru),Ka=(nu.prototype.listen=function(a){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s;return v.__generator(this,function(t){switch(t.label){case 0:if(e=a.query,n=!1,(r=this.hf.get(e))||(n=!0,r=new Da),!n)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),i=r,[4,this.Qc.listen(e)];case 2:return i.if=t.sent(),[3,4];case 3:return o=t.sent(),s=po(o,"Initialization of query '"+a.query+"' failed"),[2,void a.onError(s)];case 4:return this.hf.set(e,r),r.rf.push(a),a.c_(this.onlineState),r.if&&a.uf(r.if)&&this.cf(),[2]}})})},nu.prototype.qc=function(o){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return v.__generator(this,function(t){return e=o.query,n=!1,(r=this.hf.get(e))&&0<=(i=r.rf.indexOf(o))&&(r.rf.splice(i,1),n=0===r.rf.length),n?[2,(this.hf.delete(e),this.Qc.qc(e))]:[2]})})},nu.prototype.Lu=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.hf.get(o);if(s){for(var a=0,u=s.rf;a<u.length;a++)u[a].uf(i)&&(e=!0);s.if=i}}e&&this.cf()},nu.prototype.z_=function(t,e){var n=this.hf.get(t);if(n)for(var r=0,i=n.rf;r<i.length;r++)i[r].onError(e);this.hf.delete(t)},nu.prototype.U_=function(i){this.onlineState=i;var o=!1;this.hf.forEach(function(t,e){for(var n=0,r=e.rf;n<r.length;n++)r[n].c_(i)&&(o=!0)}),o&&this.cf()},nu.prototype.lf=function(t){this.af.add(t),t.next()},nu.prototype._f=function(t){this.af.delete(t)},nu.prototype.cf=function(){this.af.forEach(function(t){t.next()})},nu),za=(eu.prototype.uf=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ot(t.query,t.docs,t.Lt,e,t.Ot,t.fromCache,t.Bt,!0)}var o=!1;return this.df?this.Tf(t)&&(this.ff.next(t),o=!0):this.Ef(t,this.onlineState)&&(this.If(t),o=!0),this.wf=t,o},eu.prototype.onError=function(t){this.ff.error(t)},eu.prototype.c_=function(t){this.onlineState=t;var e=!1;return this.wf&&!this.df&&this.Ef(this.wf,t)&&(this.If(this.wf),e=!0),e},eu.prototype.Ef=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Af&&n||t.docs._()&&"Offline"!==e)},eu.prototype.Tf=function(t){if(0<t.docChanges.length)return!0;var e=this.wf&&this.wf.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},eu.prototype.If=function(t){t=Ot.Ut(t.query,t.docs,t.Ot,t.fromCache),this.df=!0,this.ff.next(t)},eu),Xa=(tu.prototype.zh=function(t){this.Rf=t},tu.prototype.Sn=function(e,r,i,o){var s=this;return r.Ss()||i.isEqual(L.min())?this.mf(e,r):this.Rf.yn(e,o).next(function(t){var n=s.Pf(r,t);return(r.ks()||r.xs())&&s.o_(r.ws,n,o,i)?s.mf(e,r):(y()<=f.LogLevel.DEBUG&&m("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),r.toString()),s.Rf.Sn(e,r,i).next(function(e){return n.forEach(function(t){e=e.et(t.key,t)}),e}))})},tu.prototype.Pf=function(n,t){var r=new vt(function(t,e){return n.Ds(t,e)});return t.forEach(function(t,e){e instanceof kn&&n.matches(e)&&(r=r.add(e))}),r},tu.prototype.o_=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.o(r))},tu.prototype.mf=function(t,e){return y()<=f.LogLevel.DEBUG&&m("IndexFreeQueryEngine","Using full collection scan to execute query:",e.toString()),this.Rf.Sn(t,e,L.min())},tu),Ya=(Za.prototype.do=function(t){return hr.resolve(0===this.Rn.length)},Za.prototype.wo=function(t,e,n,r){var i=this.Vf;this.Vf++,0<this.Rn.length&&this.Rn[this.Rn.length-1];var o=new ur(i,e,n,r);this.Rn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.gf=this.gf.add(new Po(u.key,i)),this.mn.ri(t,u.key.path.p())}return hr.resolve(o)},Za.prototype.To=function(t,e){return hr.resolve(this.pf(e))},Za.prototype.Io=function(t,e){var n=e+1,r=this.yf(n),i=r<0?0:r;return hr.resolve(this.Rn.length>i?this.Rn[i]:null)},Za.prototype.Ao=function(){return hr.resolve(0===this.Rn.length?-1:this.Vf-1)},Za.prototype.Ro=function(t){return hr.resolve(this.Rn.slice())},Za.prototype.Vn=function(t,e){var n=this,r=new Po(e,0),i=new Po(e,Number.POSITIVE_INFINITY),o=[];return this.gf.vt([r,i],function(t){var e=n.pf(t.ba);o.push(e)}),hr.resolve(o)},Za.prototype.vn=function(t,e){var r=this,i=new vt(E);return e.forEach(function(t){var e=new Po(t,0),n=new Po(t,Number.POSITIVE_INFINITY);r.gf.vt([e,n],function(t){i=i.add(t.ba)})}),hr.resolve(this.bf(i))},Za.prototype.$n=function(t,e){var n=e.path,r=n.length+1,i=n;z.W(i)||(i=i.child(""));var o=new Po(new z(i),0),s=new vt(E);return this.gf.St(function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(s=s.add(t.ba)),!0)},o),hr.resolve(this.bf(s))},Za.prototype.bf=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.pf(t);null!==e&&r.push(e)}),r},Za.prototype.Po=function(n,r){var i=this;b(0===this.vf(r.batchId,"removed")),this.Rn.shift();var o=this.gf;return hr.forEach(r.mutations,function(t){var e=new Po(t.key,r.batchId);return o=o.delete(e),i.Fi.oo(n,t.key)}).next(function(){i.gf=o})},Za.prototype.Vo=function(t){},Za.prototype.tr=function(t,e){var n=new Po(e,0),r=this.gf.Dt(n);return hr.resolve(e.isEqual(r&&r.key))},Za.prototype.po=function(t){return this.Rn.length,hr.resolve()},Za.prototype.vf=function(t,e){return this.yf(t)},Za.prototype.yf=function(t){return 0===this.Rn.length?0:t-this.Rn[0].batchId},Za.prototype.pf=function(t){var e=this.yf(t);return e<0||e>=this.Rn.length?null:this.Rn[e]},Za),Ja=($a.prototype.un=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Sf(e);return this.docs=this.docs.et(r,{fi:e,size:s,readTime:n}),this.size+=s-o,this.mn.ri(t,r.path.p())},$a.prototype.ln=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},$a.prototype._n=function(t,e){var n=this.docs.get(e);return hr.resolve(n?n.fi:null)},$a.prototype.getEntries=function(t,e){var n=this,r=yt;return e.forEach(function(t){var e=n.docs.get(t);r=r.et(t,e?e.fi:null)}),hr.resolve(r)},$a.prototype.Sn=function(t,e,n){for(var r=wt,i=new z(e.path.child("")),o=this.docs.ut(i);o.wt();){var s=o.dt(),a=s.key,u=s.value,c=u.fi,h=u.readTime;if(!e.path.D(a.path))break;h.o(n)<=0||c instanceof kn&&e.matches(c)&&(r=r.et(c.key,c))}return hr.resolve(r)},$a.prototype.Df=function(t,e){return hr.forEach(this.docs,function(t){return e(t)})},$a.prototype.Vi=function(t){return new $a.gi(this)},$a.prototype.yi=function(t){return hr.resolve(this.size)},$a);function $a(t,e){this.mn=t,this.Sf=e,this.docs=new ut(z.P),this.size=0}function Za(t,e){this.mn=t,this.Fi=e,this.Rn=[],this.Vf=1,this.gf=new vt(Po.Ia)}function tu(){}function eu(t,e,n){this.query=t,this.ff=e,this.df=!1,this.wf=null,this.onlineState="Unknown",this.options=n||{}}function nu(t){this.Qc=t,this.hf=new R(function(t){return t.canonicalId()},function(t,e){return t.isEqual(e)}),this.onlineState="Unknown",this.af=new Set,this.Qc.subscribe(this)}function ru(t,e,n,r,i,o){var s=this;return(s=xa.call(this,t,e,n,r,i,o)||this).Tc=t,s.Z_=void 0,s}function iu(t,e,n,r,i,o){this.Tc=t,this.m_=e,this.Xu=n,this.P_=r,this.currentUser=i,this.V_=o,this.g_=null,this.p_=new R(function(t){return t.canonicalId()},function(t,e){return t.isEqual(e)}),this.y_=new Map,this.b_=[],this.v_=new ut(z.P),this.S_=new Map,this.D_=new Ro,this.C_={},this.F_=new Map,this.N_=ni.Ci(),this.onlineState="Unknown"}function ou(t,e,n,r){this.Oo=t,this.Xu=e,this.updateFunction=n,this.Uo=r,this.d_=5,this.Zo=new Cr(this.Oo,"transaction_retry")}function su(t,e){this.query=t,this.Xl=e,this.Zl=null,this.Ht=!1,this.t_=It(),this.Ot=It(),this.e_=new At(t.Ds.bind(t))}function au(){this.Yl=new Va,this.Jl={},this.Qc=null,this.hc=null,this.On=null}function uu(t,e,n,r,i){this.window=t,this.Wn=e,this.persistenceKey=n,this.cl=r,this.Qc=null,this.hc=null,this.On=null,this.ll=this._l.bind(this),this.fl=new ut(E),this.pr=!1,this.dl=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.wl=Ca(this.persistenceKey,this.cl),this.Tl="firestore_sequence_number_"+this.persistenceKey,this.fl=this.fl.et(this.cl,new Va),this.El=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Il=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Al=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Rl="firestore_online_state_"+this.persistenceKey,this.window.addEventListener("storage",this.ll)}function cu(){this.activeTargetIds=Tt}function hu(t,e){this.clientId=t,this.onlineState=e}function lu(t,e){this.clientId=t,this.activeTargetIds=e}function fu(t,e,n){this.targetId=t,this.state=e,this.error=n}function pu(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function du(t){var e=this;return(e=La.call(this)||this).bi=t,e}Ja.gi=(La=lr,v.__extends(du,La),du.prototype.wn=function(n){var r=this,i=[];return this.on.forEach(function(t,e){e?i.push(r.bi.un(n,e,r.readTime)):r.bi.ln(t)}),hr.nn(i)},du.prototype.fn=function(t,e){return this.bi._n(t,e)},du.prototype.dn=function(t,e){return this.bi.getEntries(t,e)},du);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vu,gu,yu=(Wu.prototype.ye=function(t,n){return this.Cf.forEach(function(t,e){return n(e)}),hr.resolve()},Wu.prototype.xi=function(t){return hr.resolve(this.lastRemoteSnapshotVersion)},Wu.prototype.Mi=function(t){return hr.resolve(this.Ff)},Wu.prototype.Ni=function(t){return this.highestTargetId=this.$f.next(),hr.resolve(this.highestTargetId)},Wu.prototype.Li=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ff&&(this.Ff=e),hr.resolve()},Wu.prototype.Bi=function(t){this.Cf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.$f=new ni(e),this.highestTargetId=e),t.sequenceNumber>this.Ff&&(this.Ff=t.sequenceNumber)},Wu.prototype.Oi=function(t,e){return this.Bi(e),this.targetCount+=1,hr.resolve()},Wu.prototype.Ui=function(t,e){return this.Bi(e),hr.resolve()},Wu.prototype.Qi=function(t,e){return this.Cf.delete(e.target),this.Nf.ga(e.targetId),--this.targetCount,hr.resolve()},Wu.prototype.ji=function(n,r,i){var o=this,s=0,a=[];return this.Cf.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.Cf.delete(t),a.push(o.Wi(n,e.targetId)),s++)}),hr.nn(a).next(function(){return s})},Wu.prototype.Ki=function(t){return hr.resolve(this.targetCount)},Wu.prototype.Gi=function(t,e){var n=this.Cf.get(e)||null;return hr.resolve(n)},Wu.prototype.zi=function(t,e,n){return this.Nf.ma(e,n),hr.resolve()},Wu.prototype.Yi=function(e,t,n){this.Nf.Va(t,n);var r=this.persistence.Fi,i=[];return r&&t.forEach(function(t){i.push(r.oo(e,t))}),hr.nn(i)},Wu.prototype.Wi=function(t,e){return this.Nf.ga(e),hr.resolve()},Wu.prototype.Xi=function(t,e){var n=this.Nf.ya(e);return hr.resolve(n)},Wu.prototype.tr=function(t,e){return hr.resolve(this.Nf.tr(e))},Wu),mu=(Bu.prototype.start=function(){return Promise.resolve()},Bu.prototype.Ur=function(){return this.or=!1,Promise.resolve()},Object.defineProperty(Bu.prototype,"pr",{get:function(){return this.or},enumerable:!0,configurable:!0}),Bu.prototype.yr=function(){},Bu.prototype.Xr=function(){return this.mn},Bu.prototype.zr=function(t){var e=this.kf[t.su()];return e||(e=new Ya(this.mn,this.Fi),this.kf[t.su()]=e),e},Bu.prototype.Yr=function(){return this.Tr},Bu.prototype.Jr=function(){return this.An},Bu.prototype.runTransaction=function(t,e,n){var r=this;m("MemoryPersistence","Starting transaction:",t);var i=new _u(this.rr.next());return this.Fi.Mf(),n(i).next(function(t){return r.Fi.Lf(i).next(function(){return t})}).en().then(function(t){return i.In(),t})},Bu.prototype.Of=function(e,n){return hr.rn(Object.values(this.kf).map(function(t){return function(){return t.tr(e,n)}}))},Bu),_u=(gu=pr,v.__extends(qu,gu),qu),wu=(Vu.Uf=function(t){return new Vu(t)},Object.defineProperty(Vu.prototype,"Qf",{get:function(){if(this.qf)return this.qf;throw O()},enumerable:!0,configurable:!0}),Vu.prototype.Hi=function(t,e,n){return this.Bf.Hi(n,e),this.Qf.delete(n),hr.resolve()},Vu.prototype.Ji=function(t,e,n){return this.Bf.Ji(n,e),this.Qf.add(n),hr.resolve()},Vu.prototype.oo=function(t,e){return this.Qf.add(e),hr.resolve()},Vu.prototype.removeTarget=function(t,e){var n=this;this.Bf.ga(e.targetId).forEach(function(t){return n.Qf.add(t)});var r=this.persistence.Yr();return r.Xi(t,e.targetId).next(function(t){t.forEach(function(t){return n.Qf.add(t)})}).next(function(){return r.Qi(t,e)})},Vu.prototype.Mf=function(){this.qf=new Set},Vu.prototype.Lf=function(t){var n=this,r=this.persistence.Jr().Vi();return hr.forEach(this.Qf,function(e){return n.Wf(t,e).next(function(t){t||r.ln(e)})}).next(function(){return n.qf=null,r.apply(t)})},Vu.prototype.co=function(t,e){var n=this;return this.Wf(t,e).next(function(t){t?n.Qf.delete(e):n.Qf.add(e)})},Vu.prototype.xf=function(t){return 0},Vu.prototype.Wf=function(t,e){var n=this;return hr.rn([function(){return hr.resolve(n.Bf.tr(e))},function(){return n.persistence.Yr().tr(t,e)},function(){return n.persistence.Of(t,e)}])},Vu),bu=(ju.prototype.xu=function(t){this.Gf=t},ju.prototype.Cu=function(t){this.zf=t},ju.prototype.onMessage=function(t){this.Hf=t},ju.prototype.close=function(){this.Kf()},ju.prototype.send=function(t){this.jf(t)},ju.prototype.Yf=function(){this.Gf()},ju.prototype.Jf=function(t){this.zf(t)},ju.prototype.Xf=function(t){this.Hf(t)},ju),Eu={BatchGetDocuments:"batchGet",Commit:"commit"},Iu="gl-js/ fire/"+d,Tu=(Uu.prototype.td=function(t,e){if(e)for(var n in e.ru)e.ru.hasOwnProperty(n)&&(t[n]=e.ru[n]);t["X-Goog-Api-Client"]=Iu},Uu.prototype.Yu=function(u,r,i){var c=this,h=this.ed(u);return new Promise(function(o,s){var a=new p.XhrIo;a.listenOnce(p.EventType.COMPLETE,function(){try{switch(a.getLastErrorCode()){case p.ErrorCode.NO_ERROR:var t=a.getResponseJson();m("Connection","XHR received:",JSON.stringify(t)),o(t);break;case p.ErrorCode.TIMEOUT:m("Connection",'RPC "'+u+'" timed out'),s(new D(P.DEADLINE_EXCEEDED,"Request time out"));break;case p.ErrorCode.HTTP_ERROR:var e,n,r=a.getStatus();m("Connection",'RPC "'+u+'" failed with status:',r,"response text:",a.getResponseText()),0<r?(e=a.getResponseJson().error)&&e.status&&e.message?(i=e.status.toLowerCase().replace("_","-"),n=0<=Object.values(P).indexOf(i)?i:P.UNKNOWN,s(new D(n,e.message))):s(new D(P.UNKNOWN,"Server responded with status "+a.getStatus())):(m("Connection",'RPC "'+u+'" failed'),s(new D(P.UNAVAILABLE,"Connection failed.")));break;default:O()}}finally{m("Connection",'RPC "'+u+'" completed.')}var i});var t=Object.assign({},r);delete t.database;var e=JSON.stringify(t);m("Connection","XHR sending: ",h+" "+e);var n={"Content-Type":"text/plain"};c.td(n,i),a.send(h,"POST",e,n,15)})},Uu.prototype.Ju=function(t,e,n){return this.Yu(t,e,n)},Uu.prototype.Mu=function(t,e){var n=[this.Zf,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=p.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.td(i.initMessageHeaders,e),l.isMobileCordova()||l.isReactNative()||l.isElectron()||l.isIE()||l.isUWP()||l.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function s(t,e){a.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}m("Connection","Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),u=!1,c=!1,h=new bu({jf:function(t){c?m("Connection","Not sending because WebChannel is closed:",t):(u||(m("Connection","Opening WebChannel transport."),a.open(),u=!0),m("Connection","WebChannel sending:",t),a.send(t))},Kf:function(){return a.close()}});return s(p.WebChannel.EventType.OPEN,function(){c||m("Connection","WebChannel transport opened.")}),s(p.WebChannel.EventType.CLOSE,function(){c||(c=!0,m("Connection","WebChannel transport closed"),h.Jf())}),s(p.WebChannel.EventType.ERROR,function(t){c||(c=!0,function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];g.logLevel<=f.LogLevel.WARN&&(e=n.map(_),g.warn.apply(g,v.__spreadArrays(["Firestore ("+d+"): Connection"],e)))}("Connection","WebChannel transport errored:",t),h.Jf(new D(P.UNAVAILABLE,"The operation could not be completed")))}),s(p.WebChannel.EventType.MESSAGE,function(t){var e,n,r,i,o,s;c||(b(!!(n=t.data[0])),(r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error))?(m("Connection","WebChannel received error:",r),i=r.status,o=function(){var t=nt[i];if(void 0!==t)return at(t)}(),s=r.message,void 0===o&&(o=P.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,h.Jf(new D(o,s)),a.close()):(m("Connection","WebChannel received:",n),h.Xf(n)))}),setTimeout(function(){h.Yf()},0),h},Uu.prototype.ed=function(t){var e=Eu[t];return this.Zf+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},Uu),Su=(Fu.prototype.Pc=function(t){this.hd.push(t)},Fu.prototype.Ur=function(){window.removeEventListener("online",this.sd),window.removeEventListener("offline",this.rd)},Fu.prototype.ad=function(){window.addEventListener("online",this.sd),window.addEventListener("offline",this.rd)},Fu.prototype.nd=function(){m("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.hd;t<e.length;t++)(0,e[t])(0)},Fu.prototype.od=function(){m("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.hd;t<e.length;t++)(0,e[t])(1)},Fu._r=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Fu),Cu=(Mu.prototype.Pc=function(t){},Mu.prototype.Ur=function(){},Mu),Nu="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Au=(Lu.prototype.initialize=function(n){return v.__awaiter(this,void 0,void 0,function(){var e=this;return v.__generator(this,function(t){switch(t.label){case 0:return this.P_=this.ud(n),this.persistence=this.ld(n),[4,this.persistence.start()];case 1:return t.sent(),this._d=this.fd(n),this.Tc=this.dd(n),this.m_=this.wd(n),this.Qc=this.Td(n),this.Ed=this.Id(n),this.P_.hc=function(t){return e.Qc.c_(t,1)},this.m_.Qc=this.Qc,[4,this.Tc.start()];case 2:return t.sent(),[4,this.P_.start()];case 3:return t.sent(),[4,this.m_.start()];case 4:return t.sent(),[4,this.m_.rl(this.Qc.k_)];case 5:return t.sent(),[2]}})})},Lu.prototype.Id=function(t){return new Ka(this.Qc)},Lu.prototype.fd=function(t){return null},Lu.prototype.dd=function(t){return new Io(this.persistence,new Xa,t.Ad)},Lu.prototype.ld=function(t){if(t.md.Rd)throw new D(P.FAILED_PRECONDITION,Nu);return new mu(wu.Uf)},Lu.prototype.wd=function(t){var e=this;return new da(this.Tc,t.Xu,t.Oo,function(t){return e.Qc.c_(t,0)},new(Su._r()?Su:Cu))},Lu.prototype.ud=function(t){return new Ba},Lu.prototype.Td=function(t){return new Ga(this.Tc,this.m_,t.Xu,this.P_,t.Ad,t.V_)},Lu.prototype.clearPersistence=function(t){throw new D(P.FAILED_PRECONDITION,Nu)},Lu),ku=(vu=Au,v.__extends(xu,vu),xu.prototype.initialize=function(e){return v.__awaiter(this,void 0,void 0,function(){var n=this;return v.__generator(this,function(t){switch(t.label){case 0:return[4,vu.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,this.persistence.gr(function(e){return v.__awaiter(n,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return[4,this.Qc.rl(e)];case 1:return t.sent(),this._d&&(e&&!this._d.pr?this._d.start(this.Tc):e||this._d.stop()),[2]}})})})];case 2:return t.sent(),[2]}})})},xu.prototype.dd=function(t){return new Ao(this.persistence,new Xa,t.Ad)},xu.prototype.Td=function(t){var e=new Qa(this.Tc,this.m_,t.Xu,this.P_,t.Ad,t.V_);return this.P_ instanceof qa&&(this.P_.Qc=e),e},xu.prototype.fd=function(t){var e=this.persistence.Fi.eo;return new bo(e,t.Oo)},xu.prototype.ld=function(t){var e=fi.to(t.Pd),n=Ds(t.Pd.s);return new fi(t.md.synchronizeTabs,e,t.clientId,mo.ph(t.md.cacheSizeBytes),t.Oo,uo(),"undefined"!=typeof document?document:null,n,this.P_,t.md.ir)},xu.prototype.ud=function(t){if(t.md.Rd&&t.md.synchronizeTabs){var e=uo();if(!qa._r(e))throw new D(P.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=fi.to(t.Pd);return new qa(e,t.Oo,n,t.clientId,t.Ad)}return new Ba},xu.prototype.clearPersistence=function(t){var e=fi.to(t);return fi.clearPersistence(e)},xu),Ou=(Du.prototype.start=function(e,n){var r=this;this.Hu();var i=new Sr,o=new Sr,s=!1;return this.credentials.au(function(t){return s?void r.Oo.Cr(function(){return r.m_.il(t)}):(s=!0,m("FirestoreClient","Initializing. user=",t.uid),r.Vd(e,n,t,o).then(i.resolve,i.reject))}),this.Oo.Sr(function(){return i.promise}),o.promise},Du.prototype.enableNetwork=function(){var t=this;return this.Hu(),this.Oo.enqueue(function(){return t.Qc.enableNetwork()})},Du.prototype.Vd=function(u,c,h,l){return v.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,a=this;return v.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,(s=this.Pd,Promise.resolve(new Tu(s)))];case 1:return n=t.sent(),r=Ds(this.Pd.s),e=this.credentials,i=new la(n,e,r),[4,u.initialize({Oo:this.Oo,Pd:this.Pd,Xu:i,clientId:this.clientId,Ad:h,V_:100,md:c})];case 2:return t.sent(),this.persistence=u.persistence,this.P_=u.P_,this.Tc=u.Tc,this.m_=u.m_,this.Qc=u.Qc,this._d=u._d,this.gd=u.Ed,this.persistence.yr(function(){return v.__awaiter(a,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),l.resolve(),[3,4];case 3:if(o=t.sent(),l.reject(o),!this.pd(o))throw o;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),this.Vd(new Au,{Rd:!1},h,l))];case 4:return[2]}var e})})},Du.prototype.pd=function(t){return"FirebaseError"===t.name?t.code===P.FAILED_PRECONDITION||t.code===P.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},Du.prototype.Hu=function(){if(this.Oo.eh)throw new D(P.FAILED_PRECONDITION,"The client has already been terminated.")},Du.prototype.disableNetwork=function(){var t=this;return this.Hu(),this.Oo.enqueue(function(){return t.Qc.disableNetwork()})},Du.prototype.terminate=function(){var t=this;return this.Oo.oh(function(){return v.__awaiter(t,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this._d&&this._d.stop(),[4,this.m_.Ur()];case 1:return t.sent(),[4,this.P_.Ur()];case 2:return t.sent(),[4,this.persistence.Ur()];case 3:return t.sent(),this.credentials.uu(),[2]}})})})},Du.prototype.waitForPendingWrites=function(){var t=this;this.Hu();var e=new Sr;return this.Oo.Sr(function(){return t.Qc.K_(e)}),e.promise},Du.prototype.listen=function(t,e,n){var r=this;this.Hu();var i=new za(t,e,n);return this.Oo.Sr(function(){return r.gd.listen(i)}),i},Du.prototype.qc=function(t){var e=this;this.yd||this.Oo.Sr(function(){return e.gd.qc(t)})},Du.prototype.bd=function(o){return v.__awaiter(this,void 0,void 0,function(){var i,e=this;return v.__generator(this,function(t){switch(t.label){case 0:return this.Hu(),i=new Sr,[4,this.Oo.enqueue(function(){return v.__awaiter(e,void 0,void 0,function(){var e,n,r;return v.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.Tc.aa(o)];case 1:return(e=t.sent())instanceof kn?i.resolve(e):e instanceof On?i.resolve(null):i.reject(new D(P.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return n=t.sent(),r=po(n,"Failed to get document '"+o+" from cache"),i.reject(r),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),i.promise)]}})})},Du.prototype.vd=function(u){return v.__awaiter(this,void 0,void 0,function(){var a,e=this;return v.__generator(this,function(t){switch(t.label){case 0:return this.Hu(),a=new Sr,[4,this.Oo.enqueue(function(){return v.__awaiter(e,void 0,void 0,function(){var e,n,r,i,o,s;return v.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.Tc.la(u,!0)];case 1:return e=t.sent(),n=new Wa(u,e._a),r=n.n_(e.documents),i=n.wn(r,!1),a.resolve(i.snapshot),[3,3];case 2:return o=t.sent(),s=po(o,"Failed to execute query '"+u+" against cache"),a.reject(s),[3,3];case 3:return[2]}})})})];case 1:return[2,(t.sent(),a.promise)]}})})},Du.prototype.write=function(t){var e=this;this.Hu();var n=new Sr;return this.Oo.Sr(function(){return e.Qc.write(t,n)}),n.promise},Du.prototype.s=function(){return this.Pd.s},Du.prototype.lf=function(t){var e=this;this.Hu(),this.Oo.Sr(function(){return e.gd.lf(t),Promise.resolve()})},Du.prototype._f=function(t){var e=this;this.yd||this.Oo.Sr(function(){return e.gd._f(t),Promise.resolve()})},Object.defineProperty(Du.prototype,"yd",{get:function(){return this.Oo.eh},enumerable:!0,configurable:!0}),Du.prototype.transaction=function(t){var e=this;this.Hu();var n=new Sr;return this.Oo.Sr(function(){return e.Qc.runTransaction(e.Oo,t,n),Promise.resolve()}),n.promise},Du),Ru=(Pu.prototype.next=function(t){this.Sd(this.observer.next,t)},Pu.prototype.error=function(t){this.Sd(this.observer.error,t)},Pu.prototype.Dd=function(){this.muted=!0},Pu.prototype.Sd=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},Pu);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(t){this.observer=t,this.muted=!1}function Du(t,e,n){this.Pd=t,this.credentials=e,this.Oo=n,this.clientId=s.t()}function xu(){return null!==vu&&vu.apply(this,arguments)||this}function Lu(){}function Mu(){}function Fu(){var t=this;this.sd=function(){return t.nd()},this.rd=function(){return t.od()},this.hd=[],this.ad()}function Uu(t){this.s=t.s;var e=t.ssl?"https":"http";this.Zf=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}function ju(t){this.jf=t.jf,this.Kf=t.Kf}function Vu(t){this.persistence=t,this.Bf=new Ro,this.qf=null}function qu(t){var e=this;return(e=gu.call(this)||this).sr=t,e}function Bu(t){var e=this;this.kf={},this.rr=new gr(0),this.or=!1,this.or=!0,this.Fi=t(this),this.Tr=new yu(this),this.mn=new Rr,this.An=new Ja(this.mn,function(t){return e.Fi.xf(t)})}function Wu(t){this.persistence=t,this.Cf=new R(or,sr),this.lastRemoteSnapshotVersion=L.min(),this.highestTargetId=0,this.Ff=0,this.Nf=new Ro,this.targetCount=0,this.$f=ni.Di()}function Hu(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var Gu,Qu,Ku,zu,Xu=(wc.prototype.Nd=function(t){switch(Kt(t)){case 0:return null;case 1:return t.booleanValue;case 2:return te(t.integerValue||t.doubleValue);case 3:return this.$d(t.timestampValue);case 4:return this.kd(t);case 5:return t.stringValue;case 6:return new is(ee(t.bytesValue));case 7:return this.xd(t.referenceValue);case 8:return this.Md(t.geoPointValue);case 9:return this.Ld(t.arrayValue);case 10:return this.Od(t.mapValue);default:throw O()}},wc.prototype.Od=function(t){var n=this,r={};return C(t.fields||{},function(t,e){r[t]=n.Nd(e)}),r},wc.prototype.Md=function(t){return new Ts(te(t.latitude),te(t.longitude))},wc.prototype.Ld=function(t){var e=this;return(t.values||[]).map(function(t){return e.Nd(t)})},wc.prototype.kd=function(t){switch(this.Cd){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Ht(n)?t(n):n}(t);return null==e?null:this.Nd(e);case"estimate":return this.$d(Gt(t));default:return null}},wc.prototype.$d=function(t){var e=Zt(t),n=new x(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},wc.prototype.xd=function(t){var e=F.$(t);b(xe(e));var n=new I(e.get(1),e.get(3)),r=new z(e.g(5));return n.isEqual(this.s)||h("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.Fd(r)},wc),Yu=mo.vh,Ju=(_c.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},_c),$u=(Object.defineProperty(mc.prototype,"Hd",{get:function(){return this.Yd||(this.Yd=new Bs(this.qa,this.zd.ignoreUndefinedProperties)),this.Yd},enumerable:!0,configurable:!0}),mc.prototype.settings=function(t){Mo("Firestore.settings",arguments,1),jo("Firestore.settings","object",1,t);var e=new Ju(t);if(this.Qd&&!this.zd.isEqual(e))throw new D(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.zd=e).credentials&&(this.Kd=function(t){if(!t)return new ia;switch(t.type){case"gapi":var e=t.Jd;return b(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new aa(e,t.wu||"0");case"provider":return t.Jd;default:throw new D(P.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},mc.prototype.enableNetwork=function(){return this.Ud(),this.Qd.enableNetwork()},mc.prototype.disableNetwork=function(){return this.Ud(),this.Qd.disableNetwork()},mc.prototype.enablePersistence=function(t){var e,n;if(this.Qd)throw new D(P.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&h("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new D(P.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Xd(this.Gd,{Rd:!0,cacheSizeBytes:this.zd.cacheSizeBytes,synchronizeTabs:r,ir:i})},mc.prototype.clearPersistence=function(){return v.__awaiter(this,void 0,void 0,function(){var r,e=this;return v.__generator(this,function(t){if(void 0!==this.Qd&&!this.Qd.yd)throw new D(P.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return r=new Sr,[2,(this.qd.sh(function(){return v.__awaiter(e,void 0,void 0,function(){var e,n;return v.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this.Zd(),[4,this.Gd.clearPersistence(e)];case 1:return t.sent(),r.resolve(),[3,3];case 2:return n=t.sent(),r.reject(n),[3,3];case 3:return[2]}})})}),r.promise)]})})},mc.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(mc.prototype,"tw",{get:function(){return this.Ud(),this.Qd.yd},enumerable:!0,configurable:!0}),mc.prototype.waitForPendingWrites=function(){return this.Ud(),this.Qd.waitForPendingWrites()},mc.prototype.onSnapshotsInSync=function(t){if(this.Ud(),Hu(t))return this.ew(t);jo("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.ew(e)},mc.prototype.ew=function(t){var e=this,n=new Ru({next:function(){t.next&&t.next()},error:function(t){throw O()}});return this.Qd.lf(n),function(){n.Dd(),e.Qd._f(n)}},mc.prototype.Ud=function(){return this.Qd||this.Xd(new Au,{Rd:!1}),this.Qd},mc.prototype.Zd=function(){return new w(this.qa,this.jd,this.zd.host,this.zd.ssl,this.zd.forceLongPolling)},mc.prototype.Xd=function(t,e){var n=this.Zd();return this.Qd=new Ou(n,this.Kd,this.qd),this.Qd.start(t,e)},mc.Wd=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new D(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(!n||"string"!=typeof n)throw new D(P.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new I(n)},Object.defineProperty(mc.prototype,"app",{get:function(){if(!this.Bd)throw new D(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Bd},enumerable:!0,configurable:!0}),mc.prototype.collection=function(t){return Mo("Firestore.collection",arguments,1),jo("Firestore.collection","non-empty string",1,t),this.Ud(),new ac(F.$(t),this,null)},mc.prototype.doc=function(t){return Mo("Firestore.doc",arguments,1),jo("Firestore.doc","non-empty string",1,t),this.Ud(),ec.sw(F.$(t),this,null)},mc.prototype.collectionGroup=function(t){if(Mo("Firestore.collectionGroup",arguments,1),jo("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new D(P.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Ud(),new oc(new Pn(F.k,t),this,null)},mc.prototype.runTransaction=function(e){var n=this;return Mo("Firestore.runTransaction",arguments,1),jo("Firestore.runTransaction","function",1,e),this.Ud().transaction(function(t){return e(new Zu(n,t))})},mc.prototype.batch=function(){return this.Ud(),new tc(this)},Object.defineProperty(mc,"logLevel",{get:function(){switch(y()){case f.LogLevel.DEBUG:return"debug";case f.LogLevel.ERROR:return"error";case f.LogLevel.SILENT:return"silent";case f.LogLevel.WARN:return"warn";case f.LogLevel.INFO:return"info";case f.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!0,configurable:!0}),mc.setLogLevel=function(t){Mo("Firestore.setLogLevel",arguments,1),Ho("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),g.setLogLevel(t)},mc.prototype.nw=function(){return this.zd.timestampsInSnapshots},mc),Zu=(yc.prototype.get=function(t){var n=this;Mo("Transaction.get",arguments,1);var r=Tc("Transaction.get",t,this.iw);return this.rw.nc([r.Ua]).then(function(t){if(!t||1!==t.length)return O();var e=t[0];if(e instanceof On)return new rc(n.iw,r.Ua,null,!1,!1,r.Qa);if(e instanceof kn)return new rc(n.iw,r.Ua,e,!1,!1,r.Qa);throw O()})},yc.prototype.set=function(t,e,n){Uo("Transaction.set",arguments,2,3);var r=Tc("Transaction.set",t,this.iw);n=bc("Transaction.set",n);var i=Sc(r.Qa,e,"Transaction.set"),o=i[0],s=i[1],a=this.iw.Hd.Ja(s,o,n);return this.rw.set(r.Ua,a),this},yc.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof os?(Fo("Transaction.update",arguments,3),r=Tc("Transaction.update",t,this.iw),this.iw.Hd.tu("Transaction.update",e,n,o)):(Mo("Transaction.update",arguments,2),r=Tc("Transaction.update",t,this.iw),this.iw.Hd.Za("Transaction.update",e)),this.rw.update(r.Ua,i),this},yc.prototype.delete=function(t){Mo("Transaction.delete",arguments,1);var e=Tc("Transaction.delete",t,this.iw);return this.rw.delete(e.Ua),this},yc),tc=(gc.prototype.set=function(t,e,n){Uo("WriteBatch.set",arguments,2,3),this.aw();var r=Tc("WriteBatch.set",t,this.iw);n=bc("WriteBatch.set",n);var i=Sc(r.Qa,e,"WriteBatch.set"),o=i[0],s=i[1],a=this.iw.Hd.Ja(s,o,n);return this.ow=this.ow.concat(a.Wa(r.Ua,$e.Qe())),this},gc.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.aw(),i="string"==typeof e||e instanceof os?(Fo("WriteBatch.update",arguments,3),r=Tc("WriteBatch.update",t,this.iw),this.iw.Hd.tu("WriteBatch.update",e,n,o)):(Mo("WriteBatch.update",arguments,2),r=Tc("WriteBatch.update",t,this.iw),this.iw.Hd.Za("WriteBatch.update",e)),this.ow=this.ow.concat(i.Wa(r.Ua,$e.exists(!0))),this},gc.prototype.delete=function(t){Mo("WriteBatch.delete",arguments,1),this.aw();var e=Tc("WriteBatch.delete",t,this.iw);return this.ow=this.ow.concat(new rn(e.Ua,$e.Qe())),this},gc.prototype.commit=function(){return this.aw(),this.hw=!0,0<this.ow.length?this.iw.Ud().write(this.ow):Promise.resolve()},gc.prototype.aw=function(){if(this.hw)throw new D(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},gc),ec=(zu=Ls,v.__extends(vc,zu),vc.sw=function(t,e,n){if(t.length%2!=0)throw new D(P.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.N()+" has "+t.length);return new vc(new z(t),e,n)},Object.defineProperty(vc.prototype,"id",{get:function(){return this.Ua.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(vc.prototype,"parent",{get:function(){return new ac(this.Ua.path.p(),this.firestore,this.Qa)},enumerable:!0,configurable:!0}),Object.defineProperty(vc.prototype,"path",{get:function(){return this.Ua.path.N()},enumerable:!0,configurable:!0}),vc.prototype.collection=function(t){if(Mo("DocumentReference.collection",arguments,1),jo("DocumentReference.collection","non-empty string",1,t),!t)throw new D(P.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=F.$(t);return new ac(this.Ua.path.child(e),this.firestore,null)},vc.prototype.isEqual=function(t){if(!(t instanceof vc))throw Yo("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.Ua.isEqual(t.Ua)&&this.Qa===t.Qa},vc.prototype.set=function(t,e){Uo("DocumentReference.set",arguments,1,2),e=bc("DocumentReference.set",e);var n=Sc(this.Qa,t,"DocumentReference.set"),r=n[0],i=n[1],o=this.firestore.Hd.Ja(i,r,e);return this.Qd.write(o.Wa(this.Ua,$e.Qe()))},vc.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof os?(Fo("DocumentReference.update",arguments,2),this.firestore.Hd.tu("DocumentReference.update",t,e,r)):(Mo("DocumentReference.update",arguments,1),this.firestore.Hd.Za("DocumentReference.update",t)),this.Qd.write(n.Wa(this.Ua,$e.exists(!0)))},vc.prototype.delete=function(){return Mo("DocumentReference.delete",arguments,0),this.Qd.write([new rn(this.Ua,$e.Qe())])},vc.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Uo("DocumentReference.onSnapshot",arguments,1,4);var n={includeMetadataChanges:!1},r=0;"object"!=typeof t[r]||Hu(t[r])||(Xo("DocumentReference.onSnapshot",n=t[r],["includeMetadataChanges"]),Bo("DocumentReference.onSnapshot","boolean","includeMetadataChanges",n.includeMetadataChanges),r++);var i={includeMetadataChanges:n.includeMetadataChanges},o=Hu(t[r])?t[r]:(jo("DocumentReference.onSnapshot","function",r,t[r]),Vo("DocumentReference.onSnapshot","function",r+1,t[r+1]),Vo("DocumentReference.onSnapshot","function",r+2,t[r+2]),{next:t[r],error:t[r+1],complete:t[r+2]});return this.uw(i,o)},vc.prototype.uw=function(t,n){var r=this,e=function(t){console.error("Uncaught Error in onSnapshot:",t)};n.error&&(e=n.error.bind(n));var i=new Ru({next:function(t){var e;n.next&&(e=t.docs.get(r.Ua),n.next(new rc(r.firestore,r.Ua,e,t.fromCache,t.hasPendingWrites,r.Qa)))},error:e}),o=this.Qd.listen(Pn.As(this.Ua.path),i,t);return function(){i.Dd(),r.Qd.qc(o)}},vc.prototype.get=function(n){var r=this;return Uo("DocumentReference.get",arguments,0,1),Ic("DocumentReference.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.Ud().bd(r.Ua).then(function(t){e(new rc(r.firestore,r.Ua,t,!0,t instanceof kn&&t.Xe,r.Qa))},t):r.cw(e,t,n)})},vc.prototype.cw=function(e,n,r){var i=this.uw({includeMetadataChanges:!0,Af:!0},{next:function(t){i(),!t.exists&&t.metadata.fromCache?n(new D(P.UNAVAILABLE,"Failed to get document because the client is offline.")):t.exists&&t.metadata.fromCache&&r&&"server"===r.source?n(new D(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(t)},error:n})},vc.prototype.withConverter=function(t){return new vc(this.Ua,this.firestore,t)},vc),nc=(dc.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},dc),rc=(pc.prototype.data=function(t){var e=this;if(Uo("DocumentSnapshot.data",arguments,0,1),t=Ec("DocumentSnapshot.data",t),this.lw){if(this.Qa){var n=new ic(this.iw,this.Ua,this.lw,this._w,this.fw,null);return this.Qa.fromFirestore(n,t)}return new Xu(this.iw.qa,this.iw.nw(),t.serverTimestamps||"none",function(t){return new ec(t,e.iw,null)}).Nd(this.lw.fs())}},pc.prototype.get=function(t,e){var n=this;if(Uo("DocumentSnapshot.get",arguments,1,2),e=Ec("DocumentSnapshot.get",e),this.lw){var r=this.lw.data().field(Xs("DocumentSnapshot.get",t));if(null!==r)return new Xu(this.iw.qa,this.iw.nw(),e.serverTimestamps||"none",function(t){return new ec(t,n.iw,n.Qa)}).Nd(r)}},Object.defineProperty(pc.prototype,"id",{get:function(){return this.Ua.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(pc.prototype,"ref",{get:function(){return new ec(this.Ua,this.iw,this.Qa)},enumerable:!0,configurable:!0}),Object.defineProperty(pc.prototype,"exists",{get:function(){return null!==this.lw},enumerable:!0,configurable:!0}),Object.defineProperty(pc.prototype,"metadata",{get:function(){return new nc(this.fw,this._w)},enumerable:!0,configurable:!0}),pc.prototype.isEqual=function(t){if(!(t instanceof pc))throw Yo("isEqual","DocumentSnapshot",1,t);return this.iw===t.iw&&this._w===t._w&&this.Ua.isEqual(t.Ua)&&(null===this.lw?null===t.lw:this.lw.isEqual(t.lw))&&this.Qa===t.Qa},pc),ic=(Ku=rc,v.__extends(fc,Ku),fc.prototype.data=function(t){return Ku.prototype.data.call(this,t)},fc),oc=(lc.prototype.ww=function(t,e,n){var r;if(t.L()){if("array-contains"===e||"array-contains-any"===e)throw new D(P.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.Tw(n,e);for(var i=[],o=0,s=n;o<s.length;o++){var a=s[o];i.push(this.Ew(a))}r={arrayValue:{values:i}}}else r=this.Ew(n)}else"in"!==e&&"array-contains-any"!==e||this.Tw(n,e),r=this.Hd.eu("Query.where",n,"in"===e);var u=Dn.create(t,e,r);return this.Iw(u),u},lc.prototype.Aw=function(t,e){if(null!==this.dw.startAt)throw new D(P.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.dw.endAt)throw new D(P.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new tr(t,e);return this.Rw(n),n},lc.prototype.mw=function(t,e,n){if(!e)throw new D(P.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,o=this.dw.orderBy;i<o.length;i++){var s=o[i];if(s.field.L())r.push(ne(this.qa,e.key));else{var a=e.field(s.field);if(Ht(a))throw new D(P.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.N();throw new D(P.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new jn(r,n)},lc.prototype.Pw=function(t,e,n){var r=this.dw.ds;if(e.length>r.length)throw new D(P.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.L()){if("string"!=typeof s)throw new D(P.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.dw.Bs()&&-1!==s.indexOf("/"))throw new D(P.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.dw.path.child(F.$(s));if(!z.W(a))throw new D(P.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new z(a);i.push(ne(this.qa,u))}else{var c=this.Hd.eu(t,s);i.push(c)}}return new jn(i,n)},lc.prototype.Vw=function(t){if(t.xs()&&0===t.ds.length)throw new D(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},lc.prototype.Ew=function(t){if("string"==typeof t){if(""===t)throw new D(P.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.dw.Bs()&&-1!==t.indexOf("/"))throw new D(P.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.dw.path.child(F.$(t));if(!z.W(e))throw new D(P.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return ne(this.qa,new z(e))}if(t instanceof Ls)return ne(this.qa,t.Ua);throw new D(P.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ko(t)+".")},lc.prototype.Tw=function(t,e){if(!Array.isArray(t)||0===t.length)throw new D(P.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new D(P.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new D(P.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new D(P.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},lc.prototype.Iw=function(t){if(t instanceof Dn){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=0<=e.indexOf(t.op),i=0<=n.indexOf(t.op);if(t.Ms()){var o=this.dw.Rs();if(null!==o&&!o.isEqual(t.field))throw new D(P.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.dw.ms();null!==s&&this.gw(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.dw.Ls(n)),null===a&&r&&(a=this.dw.Ls(e)),null!=a)throw a===t.op?new D(P.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new D(P.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},lc.prototype.Rw=function(t){var e;null!==this.dw.ms()||null!==(e=this.dw.Rs())&&this.gw(e,t.field)},lc.prototype.gw=function(t,e){if(!e.isEqual(t))throw new D(P.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},Qu=lc,v.__extends(hc,Qu),hc.prototype.where=function(t,e,n){Mo("Query.where",arguments,3),zo("Query.where",3,n);var r=Ho("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,e),i=Xs("Query.where",t),o=this.ww(i,r,n);return new hc(this.dw.Ps(o),this.firestore,this.Qa)},hc.prototype.orderBy=function(t,e){var n;if(Uo("Query.orderBy",arguments,1,2),Vo("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new D(P.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var r=Xs("Query.orderBy",t),i=this.Aw(r,n);return new hc(this.dw.Vs(i),this.firestore,this.Qa)},hc.prototype.limit=function(t){return Mo("Query.limit",arguments,1),jo("Query.limit","number",1,t),Jo("Query.limit",1,t),new hc(this.dw.gs(t),this.firestore,this.Qa)},hc.prototype.limitToLast=function(t){return Mo("Query.limitToLast",arguments,1),jo("Query.limitToLast","number",1,t),Jo("Query.limitToLast",1,t),new hc(this.dw.ps(t),this.firestore,this.Qa)},hc.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Fo("Query.startAt",arguments,1);var r=this.pw("Query.startAt",t,e,!0);return new hc(this.dw.ys(r),this.firestore,this.Qa)},hc.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Fo("Query.startAfter",arguments,1);var r=this.pw("Query.startAfter",t,e,!1);return new hc(this.dw.ys(r),this.firestore,this.Qa)},hc.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Fo("Query.endBefore",arguments,1);var r=this.pw("Query.endBefore",t,e,!0);return new hc(this.dw.bs(r),this.firestore,this.Qa)},hc.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Fo("Query.endAt",arguments,1);var r=this.pw("Query.endAt",t,e,!1);return new hc(this.dw.bs(r),this.firestore,this.Qa)},hc.prototype.isEqual=function(t){if(!(t instanceof hc))throw Yo("isEqual","Query",1,t);return this.firestore===t.firestore&&this.dw.isEqual(t.dw)&&this.Qa===t.Qa},hc.prototype.withConverter=function(t){return new hc(this.dw,this.firestore,t)},hc.prototype.pw=function(t,e,n,r){if(zo(t,1,e),e instanceof rc)return Mo(t,v.__spreadArrays([e],n),1),this.mw(t,e.lw,r);var i=[e].concat(n);return this.Pw(t,i,r)},hc.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Uo("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Hu(t[i])||(Xo("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),Bo("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=Hu(t[i])?t[i]:(jo("Query.onSnapshot","function",i,t[i]),Vo("Query.onSnapshot","function",i+1,t[i+1]),Vo("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.Vw(this.dw),this.uw(r,n)},hc.prototype.uw=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Ru({next:function(t){e.next&&e.next(new sc(n.firestore,n.dw,t,n.Qa))},error:r}),o=this.firestore.Ud(),s=o.listen(this.dw,i,t);return function(){i.Dd(),o.qc(s)}},hc.prototype.get=function(n){var r=this;return Uo("Query.get",arguments,0,1),Ic("Query.get",n),this.Vw(this.dw),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.Ud().vd(r.dw).then(function(t){e(new sc(r.firestore,r.dw,t,r.Qa))},t):r.cw(e,t,n)})},hc.prototype.cw=function(e,n,r){var i=this.uw({includeMetadataChanges:!0,Af:!0},{next:function(t){i(),t.metadata.fromCache&&r&&"server"===r.source?n(new D(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(t)},error:n})},hc),sc=(Object.defineProperty(cc.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(cc.prototype,"empty",{get:function(){return this.bw.docs._()},enumerable:!0,configurable:!0}),Object.defineProperty(cc.prototype,"size",{get:function(){return this.bw.docs.size},enumerable:!0,configurable:!0}),cc.prototype.forEach=function(e,n){var r=this;Uo("QuerySnapshot.forEach",arguments,1,2),jo("QuerySnapshot.forEach","function",1,e),this.bw.docs.forEach(function(t){e.call(n,r.Dw(t))})},Object.defineProperty(cc.prototype,"query",{get:function(){return new oc(this.yw,this.iw,this.Qa)},enumerable:!0,configurable:!0}),cc.prototype.docChanges=function(t){t&&(Xo("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Bo("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.bw.qt)throw new D(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.vw&&this.Sw===e||(this.vw=function(i,e,o,s){if(o.Lt._()){var n=0;return o.docChanges.map(function(t){var e=new ic(i,t.doc.key,t.doc,o.fromCache,o.Ot.has(t.doc.key),s);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var a=o.Lt;return o.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new ic(i,t.doc.key,t.doc,o.fromCache,o.Ot.has(t.doc.key),s),n=-1,r=-1;return 0!==t.type&&(n=a.indexOf(t.doc.key),a=a.delete(t.doc.key)),1!==t.type&&(r=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return O()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this.iw,e,this.bw,this.Qa),this.Sw=e),this.vw},cc.prototype.isEqual=function(t){if(!(t instanceof cc))throw Yo("isEqual","QuerySnapshot",1,t);return this.iw===t.iw&&this.yw.isEqual(t.yw)&&this.bw.isEqual(t.bw)&&this.Qa===t.Qa},cc.prototype.Dw=function(t){return new ic(this.iw,t.key,t,this.metadata.fromCache,this.bw.Ot.has(t.key),this.Qa)},cc),ac=(Gu=oc,v.__extends(uc,Gu),Object.defineProperty(uc.prototype,"id",{get:function(){return this.dw.path.S()},enumerable:!0,configurable:!0}),Object.defineProperty(uc.prototype,"parent",{get:function(){var t=this.dw.path.p();return t._()?null:new ec(new z(t),this.firestore,null)},enumerable:!0,configurable:!0}),Object.defineProperty(uc.prototype,"path",{get:function(){return this.dw.path.N()},enumerable:!0,configurable:!0}),uc.prototype.doc=function(t){Uo("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=s.t()),jo("CollectionReference.doc","non-empty string",1,t);var e=F.$(t);return ec.sw(this.dw.path.child(e),this.firestore,this.Qa)},uc.prototype.add=function(t){Mo("CollectionReference.add",arguments,1),jo("CollectionReference.add","object",1,this.Qa?this.Qa.toFirestore(t):t);var e=this.doc();return e.set(t).then(function(){return e})},uc.prototype.withConverter=function(t){return new uc(this.Cw,this.firestore,t)},uc);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t,e,n){var r=this;if(((r=Gu.call(this,Pn.As(t),e,n)||this).Cw=t).length%2!=1)throw new D(P.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.N()+" has "+t.length);return r}function cc(t,e,n,r){this.iw=t,this.yw=e,this.bw=n,this.Qa=r,this.vw=null,this.Sw=null,this.metadata=new nc(n.hasPendingWrites,n.fromCache)}function hc(t,e,n){var r=this;return(r=Qu.call(this,e.qa,e.Hd,t)||this).dw=t,r.firestore=e,r.Qa=n,r}function lc(t,e,n){this.qa=t,this.Hd=e,this.dw=n}function fc(){return null!==Ku&&Ku.apply(this,arguments)||this}function pc(t,e,n,r,i,o){this.iw=t,this.Ua=e,this.lw=n,this._w=r,this.fw=i,this.Qa=o}function dc(t,e){this.hasPendingWrites=t,this.fromCache=e}function vc(t,e,n){var r=this;return(r=zu.call(this,e.qa,t,n)||this).Ua=t,r.firestore=e,r.Qa=n,r.Qd=r.firestore.Ud(),r}function gc(t){this.iw=t,this.ow=[],this.hw=!1}function yc(t,e){this.iw=t,this.rw=e}function mc(t,e,n){var r=this;if(void 0===n&&(n=new Au),this.Bd=null,this.qd=new ho,this.INTERNAL={delete:function(){return v.__awaiter(r,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.Ud(),[4,this.Qd.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var i=t;this.Bd=i,this.qa=mc.Wd(i),this.jd=i.name,this.Kd=new oa(e)}else{var o=t;if(!o.projectId)throw new D(P.INVALID_ARGUMENT,"Must provide projectId");this.qa=new I(o.projectId,o.database),this.jd="[DEFAULT]",this.Kd=new ia}this.Gd=n,this.zd=new Ju({})}function _c(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new D(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else qo("settings","non-empty string","host",t.host),this.host=t.host,Bo("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Xo("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),Bo("settings","object","credentials",t.credentials),this.credentials=t.credentials,Bo("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),Bo("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?h("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&h("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,Bo("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=mo.Dh;else{if(t.cacheSizeBytes!==Yu&&t.cacheSizeBytes<mo.Sh)throw new D(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+mo.Sh);this.cacheSizeBytes=t.cacheSizeBytes}Bo("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}function wc(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.Cd=n,this.Fd=r}function bc(t,e){if(void 0===e)return{merge:!1};if(Xo(t,e,["merge","mergeFields"]),Bo(t,"boolean","merge",e.merge),void 0!==(n=e.mergeFields)&&function(t,e,n,r){if(!(n instanceof Array))throw new D(P.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Ko(n));for(var i=0;i<n.length;++i)if(!r(n[i]))throw new D(P.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+i+" was: "+Ko(n[i]))}(t,"mergeFields",n,function(t){return"string"==typeof t||t instanceof os}),void 0!==e.mergeFields&&void 0!==e.merge)throw new D(P.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n;return e}function Ec(t,e){return void 0===e?{}:(Xo(t,e,["serverTimestamps"]),Wo(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Ic(t,e){Vo(t,"object",1,e),e&&(Xo(t,e,["source"]),Wo(t,0,"source",e.source,["default","server","cache"]))}function Tc(t,e,n){if(e instanceof Ls){if(e.firestore!==n)throw new D(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Yo(t,"DocumentReference",1,e)}function Sc(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var Cc=["length","name"];function Nc(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new D(P.INVALID_ARGUMENT,t)}for(var r=0,i=Object.getOwnPropertyNames(t);r<i.length;r++){var o=i[r];-1===Cc.indexOf(o)&&(n[o]=t[o])}return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ac=Nc($u,"Use firebase.firestore() instead."),kc=Nc(Zu,"Use firebase.firestore().runTransaction() instead."),Oc=Nc(tc,"Use firebase.firestore().batch() instead."),Rc=Nc(ec,"Use firebase.firestore().doc() instead."),Pc=Nc(rc),Dc=Nc(ic),xc=Nc(oc),Lc=Nc(sc),Mc=Nc(ac,"Use firebase.firestore().collection() instead."),Fc=Nc(Es,"Use FieldValue.<field>() instead."),Uc=Nc(is,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),jc={Firestore:Ac,GeoPoint:Ts,Timestamp:x,Blob:Uc,Transaction:kc,WriteBatch:Oc,DocumentReference:Rc,DocumentSnapshot:Pc,Query:xc,QueryDocumentSnapshot:Dc,QuerySnapshot:Lc,CollectionReference:Mc,FieldPath:os,FieldValue:Fc,setLogLevel:$u.setLogLevel,CACHE_SIZE_UNLIMITED:Yu};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t){t.INTERNAL.registerComponent(new o.Component("firestore",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),new $u(e,n,new ku);var e,n},"PUBLIC").setServiceProps(Object.assign({},jc))),t.registerVersion("@firebase/firestore","1.15.5")}Vc(i),e.__PRIVATE_registerFirestore=Vc},ABqa:function(t,e,n){"use strict";var r,i,o=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,p=n("mrSG"),s=n("S+S0"),c={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},d=(i=Error,p.__extends(a,i),a);function a(t,e,n){var r=i.call(this,e)||this;return Object.setPrototypeOf(r,a.prototype),r.code=t,r.details=n,r}function v(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!c[a])return new d("internal","internal");r=c[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new d(r,i,o)}var u=(h.prototype.getAuthToken=function(){return p.__awaiter(this,void 0,void 0,function(){var e;return p.__generator(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},h.prototype.getInstanceIdToken=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},h.prototype.getContext=function(){return p.__awaiter(this,void 0,void 0,function(){var e,n;return p.__generator(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},h);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function l(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var f=(g.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return l(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},g.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?l(t,function(t){return e.decode(t)}):t},g);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(){}var y=(Object.defineProperty(m.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),m.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+n+"/"+t},m.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},m.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},m.prototype.postJSON=function(r,i,o){return p.__awaiter(this,void 0,void 0,function(){var e,n;return p.__generator(this,function(t){switch(t.label){case 0:o.append("Content-Type","application/json"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,fetch(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},m.prototype.call=function(h,l,f){return p.__awaiter(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c;return p.__generator(this,function(t){switch(t.label){case 0:return e=this._url(h),l=this.serializer.encode(l),r={data:l},i=new Headers,[4,this.contextProvider.getContext()];case 1:return(o=t.sent()).authToken&&i.append("Authorization","Bearer "+o.authToken),o.instanceIdToken&&i.append("Firebase-Instance-ID-Token",o.instanceIdToken),s=f.timeout||7e4,[4,Promise.race([this.postJSON(e,r,i),(n=s,new Promise(function(t,e){setTimeout(function(){e(new d("deadline-exceeded","deadline-exceeded"))},n)})),this.cancelAllRequests])];case 2:if(!(a=t.sent()))throw new d("cancelled","Firebase Functions instance was deleted.");if(u=v(a.status,a.json,this.serializer))throw u;if(!a.json)throw new d("internal","Response is not valid JSON object.");if(void 0===(c=a.json.data)&&(c=a.json.result),void 0===c)throw new d("internal","Response is missing data field.");return[2,{data:this.serializer.decode(c)}]}var n})})},m);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new f,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new u(e,n),this.cancelAllRequests=new Promise(function(t){i.deleteService=function(){return t()}})}function _(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new y(n,r,i,e)}var w;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
w={Functions:y},o.INTERNAL.registerComponent(new s.Component("functions",_,"PUBLIC").setServiceProps(w).setMultipleInstances(!0)),o.registerVersion("@firebase/functions","0.4.47")},LmZi:function(t,e,n){"use strict";n.r(e),n.d(e,"registerStorage",function(){return ge});var r=n("wj3C"),p=n.n(r),g=n("mrSG"),i=n("S+S0"),l="firebasestorage.googleapis.com",u=12e4,c=6e5,y=(o.prototype.codeProp=function(){return this.code},o.prototype.codeEquals=function(t){return s(t)===this.codeProp()},o.prototype.serverResponseProp=function(){return this.serverResponse_},o.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(o.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),o);function o(t,e){this.code_=s(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}var m={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function s(t){return"storage/"+t}function _(){return new y(m.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function w(){return new y(m.CANCELED,"User canceled the upload/download.")}function b(){return new y(m.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function f(t,e,n){return new y(m.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function E(){return new y(m.APP_DELETED,"The Firebase app was deleted.")}function h(t,e){return new y(m.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function a(t){throw new y(m.INTERNAL_ERROR,"Internal error: "+t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function v(t){switch(t){case d.RAW:case d.BASE64:case d.BASE64URL:case d.DATA_URL:return;default:throw"Expected one of the event types: ["+d.RAW+", "+d.BASE64+", "+d.BASE64URL+", "+d.DATA_URL+"]."}}var I=function(t,e){this.data=t,this.contentType=e||null};function T(t,e){switch(t){case d.RAW:return new I(S(e));case d.BASE64:case d.BASE64URL:return new I(C(t,e));case d.DATA_URL:return new I((n=new N(e)).base64?C(d.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw h(d.DATA_URL,"Malformed data URL.")}return S(e)}(n.rest),new N(e).contentType)}var n;throw _()}function S(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function C(e,t){switch(e){case d.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw h(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case d.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw h(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(t){throw h(e,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var N=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw h(d.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var A,k,O={STATE_CHANGED:"state_changed"},R="running",P="pausing",D="paused",x="success",L="canceling",M="canceled",F="error",U={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function j(t){switch(t){case R:case P:case L:return U.RUNNING;case D:return U.PAUSED;case x:return U.SUCCESS;case M:return U.CANCELED;case F:default:return U.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t){return null!=t}function q(t){return void 0!==t}function B(t){return"function"==typeof t}function W(t){return"object"==typeof t}function H(t){return"string"==typeof t||t instanceof String}function G(t){return"number"==typeof t||t instanceof Number}function Q(t){return K()&&t instanceof Blob}function K(){return"undefined"!=typeof Blob}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(k=A=A||{})[k.NO_ERROR=0]="NO_ERROR",k[k.NETWORK_ERROR=1]="NETWORK_ERROR",k[k.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var z=(X.prototype.send=function(t,e,n,r){if(this.sent_)throw a("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),V(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return V(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},X.prototype.getErrorCode=function(){if(!this.sent_)throw a("cannot .getErrorCode() before sending");return this.errorCode_},X.prototype.getStatus=function(){if(!this.sent_)throw a("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},X.prototype.getResponseText=function(){if(!this.sent_)throw a("cannot .getResponseText() before sending");return this.xhr_.responseText},X.prototype.abort=function(){this.xhr_.abort()},X.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},X.prototype.addUploadProgressListener=function(t){V(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},X.prototype.removeUploadProgressListener=function(t){V(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},X);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=A.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=A.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=A.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var Y=(J.prototype.createXhrIo=function(){return new z},J);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(){}function $(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(K())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Z=(tt.prototype.size=function(){return this.size_},tt.prototype.type=function(){return this.type_},tt.prototype.slice=function(t,e){if(Q(this.data_)){var n=this.data_,r=(o=t,s=e,(i=n).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new tt(r)}var i,o,s;return new tt(new Uint8Array(this.data_.buffer,t,e-t),!0)},tt.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(K()){var n=t.map(function(t){return t instanceof tt?t.data_:t});return new tt($.apply(null,n))}var r=t.map(function(t){return H(t)?T(d.RAW,t).data:t.data_}),i=0;r.forEach(function(t){i+=t.byteLength});var o=new Uint8Array(i),s=0;return r.forEach(function(t){for(var e=0;e<t.length;e++)o[s++]=t[e]}),new tt(o,!0)},tt.prototype.uploadData=function(){return this.data_},tt);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t,e){var n=0,r="";Q(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var et=(Object.defineProperty(nt.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(nt.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),nt.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},nt.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},nt.makeFromBucketSpec=function(e){var t,n;try{t=nt.makeFromUrl(e)}catch(t){return new nt(e,"")}if(""===t.path)return t;throw n=e,new y(m.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")},nt.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o,s=l.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],u=0;u<a.length;u++){var c=a[u],h=c.regex.exec(t);if(h){e=new nt(h[c.indices.bucket],h[c.indices.path]||""),c.postModify(e);break}}if(null==e)throw o=t,new y(m.INVALID_URL,"Invalid URL '"+o+"'.");return e},nt);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t,e){this.bucket=t,this.path_=e}function rt(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return W(n=e)&&!Array.isArray(n)?e:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t){return"https://"+l+"/v0"+t}function st(t){var e=encodeURIComponent,n="?";for(var r in t){t.hasOwnProperty(r)&&(n=n+(e(r)+"="+e(t[r]))+"&")}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t,e){return e}var ut=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||at},ct=null;function ht(){if(ct)return ct;var t=[];t.push(new ut("bucket")),t.push(new ut("generation")),t.push(new ut("metageneration")),t.push(new ut("name","fullPath",!0));var e=new ut("name");e.xform=function(t,e){return!H(n=e)||n.length<2?n:it(n);var n},t.push(e);var n=new ut("size");return n.xform=function(t,e){return V(e)?Number(e):e},t.push(n),t.push(new ut("timeCreated")),t.push(new ut("updated")),t.push(new ut("md5Hash",null,!0)),t.push(new ut("cacheControl",null,!0)),t.push(new ut("contentDisposition",null,!0)),t.push(new ut("contentEncoding",null,!0)),t.push(new ut("contentLanguage",null,!0)),t.push(new ut("contentType",null,!0)),t.push(new ut("metadata","customMetadata",!0)),ct=t}function lt(r,i){Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,n=new et(t,e);return i.makeStorageReference(n)}})}function ft(t,e,n){var r=rt(e);if(null===r)return null;return function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return lt(r,t),r}(t,r,n)}function pt(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function dt(t){if(!W(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!W(n))throw"Expected object for 'customMetadata' mapping."}else if(W(r=n)&&null!==r)throw"Mapping for '"+e+"' cannot be an object."}var r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt="maxResults",gt=1e3,yt="pageToken",mt="prefixes",_t="items";function wt(t,e,n){var r=rt(n);if(null===r)return null;return function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[mt])for(var i=0,o=n[mt];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new et(e,s));r.prefixes.push(a)}if(n[_t])for(var u=0,c=n[_t];u<c.length;u++){var h=c[u],a=t.makeStorageReference(new et(e,h.name));r.items.push(a)}return r}(t,e,r)}function bt(t){if(!W(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===vt){if(!G(n=t[vt])||!Number.isInteger(n)||t[vt]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[vt])throw"Expected maxResults to be less than or equal to "+gt+"."}else{if(e!==yt)throw"Unknown option: "+e;if(t[yt]&&!H(t[yt]))throw"Expected pageToken to be string."}var n}var Et=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){if(!t)throw _()}function Tt(r,i){return function(t,e){var n=ft(r,e,i);return It(null!==n),n}}function St(r,i){return function(t,e){var n=wt(r,i,e);return It(null!==n),n}}function Ct(r,i){return function(t,e){var n=ft(r,e,i);return It(null!==n),function(r,t){var e=rt(t);if(null===e)return null;if(!H(e.downloadTokens))return null;var n=e.downloadTokens;if(0===n.length)return null;var i=encodeURIComponent;return n.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return ot("/b/"+i(e)+"/o/"+i(n))+st({alt:"media",token:t})})[0]}(n,e)}}function Nt(o){return function(t,e){var n,r,i=401===t.getStatus()?new y(m.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(r=o.bucket,new y(m.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(n=o.path,new y(m.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")):e;return i.setServerResponseProp(e.serverResponseProp()),i}}function At(i){var o=Nt(i);return function(t,e){var n,r=o(t,e);return 404===t.getStatus()&&(n=i.path,r=new y(m.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")),r.setServerResponseProp(e.serverResponseProp()),r}}function kt(t,e,n){var r=ot(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Et(r,"GET",Tt(t,n),i);return o.errorHandler=At(e),o}function Ot(t,e,n){var r,i,o=Object.assign({},n);return o.fullPath=t.path,o.size=e.size(),o.contentType||(o.contentType=(i=e,(r=null)&&r.contentType||i&&i.type()||"application/octet-stream")),o}function Rt(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Ot(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+pt(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=Z.getBlob(c,r,h);if(null===l)throw b();var f={name:u.fullPath},p=ot(o),d=t.maxUploadRetryTime(),v=new Et(p,"POST",Tt(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=Nt(e),v}var Pt=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Dt(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){It(!1)}return It(!!n&&-1!==(e||["active"]).indexOf(n)),n}function xt(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Ot(e,r,i),a={name:s.fullPath},u=ot(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=pt(s,n),l=t.maxUploadRetryTime();var f=new Et(u,"POST",function(t){var e;Dt(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){It(!1)}return It(H(e)),e},l);return f.urlParams=a,f.headers=c,f.body=h,f.errorHandler=Nt(e),f}function Lt(t,e,n,i){var r=t.maxUploadRetryTime(),o=new Et(n,"POST",function(t){var e=Dt(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){It(!1)}n||It(!1);var r=Number(n);return It(!isNaN(r)),new Pt(r,i.size(),"final"===e)},r);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Nt(e),o}function Mt(t,s,e,a,n,u,r,i){var c=new Pt(0,0);if(r?(c.current=r.current,c.total=r.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw new y(m.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var o=c.total-c.current,h=o;0<n&&(h=Math.min(h,n));var l=c.current,f=l+h,p={"X-Goog-Upload-Command":h===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},d=a.slice(l,f);if(null===d)throw b();var v=s.maxUploadRetryTime(),g=new Et(e,"POST",function(t,e){var n=Dt(t,["active","final"]),r=c.current+h,i=a.size(),o="final"===n?Tt(s,u)(t,e):null;return new Pt(r,i,"final"===n,o)},v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=i||null,g.errorHandler=Nt(t),g}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft=function(t,e,n){var r;B(t)||V(e)||V(n)?(this.next=t,this.error=e||null,this.complete=n||null):(r=t,this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null)},Ut=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function jt(e,t,n){for(var r,i,o,s,a,u,c=t.length,h=t.length,l=0;l<t.length;l++)if(t[l].optional){c=l;break}if(!(c<=n.length&&n.length<=h))throw r=c,i=h,o=e,s=n.length,u=r===i?1===(a=r)?"argument":"arguments":(a="between "+r+" and "+i,"arguments"),new y(m.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+o+"`: Expected "+a+" "+u+", received "+s+".");for(l=0;l<n.length;l++)try{t[l].validator(n[l])}catch(t){throw t instanceof Error?f(l,e,t.message):f(l,e,t)}}var Vt=function(e,t){var n=this;this.validator=function(t){n.optional&&!q(t)||e(t)},this.optional=!!t};function qt(t,e){function n(t){if(!H(t))throw"Expected string."}var r,i,o=t?(r=n,i=t,function(t){r(t),i(t)}):n;return new Vt(o,e)}function Bt(){return new Vt(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||K()&&t instanceof Blob))throw"Expected Blob or File."})}function Wt(t){return new Vt(dt,t)}function Ht(){return new Vt(function(t){if(!(G(t)&&0<=t))throw"Expected a number 0 or greater."})}function Gt(e,t){return new Vt(function(t){if(!(null===t||V(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function Qt(t){return new Vt(function(t){if(!(null===t||B(t)))throw"Expected a Function."},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt=(Xt.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(t){return e.updateProgress_(n+t)}},Xt.prototype.shouldDoResumable_=function(t){return 262144<t.size()},Xt.prototype.start_=function(){this.state_===R&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},Xt.prototype.resolveToken_=function(e){var n=this;this.authWrapper_.getAuthToken().then(function(t){switch(n.state_){case R:e(t);break;case L:n.transition_(M);break;case P:n.transition_(D)}})},Xt.prototype.createResumable_=function(){var r=this;this.resolveToken_(function(t){var e=xt(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.uploadUrl_=t,r.needToFetchStatus_=!1,r.completeTransitions_()},r.errorHandler_)})},Xt.prototype.fetchStatus_=function(){var r=this,i=this.uploadUrl_;this.resolveToken_(function(t){var e=Lt(r.authWrapper_,r.location_,i,r.blob_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.updateProgress_(t.current),r.needToFetchStatus_=!1,t.finalized&&(r.needToFetchMetadata_=!0),r.completeTransitions_()},r.errorHandler_)})},Xt.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new Pt(this.transferred_,this.blob_.size()),s=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=Mt(r.location_,r.authWrapper_,s,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(t){return r.error_=t,void r.transition_(F)}var n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(t.current),t.finalized?(r.metadata_=t.metadata,r.transition_(x)):r.completeTransitions_()},r.errorHandler_)})},Xt.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},Xt.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(t){var e=kt(r.authWrapper_,r.location_,r.mappings_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.transition_(x)},r.metadataErrorHandler_)})},Xt.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(t){var e=Rt(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.updateProgress_(r.blob_.size()),r.transition_(x)},r.errorHandler_)})},Xt.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},Xt.prototype.transition_=function(t){if(this.state_!==t)switch(t){case L:case P:this.state_=t,null!==this.request_&&this.request_.cancel();break;case R:var e=this.state_===D;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case D:this.state_=t,this.notifyObservers_();break;case M:this.error_=w(),this.state_=t,this.notifyObservers_();break;case F:case x:this.state_=t,this.notifyObservers_()}},Xt.prototype.completeTransitions_=function(){switch(this.state_){case P:this.transition_(D);break;case L:this.transition_(M);break;case R:this.start_()}},Object.defineProperty(Xt.prototype,"snapshot",{get:function(){var t=j(this.state_);return new Ut(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),Xt.prototype.on=function(t,e,n,o){var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=Qt(!0).validator,s=Gt(null,!0).validator;function a(t){try{return void i(t)}catch(t){}try{if(s(t),!(q(t.next)||q(t.error)||q(t.complete)))throw"";return}catch(t){throw r}}jt("on",[qt(function(){if(t!==O.STATE_CHANGED)throw"Expected one of the event types: ["+O.STATE_CHANGED+"]."}),Gt(a,!0),Qt(!0),Qt(!0)],arguments);var u=this;function c(i){return function(t,e,n){null!==i&&jt("on",i,arguments);var r=new Ft(t,e,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var h=[Gt(function(t){if(null===t)throw r;a(t)}),Qt(!0),Qt(!0)];return q(e)||q(n)||q(o)?c(null)(e,n,o):c(h)},Xt.prototype.then=function(t,e){return this.promise_.then(t,e)},Xt.prototype.catch=function(t){return this.then(null,t)},Xt.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},Xt.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},Xt.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},Xt.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(j(this.state_)){case U.SUCCESS:Kt(this.resolve_.bind(null,this.snapshot))();break;case U.CANCELED:case U.ERROR:Kt(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},Xt.prototype.notifyObserver_=function(t){switch(j(this.state_)){case U.RUNNING:case U.PAUSED:t.next&&Kt(t.next.bind(t,this.snapshot))();break;case U.SUCCESS:t.complete&&Kt(t.complete.bind(t))();break;case U.CANCELED:case U.ERROR:t.error&&Kt(t.error.bind(t,this.error_))();break;default:t.error&&Kt(t.error.bind(t,this.error_))()}},Xt.prototype.resume=function(){jt("resume",[],arguments);var t=this.state_===D||this.state_===P;return t&&this.transition_(R),t},Xt.prototype.pause=function(){jt("pause",[],arguments);var t=this.state_===R;return t&&this.transition_(P),t},Xt.prototype.cancel=function(){jt("cancel",[],arguments);var t=this.state_===R||this.state_===P;return t&&this.transition_(L),t},Xt);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=R,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(m.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(F))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(m.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(F))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}var Yt=(Jt.prototype.toString=function(){return jt("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},Jt.prototype.newRef=function(t,e){return new Jt(t,e)},Jt.prototype.mappings=ht,Jt.prototype.child=function(t){jt("child",[qt()],arguments);var e,n,r=(e=this.location.path,n=t.split("/").filter(function(t){return 0<t.length}).join("/"),0===e.length?n:e+"/"+n),i=new et(this.location.bucket,r);return this.newRef(this.authWrapper,i)},Object.defineProperty(Jt.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new et(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(Jt.prototype,"root",{get:function(){var t=new et(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(Jt.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(Jt.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(Jt.prototype,"name",{get:function(){return it(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(Jt.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),Jt.prototype.put=function(t,e){return void 0===e&&(e=null),jt("put",[Bt(),Wt(!0)],arguments),this.throwIfRoot_("put"),new zt(this,this.authWrapper,this.location,this.mappings(),new Z(t),e)},Jt.prototype.putString=function(t,e,n){void 0===e&&(e=d.RAW),jt("putString",[qt(),qt(v,!0),Wt(!0)],arguments),this.throwIfRoot_("putString");var r=T(e,t),i=Object.assign({},n);return!V(i.contentType)&&V(r.contentType)&&(i.contentType=r.contentType),new zt(this,this.authWrapper,this.location,this.mappings(),new Z(r.data,!0),i)},Jt.prototype.delete=function(){var a=this;return jt("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s=(e=a.authWrapper,n=a.location,r=ot(n.fullServerUrl()),i=e.maxOperationRetryTime(),(o=new Et(r,"DELETE",function(t,e){},i)).successCodes=[200,204],o.errorHandler=At(n),o);return a.authWrapper.makeRequest(s,t).getPromise()})},Jt.prototype.listAll=function(){jt("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},Jt.prototype.listAllHelper=function(o,s){return Object(g.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(g.__generator)(this,function(t){switch(t.label){case 0:return e={pageToken:s},[4,this.list(e)];case 1:return n=t.sent(),(r=o.prefixes).push.apply(r,n.prefixes),(i=o.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(o,n.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},Jt.prototype.list=function(r){jt("list",[new Vt(bt,!0)],arguments);var i=this;return this.authWrapper.getAuthToken().then(function(t){var e=r||{},n=function(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&0<n.length&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=ot(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime(),u=new Et(s,"GET",St(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Nt(e),u}(i.authWrapper,i.location,"/",e.pageToken,e.maxResults);return i.authWrapper.makeRequest(n,t).getPromise()})},Jt.prototype.getMetadata=function(){var n=this;return jt("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(t){var e=kt(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(e,t).getPromise()})},Jt.prototype.updateMetadata=function(h){var l=this;return jt("updateMetadata",[Wt()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s,a,u,c=(e=l.authWrapper,n=l.location,r=h,i=l.mappings(),o=ot(n.fullServerUrl()),s=pt(r,i),a=e.maxOperationRetryTime(),(u=new Et(o,"PATCH",Tt(e,i),a)).headers={"Content-Type":"application/json; charset=utf-8"},u.body=s,u.errorHandler=At(n),u);return l.authWrapper.makeRequest(c,t).getPromise()})},Jt.prototype.getDownloadURL=function(){var u=this;return jt("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s,a=(e=u.authWrapper,n=u.location,r=u.mappings(),i=ot(n.fullServerUrl()),o=e.maxOperationRetryTime(),(s=new Et(i,"GET",Ct(e,r),o)).errorHandler=At(n),s);return u.authWrapper.makeRequest(a,t).getPromise().then(function(t){if(null===t)throw new y(m.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},Jt.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw e=t,new y(m.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').");var e},Jt);function Jt(t,e){this.authWrapper=t,this.location=e instanceof et?e:et.makeFromUrl(e)}var $t=(Zt.prototype.getPromise=function(){return this.promise_},Zt.prototype.cancel=function(t){},Zt);function Zt(t){this.promise_=Promise.reject(t)}var te=(ee.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then(function(){return e.map.delete(n)},function(){return e.map.delete(n)})},ee.prototype.clear=function(){this.map.forEach(function(t){t&&t.cancel(!0)}),this.map.clear()},ee);function ee(){this.map=new Map,this.id=-9007199254740991}var ne=(re.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:et.makeFromBucketSpec(e).bucket},re.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then(function(t){return null!==t?t.accessToken:null},function(){return null}):Promise.resolve(null)},re.prototype.bucket=function(){if(this.deleted_)throw E();return this.bucket_},re.prototype.service=function(){return this.service_},re.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},re.prototype.makeRequest=function(t,e){if(this.deleted_)return new $t(E());var n=this.requestMaker_(t,this.appId_,e,this.pool_);return this.requestMap_.addRequest(n),n},re.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},re.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},re.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},re.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},re.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},re);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(t,e,n,r,i,o){var s,a;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,null===this.app_||V(a=this.app_.options)&&(this.bucket_=re.extractBucket_(a),this.appId_=null!==(s=a.appId)&&void 0!==s?s:null),this.authProvider_=e,this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=u,this.maxUploadRetryTime_=c,this.requestMap_=new te}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ie=(oe.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());q(s)?r(s):r()}catch(t){i(t)}else null!==o?((n=_()).setServerResponseProp(o.getResponseText()),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?E:w)()):i(n=new y(m.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,Object(g.__spreadArrays)([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new se(!1,null,!0)):this.backoffId_=(e=function(o,t){var e;function s(t){var e=t.loaded,n=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,n)}t?o(!1,new se(!1,null,!0)):(e=c.pool_.createXhrIo(),c.pendingXhr_=e,null!==c.progressCallback_&&e.addUploadProgressListener(s),e.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(s),c.pendingXhr_=null;var e,n,r=t.getErrorCode()===A.NO_ERROR,i=t.getStatus();r&&!c.isRetryStatusCode_(i)?(e=-1!==c.successCodes_.indexOf(i),o(!0,new se(e,t))):(n=t.getErrorCode()===A.ABORT,o(!1,new se(!1,null,n)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},oe.prototype.getPromise=function(){return this.promise_},oe.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},oe.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},oe);function oe(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var se=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function ae(t,e,n,r){var i,o,s,a,u,c,h=st(t.urlParams),l=t.url+h,f=Object.assign({},t.headers);return i=f,(o=e)&&(i["X-Firebase-GMPID"]=o),s=f,null!==(a=n)&&0<a.length&&(s.Authorization="Firebase "+a),u=f,c=void 0!==p.a?p.a.SDK_VERSION:"AppManager",u["X-Firebase-Storage-Version"]="webjs/"+c,new ie(l,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue=(ce.prototype.ref=function(t){if(jt("ref",[qt(function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new Yt(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},ce.prototype.refFromURL=function(t){return jt("refFromURL",[qt(function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{et.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new Yt(this.authWrapper_,t)},Object.defineProperty(ce.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),ce.prototype.setMaxUploadRetryTime=function(t){jt("setMaxUploadRetryTime",[Ht()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},ce.prototype.setMaxOperationRetryTime=function(t){jt("setMaxOperationRetryTime",[Ht()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(ce.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(ce.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),ce);function ce(t,e,n,r){var i;this.bucket_=null,this.authWrapper_=new ne(t,e,function(t,e){return new Yt(t,e)},ae,this,n),this.app_=t,null!=r?this.bucket_=et.makeFromBucketSpec(r):null!=(i=this.authWrapper_.bucket())&&(this.bucket_=new et(i,"")),this.internals_=new he(this)}var he=(le.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},le);function le(t){this.service_=t}var fe="@firebase/storage",pe="0.3.37",de="storage";function ve(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new ue(n,r,new Y,e)}function ge(t){var e={TaskState:U,TaskEvent:O,StringFormat:d,Storage:ue,Reference:Yt};t.INTERNAL.registerComponent(new i.Component(de,ve,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(fe,pe)}ge(p.a)},NSPt:function(ci,hi,li){"use strict";(function(u){Object.defineProperty(hi,"__esModule",{value:!0});var t,e=(t=li("wj3C"))&&"object"==typeof t&&"default"in t?t.default:t,v=li("mrSG"),w=li("zVF4"),n=li("q/0M"),r=li("S+S0"),i=(o.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),w.stringify(e))},o.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:w.jsonEval(e)},o.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},o.prototype.prefixedName_=function(t){return this.prefix_+t},o.prototype.toString=function(){return this.domStorage_.toString()},o);function o(t){this.domStorage_=t,this.prefix_="firebase:"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var s=(a.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},a.prototype.get=function(t){return w.contains(this.cache_,t)?this.cache_[t]:null},a.prototype.remove=function(t){delete this.cache_[t]},a);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a(){this.cache_={},this.isInMemoryStorage=!0}function c(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new i(e)}}catch(t){}return new s}function h(t){var e=w.stringToByteArray(t),n=new w.Sha1;n.update(e);var r=n.digest();return w.base64.encodeByteArray(r)}function l(t,e){w.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(T.logLevel=n.LogLevel.VERBOSE,N=T.log.bind(T),e&&I.set("logging_enabled",!0)):"function"==typeof t?N=t:(N=null,I.remove("logging_enabled"))}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+C.apply(void 0,v.__spread(t));T.error(n)}function p(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+C.apply(void 0,v.__spread(t));throw T.error(n),new Error(n)}function g(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+C.apply(void 0,v.__spread(t));T.warn(n)}function d(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function y(t,e){return t===e?0:t<e?-1:1}function m(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+w.stringify(e))}function _(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var b,E=c("localStorage"),I=c("sessionStorage"),T=new n.Logger("@firebase/database"),S=(b=1,function(){return b++}),C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=C.apply(null,i):n+="object"==typeof i?w.stringify(i):i,n+=" "}return n},N=null,A=!0,k=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===A&&(A=!1,null===N&&!0===I.get("logging_enabled")&&l(!0)),N&&(t=C.apply(null,e),N(t))},O=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];k.apply(void 0,v.__spread([n],t))}},R="[MIN_NAME]",P="[MAX_NAME]",D=function(t,e){if(t===e)return 0;if(t===R||e===P)return-1;if(e===R||t===P)return 1;var n=V(t),r=V(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},x=function(t){if("object"!=typeof t||null===t)return w.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=w.stringify(e[i]),r+=":",r+=x(t[e[i]]);return r+="}"};function L(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function M(t){var e,n,r,i;w.assert(!d(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function F(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw g("Exception was thrown by user callback.",t),e},Math.floor(0))}}function U(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}var j=new RegExp("^-?(0*)\\d{1,10}$"),V=function(t){if(j.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},q=(Object.defineProperty(B,"Empty",{get:function(){return new B("")},enumerable:!0,configurable:!0}),B.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},B.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},B.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new B(this.pieces_,t)},B.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},B.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},B.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},B.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},B.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new B(t,0)},B.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof B)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else for(var r=t.split("/"),n=0;n<r.length;n++)0<r[n].length&&e.push(r[n]);return new B(e,0)},B.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},B.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return B.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},B.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=D(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},B.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},B.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},B);function B(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var W=(Object.defineProperty(H,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(H,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),H.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=w.stringLength(t),this.checkValid_()},H.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=w.stringLength(t),0<this.parts_.length&&--this.byteLength_},H.prototype.checkValid_=function(){if(this.byteLength_>H.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+H.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>H.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+H.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},H.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},H);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=w.stringLength(this.parts_[n]);this.checkValid_()}var G="firebaseio.com",Q="long_polling",K=(z.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},z.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},z.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},z.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},z.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&E.set("host:"+this.host,this.internalHost))},z.prototype.connectionURL=function(t,e){var n;if(w.assert("string"==typeof t,"typeof type must == string"),w.assert("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Q)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return L(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},z.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},z.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},z);function z(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=E.get("host:"+t)||this.host}function X(t){var e=at(t),n=e.namespace;"firebase.com"===e.domain&&p(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||p("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&g("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new K(e.host,e.secure,n,r,"",n!==e.subdomain),path:new q(e.pathString)}}function Y(t){return"string"==typeof t&&0!==t.length&&!ut.test(t)}function J(t){return"string"==typeof t&&0!==t.length&&!ct.test(t)}function $(t){return null===t||"string"==typeof t||"number"==typeof t&&!d(t)||t&&"object"==typeof t&&w.contains(t,".sv")}function Z(t,e,n,r,i){i&&void 0===n||lt(w.errorPrefix(t,e,i),n,r)}function tt(t,e,n,r,i){if(!i||void 0!==n){var o=w.errorPrefix(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];L(n,function(t,e){var n=new q(t);if(lt(o,e,r.child(n)),".priority"===n.getBack()&&!$(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=(n=e[r]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Y(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(q.comparePaths);var s=null;for(r=0;r<e.length;r++){if(n=e[r],null!==s&&s.contains(n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function et(t,e,n,r){if(!r||void 0!==n){if(d(n))throw new Error(w.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!$(n))throw new Error(w.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function nt(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(w.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function rt(t,e,n,r){if(!(r&&void 0===n||Y(n)))throw new Error(w.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function it(t,e,n,r){if(!(r&&void 0===n||J(n)))throw new Error(w.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function ot(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function st(t,e,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Y(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&(r=(r=i)&&r.replace(/^\/*\.info(\/|$)/,"/"),!J(r)))throw new Error(w.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var at=function(t){var e,n,r,i,o,s,a="",u="",c="",h="",l="",f=!0,p="https",d=443;return"string"==typeof t&&(0<=(i=t.indexOf("//"))&&(p=t.substring(0,i-1),t=t.substring(i+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),a=t.substring(0,Math.min(e,n)),e<n&&(h=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),r=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=v.__values(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):g("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(i=a.indexOf(":"))?(f="https"===p||"wss"===p,d=parseInt(a.substring(i+1),10)):i=a.length,"localhost"===(o=a.slice(0,i)).toLowerCase()?u="localhost":o.split(".").length<=2?u=o:(s=a.indexOf("."),c=a.substring(0,s).toLowerCase(),u=a.substring(s+1),l=c),"ns"in r&&(l=r.ns)),{host:a,port:d,domain:u,subdomain:c,secure:f,scheme:p,pathString:h,namespace:l}},ut=/[\[\].#$\/\u0000-\u001F\u007F]/,ct=/[\[\].#$\u0000-\u001F\u007F]/,ht=10485760,lt=function(n,t,e){var r=e instanceof q?new W(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(d(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>ht/3&&w.stringLength(t)>ht)throw new Error(n+"contains a string greater than "+ht+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(L(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!Y(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),lt(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ft=(pt.prototype.cancel=function(t){w.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),w.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new w.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},pt.prototype.remove=function(t){w.validateArgCount("OnDisconnect.remove",0,1,arguments.length),ot("OnDisconnect.remove",this.path_),w.validateCallback("OnDisconnect.remove",1,t,!0);var e=new w.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},pt.prototype.set=function(t,e){w.validateArgCount("OnDisconnect.set",1,2,arguments.length),ot("OnDisconnect.set",this.path_),Z("OnDisconnect.set",1,t,this.path_,!1),w.validateCallback("OnDisconnect.set",2,e,!0);var n=new w.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},pt.prototype.setWithPriority=function(t,e,n){w.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),ot("OnDisconnect.setWithPriority",this.path_),Z("OnDisconnect.setWithPriority",1,t,this.path_,!1),et("OnDisconnect.setWithPriority",2,e,!1),w.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new w.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},pt.prototype.update=function(t,e){if(w.validateArgCount("OnDisconnect.update",1,2,arguments.length),ot("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,g("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}tt("OnDisconnect.update",1,t,this.path_,!1),w.validateCallback("OnDisconnect.update",2,e,!0);var i=new w.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},pt);function pt(t,e){this.repo_=t,this.path_=e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dt=(vt.prototype.toJSON=function(){return w.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},vt);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t,e){this.committed=t,this.snapshot=e}var gt,yt,mt,_t=(gt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",yt=0,mt=[],function(t){var e=t===yt;yt=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=gt.charAt(t%64),t=Math.floor(t/64);w.assert(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===mt[r];r--)mt[r]=0;mt[r]++}else for(r=0;r<12;r++)mt[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=gt.charAt(mt[r]);return w.assert(20===i.length,"nextPushId: Length should be 20."),i}),wt=(bt.Wrap=function(t,e){return new bt(t,e)},bt);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,e){this.name=t,this.node=e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Et,It=(Tt.prototype.getCompare=function(){return this.compare.bind(this)},Tt.prototype.indexedValueChanged=function(t,e){var n=new wt(R,t),r=new wt(R,e);return 0!==this.compare(n,r)},Tt.prototype.minPost=function(){return wt.MIN},Tt);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){}var St,Ct=(St=It,v.__extends(Nt,St),Object.defineProperty(Nt,"__EMPTY_NODE",{get:function(){return Et},set:function(t){Et=t},enumerable:!0,configurable:!0}),Nt.prototype.compare=function(t,e){return D(t.name,e.name)},Nt.prototype.isDefinedOn=function(t){throw w.assertionError("KeyIndex.isDefinedOn not expected to be called.")},Nt.prototype.indexedValueChanged=function(t,e){return!1},Nt.prototype.minPost=function(){return wt.MIN},Nt.prototype.maxPost=function(){return new wt(P,Et)},Nt.prototype.makePost=function(t,e){return w.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new wt(t,Et)},Nt.prototype.toString=function(){return".key"},Nt);function Nt(){return null!==St&&St.apply(this,arguments)||this}var At,kt=new Ct;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t){return"number"==typeof t?"number:"+M(t):"string:"+t}var Rt,Pt,Dt,xt,Lt=function(t){var e;t.isLeafNode()?(e=t.val(),w.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&w.contains(e,".sv"),"Priority must be a string or number.")):w.assert(t===At||t.isEmpty(),"priority of unexpected type."),w.assert(t===At||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Mt=(Object.defineProperty(Ft,"__childrenNodeConstructor",{get:function(){return Rt},set:function(t){Rt=t},enumerable:!0,configurable:!0}),Ft.prototype.isLeafNode=function(){return!0},Ft.prototype.getPriority=function(){return this.priorityNode_},Ft.prototype.updatePriority=function(t){return new Ft(this.value_,t)},Ft.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Ft.__childrenNodeConstructor.EMPTY_NODE},Ft.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:Ft.__childrenNodeConstructor.EMPTY_NODE},Ft.prototype.hasChild=function(){return!1},Ft.prototype.getPredecessorChildName=function(t,e){return null},Ft.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Ft.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Ft.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(w.assert(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,Ft.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},Ft.prototype.isEmpty=function(){return!1},Ft.prototype.numChildren=function(){return 0},Ft.prototype.forEachChild=function(t,e){return!1},Ft.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Ft.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+Ot(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?M(this.value_):this.value_,this.lazyHash_=h(t)),this.lazyHash_},Ft.prototype.getValue=function(){return this.value_},Ft.prototype.compareTo=function(t){return t===Ft.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Ft.__childrenNodeConstructor?-1:(w.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Ft.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Ft.VALUE_TYPE_ORDER.indexOf(e),i=Ft.VALUE_TYPE_ORDER.indexOf(n);return w.assert(0<=r,"Unknown leaf type: "+e),w.assert(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Ft.prototype.withIndex=function(){return this},Ft.prototype.isIndexed=function(){return!0},Ft.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},Ft.VALUE_TYPE_ORDER=["object","boolean","number","string"],Ft);function Ft(t,e){void 0===e&&(e=Ft.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,w.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Lt(this.priorityNode_)}function Ut(){return null!==xt&&xt.apply(this,arguments)||this}var jt=new(xt=It,v.__extends(Ut,xt),Ut.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?D(t.name,e.name):i},Ut.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Ut.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Ut.prototype.minPost=function(){return wt.MIN},Ut.prototype.maxPost=function(){return new wt(P,new Mt("[PRIORITY-POST]",Dt))},Ut.prototype.makePost=function(t,e){var n=Pt(t);return new wt(e,new Mt("[PRIORITY-POST]",n))},Ut.prototype.toString=function(){return".priority"},Ut),Vt=(qt.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},qt.prototype.hasNext=function(){return 0<this.nodeStack_.length},qt.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},qt);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var Bt=(Wt.prototype.copy=function(t,e,n,r,i){return new Wt(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Wt.prototype.count=function(){return this.left.count()+1+this.right.count()},Wt.prototype.isEmpty=function(){return!1},Wt.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Wt.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Wt.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Wt.prototype.minKey=function(){return this.min_().key},Wt.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Wt.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Wt.prototype.removeMin_=function(){if(this.left.isEmpty())return Qt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Wt.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return Qt.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},Wt.prototype.isRed_=function(){return this.color},Wt.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Wt.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Wt.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Wt.prototype.rotateLeft_=function(){var t=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Wt.prototype.rotateRight_=function(){var t=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Wt.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Wt.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Wt.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Wt.RED=!0,Wt.BLACK=!1,Wt);function Wt(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Wt.RED,this.left=null!=r?r:Qt.EMPTY_NODE,this.right=null!=i?i:Qt.EMPTY_NODE}var Ht=(Gt.prototype.copy=function(t,e,n,r,i){return this},Gt.prototype.insert=function(t,e,n){return new Bt(t,e,null)},Gt.prototype.remove=function(t,e){return this},Gt.prototype.count=function(){return 0},Gt.prototype.isEmpty=function(){return!0},Gt.prototype.inorderTraversal=function(t){return!1},Gt.prototype.reverseTraversal=function(t){return!1},Gt.prototype.minKey=function(){return null},Gt.prototype.maxKey=function(){return null},Gt.prototype.check_=function(){return 0},Gt.prototype.isRed_=function(){return!1},Gt);function Gt(){}var Qt=(Kt.prototype.insert=function(t,e){return new Kt(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Bt.BLACK,null,null))},Kt.prototype.remove=function(t){return new Kt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Bt.BLACK,null,null))},Kt.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Kt.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Kt.prototype.isEmpty=function(){return this.root_.isEmpty()},Kt.prototype.count=function(){return this.root_.count()},Kt.prototype.minKey=function(){return this.root_.minKey()},Kt.prototype.maxKey=function(){return this.root_.maxKey()},Kt.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Kt.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Kt.prototype.getIterator=function(t){return new Vt(this.root_,null,this.comparator_,!1,t)},Kt.prototype.getIteratorFrom=function(t,e){return new Vt(this.root_,t,this.comparator_,!1,e)},Kt.prototype.getReverseIteratorFrom=function(t,e){return new Vt(this.root_,t,this.comparator_,!0,e)},Kt.prototype.getReverseIterator=function(t){return new Vt(this.root_,null,this.comparator_,!0,t)},Kt.EMPTY_NODE=new Ht,Kt);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t,e){void 0===e&&(e=Kt.EMPTY_NODE),this.comparator_=t,this.root_=e}var zt=Math.log(2),Xt=(Yt.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Yt);function Yt(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/zt,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Jt,$t,Zt=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return s=c[t],a=h?h(s):s,new Bt(a,s.node,Bt.BLACK,null,null);var r=parseInt(n/2,10)+t,i=l(t,r),o=l(r+1,e),s=c[r],a=h?h(s):s;return new Bt(a,s.node,Bt.BLACK,i,o)},n=function(t){for(var e=null,n=null,a=c.length,r=function(t,e){var n=a-t,r=a;a-=t;var i=l(1+n,r),o=c[n],s=h?h(o):o;u(new Bt(s,o.node,e,null,i))},u=function(t){e=e?e.left=t:n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),s=Math.pow(2,t.count-(i+1));o?r(s,Bt.BLACK):(r(s,Bt.BLACK),r(s,Bt.RED))}return n}(new Xt(c.length));return new Qt(e||t,n)},te={},ee=(Object.defineProperty(ne,"Default",{get:function(){return w.assert(jt,"ChildrenNode.ts has not been loaded"),Jt=Jt||new ne({".priority":te},{".priority":jt})},enumerable:!0,configurable:!0}),ne.prototype.get=function(t){var e=w.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Qt?e:null},ne.prototype.hasIndex=function(t){return w.contains(this.indexSet_,t.toString())},ne.prototype.addIndex=function(t,e){w.assert(t!==kt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(wt.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Zt(r,t.getCompare()):te;var a=t.toString(),u=v.__assign({},this.indexSet_);u[a]=t;var c=v.__assign({},this.indexes_);return c[a]=n,new ne(c,u)},ne.prototype.addToIndexes=function(u,c){var h=this;return new ne(w.map(this.indexes_,function(t,e){var n=w.safeGet(h.indexSet_,e);if(w.assert(n,"Missing index implementation for "+e),t===te){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator(wt.Wrap),o=i.getNext();o;)o.name!==u.name&&r.push(o),o=i.getNext();return r.push(u),Zt(r,n.getCompare())}return te}var s=c.get(u.name),a=t;return s&&(a=a.remove(new wt(u.name,s))),a.insert(u,u.node)}),this.indexSet_)},ne.prototype.removeFromIndexes=function(n,r){return new ne(w.map(this.indexes_,function(t){if(t===te)return t;var e=r.get(n.name);return e?t.remove(new wt(n.name,e)):t}),this.indexSet_)},ne);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e){this.indexes_=t,this.indexSet_=e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function re(t,e){return D(t.name,e.name)}function ie(t,e){return D(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe,se=(Object.defineProperty(ae,"EMPTY_NODE",{get:function(){return $t=$t||new ae(new Qt(ie),null,ee.Default)},enumerable:!0,configurable:!0}),ae.prototype.isLeafNode=function(){return!1},ae.prototype.getPriority=function(){return this.priorityNode_||$t},ae.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new ae(this.children_,t,this.indexMap_)},ae.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?$t:e},ae.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},ae.prototype.hasChild=function(t){return null!==this.children_.get(t)},ae.prototype.updateImmediateChild=function(t,e){if(w.assert(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new wt(t,e),r=void 0,i=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),o=r.isEmpty()?$t:this.priorityNode_;return new ae(r,o,i)},ae.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;w.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},ae.prototype.isEmpty=function(){return this.children_.isEmpty()},ae.prototype.numChildren=function(){return this.children_.count()},ae.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(jt,function(t,e){r[t]=e.val(n),i++,s&&ae.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t=[];for(var e in r)t[e]=r[e];return t}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},ae.prototype.hash=function(){var r;return null===this.lazyHash_&&(r="",this.getPriority().isEmpty()||(r+="priority:"+Ot(this.getPriority().val())+":"),this.forEachChild(jt,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":h(r)),this.lazyHash_},ae.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new wt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},ae.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},ae.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new wt(e,this.children_.get(e)):null},ae.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},ae.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new wt(e,this.children_.get(e)):null},ae.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},ae.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},ae.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,wt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},ae.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},ae.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,wt.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},ae.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ce?-1:0},ae.prototype.withIndex=function(t){if(t===kt||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new ae(this.children_,this.priorityNode_,e)},ae.prototype.isIndexed=function(t){return t===kt||this.indexMap_.hasIndex(t)},ae.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(jt),r=e.getIterator(jt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},ae.prototype.resolveIndex_=function(t){return t===kt?null:this.indexMap_.get(t.toString())},ae.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,ae);function ae(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Lt(this.priorityNode_),this.children_.isEmpty()&&w.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function ue(){return oe.call(this,new Qt(ie),se.EMPTY_NODE,ee.Default)||this}var ce=new(oe=se,v.__extends(ue,oe),ue.prototype.compareTo=function(t){return t===this?0:1},ue.prototype.equals=function(t){return t===this},ue.prototype.getPriority=function(){return this},ue.prototype.getImmediateChild=function(t){return se.EMPTY_NODE},ue.prototype.isEmpty=function(){return!1},ue);Object.defineProperties(wt,{MIN:{value:new wt(R,se.EMPTY_NODE)},MAX:{value:new wt(P,ce)}}),Ct.__EMPTY_NODE=se.EMPTY_NODE,Mt.__childrenNodeConstructor=se,At=ce,Dt=ce;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var he,le=!0;function fe(r,t){if(void 0===t&&(t=null),null===r)return se.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),w.assert(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new Mt(r,fe(t));if(r instanceof Array||!le){var i=se.EMPTY_NODE;return L(r,function(t,e){var n;w.contains(r,t)&&"."!==t.substring(0,1)&&(!(n=fe(e)).isLeafNode()&&n.isEmpty()||(i=i.updateImmediateChild(t,n)))}),i.updatePriority(fe(t))}var o=[],s=!1;if(L(r,function(t,e){var n;"."!==t.substring(0,1)&&((n=fe(e)).isEmpty()||(s=s||!n.getPriority().isEmpty(),o.push(new wt(t,n))))}),0===o.length)return se.EMPTY_NODE;var e=Zt(o,re,function(t){return t.name},ie);if(s){var n=Zt(o,jt.getCompare());return new se(e,fe(t),new ee({".priority":n},{".priority":jt}))}return new se(e,fe(t),ee.Default)}function pe(){return null!==he&&he.apply(this,arguments)||this}Pt=fe;var de,ve=new(he=It,v.__extends(pe,he),pe.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?D(t.name,e.name):n},pe.prototype.isDefinedOn=function(t){return!0},pe.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},pe.prototype.minPost=function(){return wt.MIN},pe.prototype.maxPost=function(){return wt.MAX},pe.prototype.makePost=function(t,e){var n=fe(t);return new wt(e,n)},pe.prototype.toString=function(){return".value"},pe),ge=(de=It,v.__extends(ye,de),ye.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},ye.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},ye.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?D(t.name,e.name):i},ye.prototype.makePost=function(t,e){var n=fe(t),r=se.EMPTY_NODE.updateChild(this.indexPath_,n);return new wt(e,r)},ye.prototype.maxPost=function(){var t=se.EMPTY_NODE.updateChild(this.indexPath_,ce);return new wt(P,t)},ye.prototype.toString=function(){return this.indexPath_.slice().join("/")},ye);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t){var e=de.call(this)||this;return e.indexPath_=t,w.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var me=(_e.prototype.val=function(){return w.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},_e.prototype.exportVal=function(){return w.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},_e.prototype.toJSON=function(){return w.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},_e.prototype.exists=function(){return w.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},_e.prototype.child=function(t){w.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),it("DataSnapshot.child",1,t,!1);var e=new q(t),n=this.ref_.child(e);return new _e(this.node_.getChild(e),n,jt)},_e.prototype.hasChild=function(t){w.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),it("DataSnapshot.hasChild",1,t,!1);var e=new q(t);return!this.node_.getChild(e).isEmpty()},_e.prototype.getPriority=function(){return w.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},_e.prototype.forEach=function(n){var r=this;return w.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),w.validateCallback("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new _e(e,r.ref_.child(t),jt))})},_e.prototype.hasChildren=function(){return w.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(_e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),_e.prototype.numChildren=function(){return w.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},_e.prototype.getRef=function(){return w.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(_e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),_e);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var we=(be.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},be.prototype.getEventType=function(){return this.eventType},be.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},be.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+w.stringify(this.snapshot.exportVal())},be);function be(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var Ee=(Ie.prototype.getPath=function(){return this.path},Ie.prototype.getEventType=function(){return"cancel"},Ie.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Ie.prototype.toString=function(){return this.path.toString()+":cancel"},Ie);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var Te=(Se.prototype.respondsTo=function(t){return"value"===t},Se.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new we("value",this,new me(t.snapshotNode,e.getRef(),n))},Se.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){w.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},Se.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ee(this,t,e):null},Se.prototype.matches=function(t){return t instanceof Se&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},Se.prototype.hasAnyCallback=function(){return null!==this.callback_},Se);function Se(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var Ce,Ne=(Ae.prototype.respondsTo=function(t){var e="children_removed"===(e="children_added"===t?"child_added":t)?"child_removed":e;return w.contains(this.callbacks_,e)},Ae.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ee(this,t,e):null},Ae.prototype.createEvent=function(t,e){w.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new we(t.type,this,new me(t.snapshotNode,n,r),t.prevName)},Ae.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){w.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},Ae.prototype.matches=function(e){var n=this;if(e instanceof Ae){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});var o=t[0],s=r[0];return!(s!==o||e.callbacks_[o]&&this.callbacks_[s]&&e.callbacks_[o]!==this.callbacks_[s])}}}return!1},Ae.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Ae);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var ke=(Object.defineProperty(Oe,"__referenceConstructor",{get:function(){return w.assert(Ce,"Reference.ts has not been loaded"),Ce},set:function(t){Ce=t},enumerable:!0,configurable:!0}),Oe.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===kt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==R)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==P)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===jt){if(null!=e&&!$(e)||null!=n&&!$(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(w.assert(t.getIndex()instanceof ge||t.getIndex()===ve,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},Oe.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},Oe.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},Oe.prototype.getQueryParams=function(){return this.queryParams_},Oe.prototype.getRef=function(){return w.validateArgCount("Query.ref",0,0,arguments.length),new Oe.__referenceConstructor(this.repo,this.path)},Oe.prototype.on=function(t,e,n,r){w.validateArgCount("Query.on",2,4,arguments.length),nt("Query.on",1,t,!1),w.validateCallback("Query.on",2,e,!1);var i,o=Oe.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,o.cancel,o.context):((i={})[t]=e,this.onChildEvent(i,o.cancel,o.context)),e},Oe.prototype.onValueEvent=function(t,e,n){var r=new Te(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},Oe.prototype.onChildEvent=function(t,e,n){var r=new Ne(t,e,n);this.repo.addEventCallbackForQuery(this,r)},Oe.prototype.off=function(t,e,n){w.validateArgCount("Query.off",0,3,arguments.length),nt("Query.off",1,t,!0),w.validateCallback("Query.off",2,e,!0),w.validateContextObject("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new Te(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Ne(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},Oe.prototype.once=function(e,n,t,r){var i=this;w.validateArgCount("Query.once",1,4,arguments.length),nt("Query.once",1,e,!1),w.validateCallback("Query.once",2,n,!0);var o=Oe.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new w.Deferred;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},Oe.prototype.limitToFirst=function(t){if(w.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Oe(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},Oe.prototype.limitToLast=function(t){if(w.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Oe(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},Oe.prototype.orderByChild=function(t){if(w.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');it("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new q(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new ge(e),r=this.queryParams_.orderBy(n);return Oe.validateQueryEndpoints_(r),new Oe(this.repo,this.path,r,!0)},Oe.prototype.orderByKey=function(){w.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(kt);return Oe.validateQueryEndpoints_(t),new Oe(this.repo,this.path,t,!0)},Oe.prototype.orderByPriority=function(){w.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(jt);return Oe.validateQueryEndpoints_(t),new Oe(this.repo,this.path,t,!0)},Oe.prototype.orderByValue=function(){w.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(ve);return Oe.validateQueryEndpoints_(t),new Oe(this.repo,this.path,t,!0)},Oe.prototype.startAt=function(t,e){void 0===t&&(t=null),w.validateArgCount("Query.startAt",0,2,arguments.length),Z("Query.startAt",1,t,this.path,!0),rt("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(Oe.validateLimit_(n),Oe.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new Oe(this.repo,this.path,n,this.orderByCalled_)},Oe.prototype.endAt=function(t,e){void 0===t&&(t=null),w.validateArgCount("Query.endAt",0,2,arguments.length),Z("Query.endAt",1,t,this.path,!0),rt("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(Oe.validateLimit_(n),Oe.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Oe(this.repo,this.path,n,this.orderByCalled_)},Oe.prototype.equalTo=function(t,e){if(w.validateArgCount("Query.equalTo",1,2,arguments.length),Z("Query.equalTo",1,t,this.path,!1),rt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},Oe.prototype.toString=function(){return w.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},Oe.prototype.toJSON=function(){return w.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},Oe.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},Oe.prototype.queryIdentifier=function(){var t=this.queryObject(),e=x(t);return"{}"===e?"default":e},Oe.prototype.isEqual=function(t){if(w.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof Oe))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},Oe.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,w.validateCallback(t,3,r.cancel,!0),r.context=n,w.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(w.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Oe.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),Oe);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var Re=(Pe.prototype.getImmediateChild=function(t){return new Pe(this.node_.getImmediateChild(t))},Pe.prototype.node=function(){return this.node_},Pe);function Pe(t){this.node_=t}var De=(xe.prototype.getImmediateChild=function(t){var e=this.path_.child(t);return new xe(this.syncTree_,e)},xe.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},xe);function xe(t,e){this.syncTree_=t,this.path_=e}function Le(t,e,n,r){return Ve(e,new De(n,t),r)}function Me(t,e,n){return Ve(t,new Re(e),n)}var Fe=function(t,e,n){return t&&"object"==typeof t?(w.assert(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Ue(t[".sv"],e,n):"object"==typeof t[".sv"]?je(t[".sv"],e):void w.assert(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Ue=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:w.assert(!1,"Unexpected server value: "+t)}},je=function(t,e,n){t.hasOwnProperty("increment")||w.assert(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&w.assert(!1,"Unexpected increment value: "+r);var i=e.node();if(w.assert(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r};function Ve(t,r,i){var e=t.getPriority().val(),n=Fe(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,s=Fe(o.getValue(),r,i);return s!==o.getValue()||n!==o.getPriority().val()?new Mt(s,fe(n)):t}var a=t,u=a;return n!==a.getPriority().val()&&(u=u.updatePriority(new Mt(n))),a.forEachChild(jt,function(t,e){var n=Ve(e,r.getImmediateChild(t),i);n!==e&&(u=u.updateImmediateChild(t,n))}),u}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,Be,We=(He.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},He.prototype.remember=function(t,e){var n,r;t.isEmpty()?(this.value=e,this.children.clear()):null!==this.value?this.value=this.value.updateChild(t,e):(n=t.getFront(),this.children.has(n)||this.children.set(n,new He),r=this.children.get(n),t=t.popFront(),r.remember(t,e))},He.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(jt,function(t,e){n.remember(new q(t),e)}),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},He.prototype.forEachTree=function(r,i){null!==this.value?i(r,this.value):this.forEachChild(function(t,e){var n=new q(r.toString()+"/"+t);e.forEachTree(n,i)})},He.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},He);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(){this.value=null,this.children=new Map}(Be=qe=qe||{})[Be.OVERWRITE=0]="OVERWRITE",Be[Be.MERGE=1]="MERGE",Be[Be.ACK_USER_WRITE=2]="ACK_USER_WRITE",Be[Be.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Ge=(Qe.User=new Qe(!0,!1,null,!1),Qe.Server=new Qe(!1,!0,null,!1),Qe.forServerTaggedQuery=function(t){return new Qe(!1,!0,t,!0)},Qe);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,w.assert(!r||e,"Tagged queries must be from server.")}var Ke,ze=(Xe.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return w.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new q(t));return new Xe(q.Empty,e,this.revert)}return w.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new Xe(this.path.popFront(),this.affectedTree,this.revert)},Xe);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=qe.ACK_USER_WRITE,this.source=Ge.User}var Ye=(Je.fromObject=function(t){var n=Je.Empty;return L(t,function(t,e){n=n.set(new q(t),e)}),n},Je.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Je.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:q.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new q(n).child(i.path),value:i.value}},Je.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Je.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):Je.Empty},Je.prototype.set=function(t,e){if(t.isEmpty())return new Je(e,this.children);var n=t.getFront(),r=(this.children.get(n)||Je.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new Je(this.value,i)},Je.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?Je.Empty:new Je(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0,i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r);return null===this.value&&i.isEmpty()?Je.Empty:new Je(this.value,i)}return this},Je.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},Je.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||Je.Empty).setTree(t.popFront(),e),i=void 0,i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r);return new Je(this.value,i)},Je.prototype.fold=function(t){return this.fold_(q.Empty,t)},Je.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},Je.prototype.findOnPath=function(t,e){return this.findOnPath_(t,q.Empty,e)},Je.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},Je.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,q.Empty,e)},Je.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):Je.Empty},Je.prototype.foreach=function(t){this.foreach_(q.Empty,t)},Je.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},Je.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Je.Empty=new Je(null),Je);function Je(t,e){void 0===e&&(e=Ke=Ke||new Qt(y)),this.value=t,this.children=e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var $e=(Ze.prototype.operationForChild=function(t){return this.path.isEmpty()?new Ze(this.source,q.Empty):new Ze(this.source,this.path.popFront())},Ze);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(t,e){this.source=t,this.path=e,this.type=qe.LISTEN_COMPLETE}var tn=(en.prototype.operationForChild=function(t){return this.path.isEmpty()?new en(this.source,q.Empty,this.snap.getImmediateChild(t)):new en(this.source,this.path.popFront(),this.snap)},en);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=qe.OVERWRITE}var nn=(rn.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new q(t));return e.isEmpty()?null:e.value?new tn(this.source,q.Empty,e.value):new rn(this.source,q.Empty,e)}return w.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new rn(this.source,this.path.popFront(),this.children)},rn.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},rn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(t,e,n){this.source=t,this.path=e,this.children=n,this.type=qe.MERGE}var on=(sn.prototype.isFullyInitialized=function(){return this.fullyInitialized_},sn.prototype.isFiltered=function(){return this.filtered_},sn.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},sn.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},sn.prototype.getNode=function(){return this.node_},sn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var an=(un.prototype.updateEventSnap=function(t,e,n){return new un(new on(t,e,n),this.serverCache_)},un.prototype.updateServerSnap=function(t,e,n){return new un(this.eventCache_,new on(t,e,n))},un.prototype.getEventCache=function(){return this.eventCache_},un.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},un.prototype.getServerCache=function(){return this.serverCache_},un.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},un.Empty=new un(new on(se.EMPTY_NODE,!1,!1),new on(se.EMPTY_NODE,!1,!1)),un);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t,e){this.eventCache_=t,this.serverCache_=e}var cn=(hn.valueChange=function(t){return new hn(hn.VALUE,t)},hn.childAddedChange=function(t,e){return new hn(hn.CHILD_ADDED,e,t)},hn.childRemovedChange=function(t,e){return new hn(hn.CHILD_REMOVED,e,t)},hn.childChangedChange=function(t,e,n){return new hn(hn.CHILD_CHANGED,e,t,n)},hn.childMovedChange=function(t,e){return new hn(hn.CHILD_MOVED,e,t)},hn.CHILD_ADDED="child_added",hn.CHILD_REMOVED="child_removed",hn.CHILD_CHANGED="child_changed",hn.CHILD_MOVED="child_moved",hn.VALUE="value",hn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var ln=(fn.prototype.updateChild=function(t,e,n,r,i,o){w.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(cn.childRemovedChange(e,s)):w.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(cn.childAddedChange(e,n)):o.trackChildChange(cn.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},fn.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(jt,function(t,e){n.hasChild(t)||i.trackChildChange(cn.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(jt,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(cn.childChangedChange(t,e,n)):i.trackChildChange(cn.childAddedChange(t,e))})),n.withIndex(this.index_)},fn.prototype.updatePriority=function(t,e){return t.isEmpty()?se.EMPTY_NODE:t.updatePriority(e)},fn.prototype.filtersNodes=function(){return!1},fn.prototype.getIndexedFilter=function(){return this},fn.prototype.getIndex=function(){return this.index_},fn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t){this.index_=t}var pn=(dn.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;w.assert(e===cn.CHILD_ADDED||e===cn.CHILD_CHANGED||e===cn.CHILD_REMOVED,"Only child changes supported for tracking"),w.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===cn.CHILD_ADDED&&i===cn.CHILD_REMOVED)this.changeMap.set(n,cn.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===cn.CHILD_REMOVED&&i===cn.CHILD_ADDED)this.changeMap.delete(n);else if(e===cn.CHILD_REMOVED&&i===cn.CHILD_CHANGED)this.changeMap.set(n,cn.childRemovedChange(n,r.oldSnap));else if(e===cn.CHILD_CHANGED&&i===cn.CHILD_ADDED)this.changeMap.set(n,cn.childAddedChange(n,t.snapshotNode));else{if(e!==cn.CHILD_CHANGED||i!==cn.CHILD_CHANGED)throw w.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,cn.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},dn.prototype.getChanges=function(){return Array.from(this.changeMap.values())},dn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){this.changeMap=new Map}function vn(){}var gn=new(vn.prototype.getCompleteChild=function(t){return null},vn.prototype.getChildAfterChild=function(t,e,n){return null},vn),yn=(mn.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new on(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},mn.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},mn);function mn(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _n=function(t,e){this.viewCache=t,this.changes=e},wn=(bn.prototype.assertIndexed=function(t){w.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),w.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},bn.prototype.applyOperation=function(t,e,n,r){var i,o=new pn;if(e.type===qe.OVERWRITE)var s=e,a=s.source.fromUser?this.applyUserOverwrite_(t,s.path,s.snap,n,r,o):(w.assert(s.source.fromServer,"Unknown source."),i=s.source.tagged||t.getServerCache().isFiltered()&&!s.path.isEmpty(),this.applyServerOverwrite_(t,s.path,s.snap,n,r,i,o));else if(e.type===qe.MERGE){var u=e;a=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,o):(w.assert(u.source.fromServer,"Unknown source."),i=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,i,o))}else if(e.type===qe.ACK_USER_WRITE){var c=e;a=c.revert?this.revertUserWrite_(t,c.path,n,r,o):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,o)}else{if(e.type!==qe.LISTEN_COMPLETE)throw w.assertionError("Unknown operation type: "+e.type);a=this.listenComplete_(t,e.path,n,o)}var h=o.getChanges();return bn.maybeAddValueEvent_(t,a,h),new _n(a,h)},bn.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(cn.valueChange(e.getCompleteEventSnap())))},bn.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h,l,f,p,d,v,g=void 0,y=void 0;return g=e.isEmpty()?(w.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(a=(s=t.getCompleteServerSnap())instanceof se?s:se.EMPTY_NODE,u=n.calcCompleteEventChildren(a),this.filter_.updateFullNode(t.getEventCache().getNode(),u,i)):(c=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),c,i))):".priority"===(h=e.getFront())?(w.assert(1===e.getLength(),"Can't have a priority with additional path components"),l=o.getNode(),y=t.getServerCache().getNode(),null!=(f=n.calcEventCacheAfterServerOverwrite(e,l,y))?this.filter_.updatePriority(l,f):o.getNode()):(p=e.popFront(),v=void 0,null!=(v=o.isCompleteForChild(h)?(y=t.getServerCache().getNode(),null!=(d=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),y))?o.getNode().getImmediateChild(h).updateChild(p,d):o.getNode().getImmediateChild(h)):n.calcCompleteChild(h,t.getServerCache()))?this.filter_.updateChild(o.getNode(),h,v,p,r,i):o.getNode()),t.updateEventSnap(g,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},bn.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{var l=e.getFront();if(!a.isCompleteForPath(e)&&1<e.getLength())return t;var f=e.popFront(),p=a.getNode().getImmediateChild(l).updateChild(f,n);h=".priority"===l?u.updatePriority(a.getNode(),p):u.updateChild(a.getNode(),l,p,f,gn,null)}var d=t.updateServerSnap(h,a.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),v=new yn(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},bn.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u,c,h,l,f,p=t.getEventCache(),d=new yn(r,t,i);return e.isEmpty()?(s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(s,!0,this.filter_.filtersNodes())):".priority"===(a=e.getFront())?(s=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(s,p.isFullyInitialized(),p.isFiltered())):(u=e.popFront(),c=p.getNode().getImmediateChild(a),l=void 0,l=u.isEmpty()?n:null!=(h=d.getCompleteChild(a))?".priority"===u.getBack()&&h.getChild(u.parent()).isEmpty()?h:h.updateChild(u,n):se.EMPTY_NODE,c.equals(l)?t:(f=this.filter_.updateChild(p.getNode(),a,l,u,d,o),t.updateEventSnap(f,p.isFullyInitialized(),this.filter_.filtersNodes())))},bn.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},bn.prototype.applyUserMerge_=function(r,i,t,o,s,a){var u=this,c=r;return t.foreach(function(t,e){var n=i.child(t);bn.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),t.foreach(function(t,e){var n=i.child(t);bn.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),c},bn.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},bn.prototype.applyServerMerge_=function(o,t,e,s,a,u,c){var h=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var l=o,n=t.isEmpty()?e:Ye.Empty.setTree(t,e),f=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){var n,r;f.hasChild(t)&&(n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e),l=h.applyServerOverwrite_(l,new q(t),r,s,a,u,c))}),n.children.inorderTraversal(function(t,e){var n,r,i=!o.getServerCache().isCompleteForChild(t)&&null==e.value;f.hasChild(t)||i||(n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e),l=h.applyServerOverwrite_(l,new q(t),r,s,a,u,c))}),l},bn.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=Ye.Empty;return a.getNode().forEachChild(kt,function(t,e){u=u.set(new q(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=Ye.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},bn.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,gn,r)},bn.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=new yn(n,t,r),l=t.getEventCache().getNode(),f=void 0;return e.isEmpty()||".priority"===e.getFront()?(a=void 0,a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),w.assert(s instanceof se,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),f=this.filter_.updateFullNode(l,a,i)):(u=e.getFront(),null==(c=n.calcCompleteChild(u,t.getServerCache()))&&t.getServerCache().isCompleteForChild(u)&&(c=l.getImmediateChild(u)),(f=null!=c?this.filter_.updateChild(l,u,c,e.popFront(),h,i):t.getEventCache().getNode().hasChild(u)?this.filter_.updateChild(l,u,se.EMPTY_NODE,e.popFront(),h,i):l).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(f=this.filter_.updateFullNode(f,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(q.Empty),t.updateEventSnap(f,o,this.filter_.filtersNodes())},bn);function bn(t){this.filter_=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var En=(In.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===cn.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(cn.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,cn.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,cn.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,cn.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,cn.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,cn.VALUE,t,n,e),i},In.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},In.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},In.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw w.assertionError("Should only compare child_ events.");var n=new wt(t.childName,t.snapshotNode),r=new wt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},In);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var Tn,Sn=(Cn.prototype.getQuery=function(){return this.query_},Cn.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},Cn.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},Cn.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},Cn.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},Cn.prototype.removeEventRegistration=function(t,n){var r,i=[];if(n&&(w.assert(null==t,"A cancel should cancel all event registrations."),r=this.query_.path,this.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,r);e&&i.push(e)})),t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(s)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return i},Cn.prototype.applyOperation=function(t,e,n){t.type===qe.MERGE&&null!==t.source.queryId&&(w.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),w.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),w.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},Cn.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(jt,function(t,e){n.push(cn.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(cn.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},Cn.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},Cn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new ln(n.getIndex()),i=n.getNodeFilter();this.processor_=new wn(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(se.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(se.EMPTY_NODE,s.getNode(),null),c=new on(a,o.isFullyInitialized(),r.filtersNodes()),h=new on(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new an(h,c),this.eventGenerator_=new En(this.query_)}var Nn=(Object.defineProperty(An,"__referenceConstructor",{get:function(){return w.assert(Tn,"Reference.ts has not been loaded"),Tn},set:function(t){w.assert(!Tn,"__referenceConstructor has already been defined"),Tn=t},enumerable:!0,configurable:!0}),An.prototype.isEmpty=function(){return 0===this.views.size},An.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return w.assert(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=v.__values(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},An.prototype.addEventRegistration=function(t,e,n,r,i){var o,s,a,u=t.queryIdentifier(),c=this.views.get(u);return c||(s=!1,s=!!(o=n.calcCompleteEventCache(i?r:null))||(o=r instanceof se?n.calcCompleteEventChildren(r):se.EMPTY_NODE,!1),a=new an(new on(o,s,!1),new on(r,i,!1)),c=new Sn(t,a),this.views.set(u,c)),c.addEventRegistration(e),c.getInitialEvents(e)},An.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=v.__values(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=v.__read(h.value,2),f=l[0],p=l[1],a=a.concat(p.removeEventRegistration(e,n));p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new An.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},An.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=v.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},An.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=v.__values(this.views.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r||s.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},An.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},An.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},An.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},An.prototype.getCompleteView=function(){var e,t;try{for(var n=v.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},An);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){this.views=new Map}var kn=(On.prototype.addWrite=function(t,e){if(t.isEmpty())return new On(new Ye(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=q.relativePath(r,t),i=i.updateChild(o,e);return new On(this.writeTree_.set(r,i))}var s=new Ye(e);return new On(this.writeTree_.setTree(t,s))},On.prototype.addWrites=function(n,t){var r=this;return L(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},On.prototype.removeWrite=function(t){return t.isEmpty()?On.Empty:new On(this.writeTree_.setTree(t,Ye.Empty))},On.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},On.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(q.relativePath(e.path,t)):null},On.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(jt,function(t,e){n.push(new wt(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new wt(t,e.value))}),n},On.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new On(null!=e?new Ye(e):this.writeTree_.subtree(t))},On.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},On.prototype.apply=function(t){return function n(r,t,i){if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(w.assert(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(q.Empty,this.writeTree_,t)},On.Empty=new On(new Ye(null)),On);function On(t){this.writeTree_=t}var Rn=(Pn.prototype.childWrites=function(t){return new Dn(t,this)},Pn.prototype.addOverwrite=function(t,e,n,r){w.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},Pn.prototype.addMerge=function(t,e,n){w.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},Pn.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},Pn.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});w.assert(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):L(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},Pn.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},Pn.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(q.Empty)){var o=Pn.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),s=t||se.EMPTY_NODE;return o.apply(s)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return t;if(null!=t||u.hasCompleteWrite(q.Empty)){var s=t||se.EMPTY_NODE;return u.apply(s)}return null},Pn.prototype.calcCompleteEventChildren=function(t,e){var r=se.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(jt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(jt,function(t,e){var n=i.childCompoundWrite(new q(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},Pn.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){w.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},Pn.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},Pn.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},Pn.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(q.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},Pn.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},Pn.prototype.resetTree_=function(){this.visibleWrites_=Pn.layerTree_(this.allWrites_,Pn.DefaultFilter_,q.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},Pn.DefaultFilter_=function(t){return t.visible},Pn.layerTree_=function(t,e,n){for(var r=kn.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s,a,u=o.path,c=void 0;if(o.snap)n.contains(u)?(c=q.relativePath(n,u),r=r.addWrite(c,o.snap)):u.contains(n)&&(c=q.relativePath(u,n),r=r.addWrite(q.Empty,o.snap.getChild(c)));else{if(!o.children)throw w.assertionError("WriteRecord should have .snap or .children");n.contains(u)?(c=q.relativePath(n,u),r=r.addWrites(c,o.children)):u.contains(n)&&((c=q.relativePath(u,n)).isEmpty()?r=r.addWrites(q.Empty,o.children):(s=w.safeGet(o.children,c.getFront()))&&(a=s.getChild(c.popFront()),r=r.addWrite(q.Empty,a)))}}}return r},Pn);function Pn(){this.visibleWrites_=kn.Empty,this.allWrites_=[],this.lastWriteId_=-1}var Dn=(xn.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},xn.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},xn.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},xn.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},xn.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},xn.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},xn.prototype.child=function(t){return new xn(this.treePath_.child(t),this.writeTree_)},xn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,e){this.treePath_=t,this.writeTree_=e}var Ln=(Mn.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new tn(Ge.User,t,e)):[]},Mn.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Ye.fromObject(e);return this.applyOperationToSyncPoints_(new nn(Ge.User,t,r))},Mn.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Ye.Empty;return null!=n.snap?r=r.set(q.Empty,!0):L(n.children,function(t,e){r=r.set(new q(t),e)}),this.applyOperationToSyncPoints_(new ze(n.path,r,e))}return[]},Mn.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new tn(Ge.Server,t,e))},Mn.prototype.applyServerMerge=function(t,e){var n=Ye.fromObject(e);return this.applyOperationToSyncPoints_(new nn(Ge.Server,t,n))},Mn.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new $e(Ge.Server,t))},Mn.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=Mn.parseQueryKey_(r),o=i.path,s=i.queryId,a=q.relativePath(o,t),u=new tn(Ge.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,u)},Mn.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=Mn.parseQueryKey_(r),o=i.path,s=i.queryId,a=q.relativePath(o,t),u=Ye.fromObject(e),c=new nn(Ge.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},Mn.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=Mn.parseQueryKey_(n),i=r.path,o=r.queryId,s=q.relativePath(i,t),a=new $e(Ge.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},Mn.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=q.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(q.Empty)):(s=new Nn,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?n=!0:(n=!1,i=se.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(q.Empty);n&&(i=i.updateImmediateChild(t,n))}));var a,u,c=s.viewExistsForQuery(t);c||t.getQueryParams().loadsAllData()||(a=Mn.makeQueryKey_(t),w.assert(!this.queryToTagMap.has(a),"View does not exist, but we have a tag"),u=Mn.getNextQueryTag_(),this.queryToTagMap.set(a,u),this.tagToQueryMap.set(u,a));var h,l=this.pendingWriteTree_.childWrites(r),f=s.addEventRegistration(t,e,l,i,n);return c||o||(h=s.viewForQuery(t),f=f.concat(this.setupListener_(t,h))),f},Mn.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed,s=a.events,c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(c&&!h){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(l),p=0;p<f.length;++p){var d=f[p],v=d.getQuery(),g=this.createListenerForView_(d);this.listenProvider_.startListening(Mn.queryForListening_(v),this.tagForQuery_(v),g.hashFn,g.onComplete)}}!h&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(Mn.queryForListening_(t),null):u.forEach(function(t){var e=r.queryToTagMap.get(Mn.makeQueryKey_(t));r.listenProvider_.stopListening(Mn.queryForListening_(t),e)})),this.removeTags_(u)}return s},Mn.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=q.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},Mn.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),L(n,function(t,e){r=r.concat(e)}),r})},Mn.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r,i=t[e];i.getQueryParams().loadsAllData()||(n=Mn.makeQueryKey_(i),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},Mn.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},Mn.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(Mn.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)w.assert(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),L(n,function(t,e){r=r.concat(e)}),r}),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening(Mn.queryForListening_(c),this.tagForQuery_(c))}return o},Mn.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||se.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,r);return n.removeEventRegistration(r,null,e)}}},Mn.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},Mn.parseQueryKey_=function(t){var e=t.indexOf("$");return w.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new q(t.substr(0,e))}},Mn.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},Mn.prototype.tagForQuery_=function(t){var e=Mn.makeQueryKey_(t);return this.queryToTagMap.get(e)},Mn.getNextQueryTag_=function(){return Mn.nextQueryTag_++},Mn.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);w.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},Mn.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(q.Empty))},Mn.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(q.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(q.Empty));var o,s,a=[],u=t.path.getFront(),c=t.operationForChild(u),h=e.children.get(u);return h&&c&&(o=n?n.getImmediateChild(u):null,s=r.child(u),a=a.concat(this.applyOperationHelper_(c,h,o,s))),i&&(a=a.concat(i.applyOperation(t,r,n))),a},Mn.prototype.applyOperationDescendantsHelper_=function(o,t,s,a){var u=this,e=t.get(q.Empty);null==s&&null!=e&&(s=e.getCompleteServerCache(q.Empty));var c=[];return t.children.inorderTraversal(function(t,e){var n=s?s.getImmediateChild(t):null,r=a.child(t),i=o.operationForChild(t);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(c=c.concat(e.applyOperation(o,a,s))),c},Mn.nextQueryTag_=1,Mn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t){this.listenProvider_=t,this.syncPointTree_=Ye.Empty,this.pendingWriteTree_=new Rn,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var Fn=(Un.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Un.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Un);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){this.rootNode_=se.EMPTY_NODE}var jn=(Vn.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(k("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},Vn.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},Vn.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},Vn.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',g(t)},Vn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var qn=(Bn.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),w.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Bn.prototype.get=function(){return w.deepCopy(this.counters_)},Bn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){this.counters_={}}var Wn=(Hn.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new qn),this.collections_[e]},Hn.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},Hn.collections_={},Hn.reporters_={},Hn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){}var Gn=(Qn.prototype.get=function(){var t=this.collection_.get(),n=v.__assign({},t);return this.last_&&L(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},Qn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t){this.collection_=t,this.last_=null}var Kn=(zn.prototype.includeStat=function(t){this.statsToReport_[t]=!0},zn.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;L(t,function(t,e){0<e&&w.contains(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),U(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},zn);function zn(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Gn(t);var n=1e4+2e4*Math.random();U(this.reportStats_.bind(this),Math.floor(n))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xn=(Yn.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Jn(i)),e.add(r)}e&&this.eventLists_.push(e)},Yn.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},Yn.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},Yn.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},Yn);function Yn(){this.eventLists_=[],this.recursionDepth_=0}var Jn=($n.prototype.add=function(t){this.events_.push(t)},$n.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e,n=this.events_[t];null!==n&&(this.events_[t]=null,e=n.getEventRunner(),N&&k("event: "+n.toString()),F(e))}},$n.prototype.getPath=function(){return this.path_},$n);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t){this.path_=t,this.events_=[]}var Zn=(tr.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=v.__spread(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},tr.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},tr.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},tr.prototype.validateEventType_=function(e){w.assert(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},tr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t){this.allowedEvents_=t,this.listeners_={},w.assert(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var er,nr=(er=Zn,v.__extends(rr,er),rr.getInstance=function(){return new rr},rr.prototype.getInitialEvent=function(t){return w.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},rr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){var e,t,n=er.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var ir,or=(ir=Zn,v.__extends(sr,ir),sr.getInstance=function(){return new sr},sr.prototype.getInitialEvent=function(t){return w.assert("online"===t,"Unknown event type: "+t),[this.online_]},sr.prototype.currentlyOnline=function(){return this.online_},sr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(){var t=ir.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||w.isMobileCordova()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var ar=(ur.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},ur.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&F(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}(););},ur);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var cr="pLPCommand",hr="pRTLPCB",lr=(fr.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ar(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t,e;s.isClosed_||(s.scriptTagHolder=new pr(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=v.__read(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=v.__read(t,2),r=n[0],i=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,i)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(G)&&(t.r="f"),e=s.urlFn(t),s.log_("Connecting via long-poll to "+e),s.scriptTagHolder.addTag(e,function(){}))},w.isNodeSdk()||"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},fr.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},fr.forceAllow=function(){fr.forceAllow_=!0},fr.forceDisallow=function(){fr.forceDisallow_=!0},fr.isAvailable=function(){return!(w.isNodeSdk()||!fr.forceAllow_&&(fr.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},fr.prototype.markConnectionHealthy=function(){},fr.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},fr.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},fr.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},fr.prototype.send=function(t){var e=w.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=w.base64Encode(e),r=_(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},fr.prototype.addDisconnectPingFrame=function(t,e){var n;w.isNodeSdk()||(this.myDisconnFrame=document.createElement("iframe"),(n={dframe:"t"}).id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame))},fr.prototype.incrementIncomingBytes_=function(t){var e=w.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},fr);function fr(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=O(t),this.stats_=Wn.getCollection(e),this.urlFn=function(t){return e.connectionURL(Q,t)}}var pr=(dr.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||k("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},dr.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},dr.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},dr.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift(),n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d;r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},dr.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},dr.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},dr.prototype.addTag=function(t,n){var r=this;w.isNodeSdk()?this.doNodeLongPoll(t,n):setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){k("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},dr);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,e,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,w.isNodeSdk())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=S(),window[cr+this.uniqueCallbackIdentifier]=t,window[hr+this.uniqueCallbackIdentifier]=e,this.myIFrame=dr.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){k("frame writing exception"),t.stack&&k(t.stack),k(t)}}}var vr="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gr=null;"undefined"!=typeof MozWebSocket?gr=MozWebSocket:"undefined"!=typeof WebSocket&&(gr=WebSocket);var yr=(mr.connectionURL_=function(t,e,n){var r={v:"5"};return!w.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(G)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},mr.prototype.open=function(t,e){var n,r,i,o,s=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,E.set("previous_websocket_failure",!0);try{w.isNodeSdk()?(n=w.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+vr+"/"+u.platform+"/"+n,"X-Firebase-GMPID":this.applicationId||""}},r=u.env,(i=0===this.connURL.indexOf("wss://")?r.HTTPS_PROXY||r.https_proxy:r.HTTP_PROXY||r.http_proxy)&&(o.proxy={origin:i})):o={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new gr(this.connURL,[],o)}catch(t){this.log_("Error instantiating WebSocket.");var a=t.message||t.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){s.log_("Websocket connected."),s.everConnected_=!0},this.mySock.onclose=function(){s.log_("Websocket connection was disconnected."),s.mySock=null,s.onClosed_()},this.mySock.onmessage=function(t){s.handleIncomingFrame(t)},this.mySock.onerror=function(t){s.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&s.log_(e),s.onClosed_()}},mr.prototype.start=function(){},mr.forceDisallow=function(){mr.forceDisallow_=!0},mr.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0),!e&&null!==gr&&!mr.forceDisallow_},mr.previouslyFailed=function(){return E.isInMemoryStorage||!0===E.get("previous_websocket_failure")},mr.prototype.markConnectionHealthy=function(){E.remove("previous_websocket_failure")},mr.prototype.appendFrame_=function(t){var e,n;this.frames.push(t),this.frames.length===this.totalFrames&&(e=this.frames.join(""),this.frames=null,n=w.jsonEval(e),this.onMessage(n))},mr.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},mr.prototype.extractFrameCount_=function(t){if(w.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},mr.prototype.handleIncomingFrame=function(t){var e,n;null!==this.mySock&&(e=t.data,this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(e):null!==(n=this.extractFrameCount_(e))&&this.appendFrame_(n))},mr.prototype.send=function(t){this.resetKeepAlive();var e=w.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=_(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},mr.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},mr.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},mr.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},mr.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},mr.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},mr.responsesRequiredToBeHealthy=2,mr.healthyTimeout=3e4,mr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=O(this.connId),this.stats_=Wn.getCollection(e),this.connURL=mr.connectionURL_(e,r,i)}var _r=(Object.defineProperty(wr,"ALL_TRANSPORTS",{get:function(){return[lr,yr]},enumerable:!0,configurable:!0}),wr.prototype.initTransports_=function(t){var e,n,r=yr&&yr.isAvailable(),i=r&&!yr.previouslyFailed();if(t.webSocketOnly&&(r||g("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[yr];else{var o=this.transports_=[];try{for(var s=v.__values(wr.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},wr.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},wr.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},wr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t){this.initTransports_(t)}var br=(Er.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=U(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},Er.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Er.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},Er.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},Er.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},Er.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Er.prototype.onSecondaryControl_=function(t){var e;"t"in t&&("a"===(e=t.t)?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},Er.prototype.onSecondaryMessageReceived_=function(t){var e=m("t",t),n=m("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},Er.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Er.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Er.prototype.onPrimaryMessageReceived_=function(t){var e=m("t",t),n=m("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},Er.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Er.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Er.prototype.onControl_=function(t){var e=m("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?f("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):f("Unknown control packet command: "+e)}},Er.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&g("Protocol version mismatch detected"),this.tryStartUpgrade_())},Er.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Er.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),U(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},Er.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},Er.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):U(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},Er.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Er.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Er.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(E.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Er.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Er.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Er.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Er.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Er);function Er(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=O("c:"+this.id+":"),this.transportManager_=new _r(e),this.log_("Connection created"),this.start_()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ir=(Tr.prototype.put=function(t,e,n,r){},Tr.prototype.merge=function(t,e,n,r){},Tr.prototype.refreshAuthToken=function(t){},Tr.prototype.onDisconnectPut=function(t,e,n){},Tr.prototype.onDisconnectMerge=function(t,e,n){},Tr.prototype.onDisconnectCancel=function(t,e){},Tr.prototype.reportStats=function(t){},Tr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){}var Sr,Cr=1e3,Nr=3e5,Ar=(Sr=Ir,v.__extends(kr,Sr),kr.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(w.stringify(i)),w.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},kr.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),w.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),w.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},kr.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;kr.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},kr.warnOnListenWarnings_=function(t,e){var n,r,i;t&&"object"==typeof t&&w.contains(t,"w")&&(n=w.safeGet(t,"w"),Array.isArray(n)&&~n.indexOf("no_index")&&(r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString(),g("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")))},kr.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},kr.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||w.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},kr.prototype.tryAuth=function(){var r,t,e,i=this;this.connected_&&this.authToken_&&(r=this.authToken_,t=w.isValidFormat(r)?"auth":"gauth",e={cred:r},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,n=t.d||"error";i.authToken_===r&&("ok"===e?i.invalidAuthTokenCount_=0:i.onAuthRevoked_(e,n))}))},kr.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),w.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},kr.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},kr.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},kr.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},kr.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},kr.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},kr.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},kr.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},kr.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},kr.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},kr.prototype.reportStats=function(t){var e,n=this;this.connected_&&(e={c:t},this.log_("reportStats",e),this.sendRequest("s",e,function(t){var e;"ok"!==t.s&&(e=t.d,n.log_("reportStats","Error sending stats: "+e))}))},kr.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+w.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},kr.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):f("Unrecognized action received from server: "+w.stringify(t)+"\nAre you using the latest client?")},kr.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},kr.prototype.scheduleConnect_=function(t){var e=this;w.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},kr.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Cr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},kr.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Cr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},kr.prototype.onRealtimeDisconnect_=function(){var t,e;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=Cr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t),e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},kr.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+kr.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){w.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?k("getToken() completed but was canceled"):(k("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new br(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){g(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||(w.CONSTANTS.NODE_ADMIN&&g(t),c())}))},kr.prototype.interrupt=function(t){k("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},kr.prototype.resume=function(t){k("Resuming connection for reason: "+t),delete this.interruptReasons_[t],w.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=Cr,this.realtime_||this.scheduleConnect_(0))},kr.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},kr.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},kr.prototype.onListenRevoked_=function(t,e){var n=e?e.map(function(t){return x(t)}).join("$"):"default",r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},kr.prototype.removeListen_=function(t,e){var n,r,i=new q(t).toString();return this.listens.has(i)?(r=(n=this.listens.get(i)).get(e),n.delete(e),0===n.size&&this.listens.delete(i)):r=void 0,r},kr.prototype.onAuthRevoked_=function(t,e){k("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},kr.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},kr.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=v.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,v.__values(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},kr.prototype.sendConnectStats_=function(){var t={},e="js";w.CONSTANTS.NODE_ADMIN?e="admin_node":w.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+vr.replace(/\./g,"-")]=1,w.isMobileCordova()?t["framework.cordova"]=1:w.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},kr.prototype.shouldReconnect_=function(){var t=or.getInstance().currentlyOnline();return w.isEmpty(this.interruptReasons_)&&t},kr.nextPersistentConnectionId_=0,kr.nextConnectionId_=0,kr);function kr(t,e,n,r,i,o,s){var a=Sr.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=kr.nextPersistentConnectionId_++,a.log_=O("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=Cr,a.maxReconnectDelay_=Nr,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!w.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),nr.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&or.getInstance().on("online",a.onOnline_,a),a}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Or,Rr=(Or=Ir,v.__extends(Pr,Or),Pr.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Pr.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(w.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},Pr.prototype.listen=function(t,e,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=Pr.getListenId_(t,r),u={};this.listens_[a]=u;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",n,function(t,e){var n=e;404===t&&(t=n=null),null===t&&o.onDataUpdate_(s,n,!1,r),w.safeGet(o.listens_,a)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},Pr.prototype.unlisten=function(t,e){var n=Pr.getListenId_(t,e);delete this.listens_[n]},Pr.prototype.refreshAuthToken=function(t){},Pr.prototype.restRequest_=function(i,o,s){var a=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(o.auth=e);var n=(a.repoInfo_.secure?"https://":"http://")+a.repoInfo_.host+i+"?ns="+a.repoInfo_.namespace+w.querystring(o);a.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(s&&4===r.readyState){a.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=w.jsonEval(r.responseText)}catch(t){g("Failed to parse JSON response for "+n+": "+r.responseText)}s(null,t)}else 401!==r.status&&404!==r.status&&g("Got unsuccessful REST response for "+n+" Status: "+r.status),s(r.status);s=null}},r.open("GET",n,!0),r.send()})},Pr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(t,e,n){var r=Or.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=O("p:rest:"),r.listens_={},r}var Dr="repo_interrupt",xr=(Lr.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Lr.prototype.name=function(){return this.repoInfo_.namespace},Lr.prototype.serverTime=function(){var t=this.infoData_.getNode(new q(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},Lr.prototype.generateServerValues=function(){return(t=t={timestamp:this.serverTime()}).timestamp=t.timestamp||(new Date).getTime(),t;var t},Lr.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new q(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o,s,a,u,c=[],h=i;0<(c=r?n?(o=w.map(e,function(t){return fe(t)}),this.serverSyncTree_.applyTaggedQueryMerge(i,o,r)):(s=fe(e),this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)):n?(a=w.map(e,function(t){return fe(t)}),this.serverSyncTree_.applyServerMerge(i,a)):(u=fe(e),this.serverSyncTree_.applyServerOverwrite(i,u))).length&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,c)},Lr.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},Lr.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},Lr.prototype.onServerInfoUpdate_=function(t){var n=this;L(t,function(t,e){n.updateInfo_(t,e)})},Lr.prototype.updateInfo_=function(t,e){var n=new q("/.info/"+t),r=fe(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},Lr.prototype.getNextWriteId_=function(){return this.nextWriteId_++},Lr.prototype.setWithPriority=function(i,t,e,o){var s=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=fe(t,e),a=this.serverSyncTree_.calcCompleteEventCache(i),u=Me(r,a,n),c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(i,u,c,!0);this.eventQueue_.queueEvents(h),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||g("set at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(c,!n);s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(o,t,e)});var l=this.abortTransactions_(i);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},Lr.prototype.update=function(o,t,s){var a=this;this.log_("update",{path:o.toString(),value:t});var u,e,n=!0,r=this.generateServerValues(),i={};L(t,function(t,e){n=!1,i[t]=Le(o.child(t),fe(e),a.serverSyncTree_,r)}),n?(k("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(s,"ok")):(u=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,i,u),this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||g("update at "+o+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(u,!n),i=0<r.length?a.rerunTransactions_(o):o;a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(s,t,e)}),L(t,function(t){var e=a.abortTransactions_(o.child(t));a.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[]))},Lr.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var i=this.generateServerValues(),o=new We;this.onDisconnect_.forEachTree(q.Empty,function(t,e){var n=Le(t,e,r.serverSyncTree_,i);o.remember(t,n)});var s=[];o.forEachTree(q.Empty,function(t,e){s=s.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new We,this.eventQueue_.raiseEventsForChangedPath(q.Empty,s)},Lr.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},Lr.prototype.onDisconnectSet=function(n,t,r){var i=this,o=fe(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},Lr.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=fe(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},Lr.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(w.isEmpty(n))return k("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&L(n,function(t,e){var n=fe(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},Lr.prototype.addEventCallbackForQuery=function(t,e){var n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,n)},Lr.prototype.removeEventCallbackForQuery=function(t,e){var n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,n)},Lr.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Dr)},Lr.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Dr)},Lr.prototype.stats=function(t){var e,i;void 0===t&&(t=!1),"undefined"!=typeof console&&(e=t?(this.statsListener_||(this.statsListener_=new Gn(this.stats_)),this.statsListener_.get()):this.stats_.get(),i=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0),L(e,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},Lr.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},Lr.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),k.apply(void 0,v.__spread([n],t))},Lr.prototype.callOnCompleteCallback=function(r,i,o){r&&F(function(){var t,e,n;"ok"===i?r(null):(e=t=(i||"error").toUpperCase(),o&&(e+=": "+o),(n=new Error(e)).code=t,r(n))})},Object.defineProperty(Lr.prototype,"database",{get:function(){return this.__database||(this.__database=new ti(this))},enumerable:!0,configurable:!0}),Lr);function Lr(t,e,n,r){var s=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Xn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new We,this.persistentConnection_=null;var i=new jn(n,r);if(this.stats_=Wn.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new Rr(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{w.stringify(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new Ar(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=Wn.getOrCreateReporter(t,function(){return new Kn(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new Fn,this.infoSyncTree_=new Ln({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ln({startListening:function(r,t,e,i){return s.server_.listen(r,e,t,function(t,e){var n=i(t,e);s.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Mr=(Fr.prototype.getStartPost=function(){return this.startPost_},Fr.prototype.getEndPost=function(){return this.endPost_},Fr.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Fr.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new wt(e,n))||(n=se.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Fr.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=se.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(se.EMPTY_NODE),i=this;return e.forEachChild(jt,function(t,e){i.matches(new wt(t,e))||(r=r.updateImmediateChild(t,se.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},Fr.prototype.updatePriority=function(t,e){return t},Fr.prototype.filtersNodes=function(){return!0},Fr.prototype.getIndexedFilter=function(){return this.indexedFilter_},Fr.prototype.getIndex=function(){return this.index_},Fr.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Fr.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Fr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t){this.indexedFilter_=new ln(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Fr.getStartPost_(t),this.endPost_=Fr.getEndPost_(t)}var Ur=(jr.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new wt(e,n))||(n=se.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},jr.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=se.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=se.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(se.EMPTY_NODE);var a,u=void 0,c=void 0,h=void 0,i=void 0;h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare());for(var o=0,l=!1;i.hasNext();)s=i.getNext(),!l&&h(u,s)<=0&&(l=!0),l&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,se.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},jr.prototype.updatePriority=function(t,e){return t},jr.prototype.filtersNodes=function(){return!0},jr.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},jr.prototype.getIndex=function(){return this.index_},jr.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;w.assert(a.numChildren()===this.limit_,"");var u=new wt(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(cn.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(cn.childRemovedChange(e,l));var d=a.updateImmediateChild(e,se.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(cn.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(cn.childRemovedChange(c.name,c.node)),i.trackChildChange(cn.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,se.EMPTY_NODE)):t},jr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t){this.rangedFilter_=new Mr(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var Vr=(qr.prototype.hasStart=function(){return this.startSet_},qr.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===qr.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},qr.prototype.getIndexStartValue=function(){return w.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},qr.prototype.getIndexStartName=function(){return w.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:R},qr.prototype.hasEnd=function(){return this.endSet_},qr.prototype.getIndexEndValue=function(){return w.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},qr.prototype.getIndexEndName=function(){return w.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:P},qr.prototype.hasLimit=function(){return this.limitSet_},qr.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},qr.prototype.getLimit=function(){return w.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},qr.prototype.getIndex=function(){return this.index_},qr.prototype.copy_=function(){var t=new qr;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},qr.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},qr.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=qr.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},qr.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=qr.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},qr.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},qr.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},qr.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},qr.prototype.getQueryObject=function(){var t,e=qr.WIRE_PROTOCOL_CONSTANTS_,n={};return this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_&&(n[e.LIMIT]=this.limit_,""===(t=this.viewFrom_)&&(t=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=t),this.index_!==jt&&(n[e.INDEX]=this.index_.toString()),n},qr.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},qr.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===jt},qr.prototype.getNodeFilter=function(){return this.loadsAllData()?new ln(this.getIndex()):new(this.hasLimit()?Ur:Mr)(this)},qr.prototype.toRestQueryStringParameters=function(){var t,e=qr.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===jt?e.PRIORITY_INDEX:this.index_===ve?e.VALUE_INDEX:this.index_===kt?e.KEY_INDEX:(w.assert(this.index_ instanceof ge,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=w.stringify(t),this.startSet_&&(n[e.START_AT]=w.stringify(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+w.stringify(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=w.stringify(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+w.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},qr.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},qr.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},qr.DEFAULT=new qr,qr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jt}var Br,Wr=(Br=ke,v.__extends(Hr,Br),Hr.prototype.getKey=function(){return w.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Hr.prototype.child=function(t){var e,n,r,i;return w.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof q||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),it(e,n,r,i)):it("Reference.child",1,t,!1)),new Hr(this.repo,this.path.child(t))},Hr.prototype.getParent=function(){w.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new Hr(this.repo,t)},Hr.prototype.getRoot=function(){w.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Hr.prototype.databaseProp=function(){return this.repo.database},Hr.prototype.set=function(t,e){w.validateArgCount("Reference.set",1,2,arguments.length),ot("Reference.set",this.path),Z("Reference.set",1,t,this.path,!1),w.validateCallback("Reference.set",2,e,!0);var n=new w.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},Hr.prototype.update=function(t,e){if(w.validateArgCount("Reference.update",1,2,arguments.length),ot("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,g("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}tt("Reference.update",1,t,this.path,!1),w.validateCallback("Reference.update",2,e,!0);var i=new w.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},Hr.prototype.setWithPriority=function(t,e,n){if(w.validateArgCount("Reference.setWithPriority",2,3,arguments.length),ot("Reference.setWithPriority",this.path),Z("Reference.setWithPriority",1,t,this.path,!1),et("Reference.setWithPriority",2,e,!1),w.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new w.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},Hr.prototype.remove=function(t){return w.validateArgCount("Reference.remove",0,1,arguments.length),ot("Reference.remove",this.path),w.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},Hr.prototype.transaction=function(t,r,e){if(w.validateArgCount("Reference.transaction",1,3,arguments.length),ot("Reference.transaction",this.path),w.validateCallback("Reference.transaction",1,t,!1),w.validateCallback("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(w.errorPrefix(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new w.Deferred;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new dt(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},Hr.prototype.setPriority=function(t,e){w.validateArgCount("Reference.setPriority",1,2,arguments.length),ot("Reference.setPriority",this.path),et("Reference.setPriority",1,t,!1),w.validateCallback("Reference.setPriority",2,e,!0);var n=new w.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},Hr.prototype.push=function(t,e){w.validateArgCount("Reference.push",0,2,arguments.length),ot("Reference.push",this.path),Z("Reference.push",1,t,this.path,!0),w.validateCallback("Reference.push",2,e,!0);var n=this.repo.serverTime(),r=_t(n),i=this.child(r),o=this.child(r),s=null!=t?i.set(t,e).then(function(){return o}):Promise.resolve(o);return i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),"function"==typeof e&&s.catch(function(){}),i},Hr.prototype.onDisconnect=function(){return ot("Reference.onDisconnect",this.path),new ft(this.repo,this.path)},Object.defineProperty(Hr.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(Hr.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(Hr.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(Hr.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),Hr);function Hr(t,e){if(!(t instanceof xr))throw new Error("new Reference() no longer supported - use app.database().");return Br.call(this,t,e,Vr.DEFAULT,!1)||this}ke.__referenceConstructor=Wr,Nn.__referenceConstructor=Wr;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Gr,Qr,Kr=function(){this.children={},this.childCount=0,this.value=null},zr=(Xr.prototype.subTree=function(t){for(var e=t instanceof q?t:new q(t),n=this,r=e.getFront();null!==r;)n=new Xr(r,n,w.safeGet(n.node_.children,r)||new Kr),r=(e=e.popFront()).getFront();return n},Xr.prototype.getValue=function(){return this.node_.value},Xr.prototype.setValue=function(t){w.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Xr.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Xr.prototype.hasChildren=function(){return 0<this.node_.childCount},Xr.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Xr.prototype.forEachChild=function(n){var r=this;L(this.node_.children,function(t,e){n(new Xr(t,r,e))})},Xr.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Xr.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Xr.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Xr.prototype.path=function(){return new q(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Xr.prototype.name=function(){return this.name_},Xr.prototype.parent=function(){return this.parent_},Xr.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Xr.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=w.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Xr);function Xr(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Kr),this.name_=t,this.parent_=e,this.node_=n}(Qr=Gr=Gr||{})[Qr.RUN=0]="RUN",Qr[Qr.SENT=1]="SENT",Qr[Qr.COMPLETED=2]="COMPLETED",Qr[Qr.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Qr[Qr.NEEDS_ABORT=4]="NEEDS_ABORT",xr.MAX_TRANSACTION_RETRIES_=25,xr.prototype.transactionsInit_=function(){this.transactionQueueTree_=new zr},xr.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);function i(){}var o=new Wr(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:S(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u,c,h,l,f,p,d,v,g=s.update(a.val());void 0===g?(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&(u=new me(s.currentInputSnapshot,new Wr(this,s.path),jt),s.onComplete(null,!1,u))):(lt("transaction failed: Data returned ",g,s.path),s.status=Gr.RUN,(h=(c=this.transactionQueueTree_.subTree(t)).getValue()||[]).push(s),c.setValue(h),l=void 0,"object"==typeof g&&null!==g&&w.contains(g,".priority")?(l=w.safeGet(g,".priority"),w.assert($(l),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):l=(this.serverSyncTree_.calcCompleteEventCache(t)||se.EMPTY_NODE).getPriority().val(),f=this.generateServerValues(),p=fe(g,l),d=Me(p,a,f),s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=d,s.currentWriteId=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserOverwrite(t,d,s.currentWriteId,s.applyLocally),this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_())},xr.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||se.EMPTY_NODE},xr.prototype.sendReadyTransactions_=function(t){var e,n=this;void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()?(e=this.buildTransactionQueue_(t),w.assert(0<e.length,"Sending zero length transaction queue"),e.every(function(t){return t.status===Gr.RUN})&&this.sendTransactionQueue_(t.path(),e)):t.hasChildren()&&t.forEachChild(function(t){n.sendReadyTransactions_(t)})},xr.prototype.sendTransactionQueue_=function(a,u){for(var c=this,t=u.map(function(t){return t.currentWriteId}),e=this.getLatestState_(a,t),n=e,r=e.hash(),i=0;i<u.length;i++){var o=u[i];w.assert(o.status===Gr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=Gr.SENT,o.retryCount++;var s=q.relativePath(a,o.path),n=n.updateChild(s,o.currentOutputSnapshotRaw)}var h=n.val(!0),l=a;this.server_.put(l.toString(),h,function(t){c.log_("transaction put response",{path:l.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i,o=[],s=0;s<u.length;s++){u[s].status=Gr.COMPLETED,e=e.concat(c.serverSyncTree_.ackUserWrite(u[s].currentWriteId)),u[s].onComplete&&(n=u[s].currentOutputSnapshotResolved,r=new Wr(c,u[s].path),i=new me(n,r,jt),o.push(u[s].onComplete.bind(null,null,!0,i))),u[s].unwatcher()}c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(a)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(a,e);for(s=0;s<o.length;s++)F(o[s])}else{if("datastale"===t)for(s=0;s<u.length;s++)u[s].status===Gr.SENT_NEEDS_ABORT?u[s].status=Gr.NEEDS_ABORT:u[s].status=Gr.RUN;else{g("transaction at "+l.toString()+" failed: "+t);for(s=0;s<u.length;s++)u[s].status=Gr.NEEDS_ABORT,u[s].abortReason=t}c.rerunTransactions_(a)}},r)},xr.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},xr.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===Gr.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a,u,c,h,l,f,p,d,v,g=t[s],y=q.relativePath(e,g.path),m=!1,_=void 0;w.assert(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===Gr.NEEDS_ABORT?(m=!0,_=g.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(g.currentWriteId,!0))):g.status===Gr.RUN&&(i=g.retryCount>=xr.MAX_TRANSACTION_RETRIES_?(m=!0,_="maxretry",i.concat(this.serverSyncTree_.ackUserWrite(g.currentWriteId,!0))):(a=this.getLatestState_(g.path,o),g.currentInputSnapshot=a,void 0!==(u=t[s].update(a.val()))?(lt("transaction failed: Data returned ",u,g.path),c=fe(u),"object"==typeof u&&null!=u&&w.contains(u,".priority")||(c=c.updatePriority(a.getPriority())),h=g.currentWriteId,l=this.generateServerValues(),f=Me(c,a,l),g.currentOutputSnapshotRaw=c,g.currentOutputSnapshotResolved=f,g.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(h),1),(i=i.concat(this.serverSyncTree_.applyUserOverwrite(g.path,f,g.currentWriteId,g.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(h,!0))):(m=!0,_="nodata",i.concat(this.serverSyncTree_.ackUserWrite(g.currentWriteId,!0))))),this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],m&&(t[s].status=Gr.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete&&("nodata"===_?(p=new Wr(this,t[s].path),d=t[s].currentInputSnapshot,v=new me(d,p,jt),r.push(t[s].onComplete.bind(null,null,!1,v))):r.push(t[s].onComplete.bind(null,new Error(_),!1,null))))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)F(r[s]);this.sendReadyTransactions_()}},xr.prototype.getAncestorTransactionNode_=function(t){for(var e=this.transactionQueueTree_,n=t.getFront();null!==n&&null===e.getValue();)e=e.subTree(n),n=(t=t.popFront()).getFront();return e},xr.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},xr.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},xr.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Gr.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},xr.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},xr.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++){e[o].status===Gr.SENT_NEEDS_ABORT||(e[o].status===Gr.SENT?(w.assert(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=Gr.SENT_NEEDS_ABORT,e[o].abortReason="set"):(w.assert(e[o].status===Gr.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)F(n[o])}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Yr,Jr="databaseURL",$r=(Zr.getInstance=function(){return Yr=Yr||new Zr},Zr.prototype.interrupt=function(){var e,t,n,r;try{for(var i=v.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,v.__values(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Zr.prototype.resume=function(){var e,t,n,r;try{for(var i=v.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,v.__values(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Zr.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[Jr];void 0===r&&p("Can't determine Firebase Database URL.  Be sure to include "+Jr+" option when calling firebase.initializeApp().");var i=X(r),o=i.repoInfo,s=void 0;return void 0!==u&&(s=u.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(r="http://"+s+"?ns="+o.namespace,o=(i=X(r)).repoInfo),st("Invalid Firebase Database URL",1,i),i.path.isEmpty()||p("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},Zr.prototype.deleteRepo=function(t){var e=w.safeGet(this.repos_,t.app.name);e&&w.safeGet(e,t.repoInfo_.toURLString())===t||p("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},Zr.prototype.createRepo=function(t,e,n){var r=w.safeGet(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=w.safeGet(r,t.toURLString());return i&&p("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new xr(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Zr.prototype.forceRestClient=function(t){this.useRestClient_=t},Zr);function Zr(){this.repos_={},this.useRestClient_=!1}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ti=(Object.defineProperty(ei.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),ei.prototype.ref=function(t){return this.checkDeleted_("ref"),w.validateArgCount("database.ref",0,1,arguments.length),t instanceof Wr?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},ei.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),w.validateArgCount(e,1,1,arguments.length);var n=X(t);st(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&p(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},ei.prototype.checkDeleted_=function(t){null===this.repo_&&p("Cannot call "+t+" on a deleted database.")},ei.prototype.goOffline=function(){w.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},ei.prototype.goOnline=function(){w.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},ei.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},ei);function ei(t){(this.repo_=t)instanceof xr||p("Don't call new Database() directly - please use firebase.database()."),this.root_=new Wr(t,q.Empty),this.INTERNAL=new ni(this)}var ni=(ri.prototype.delete=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){return this.database.checkDeleted_("delete"),$r.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},ri);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t){this.database=t}var ii=Object.freeze({__proto__:null,forceLongPolling:function(){yr.forceDisallow(),lr.forceAllow()},forceWebSockets:function(){lr.forceDisallow()},isWebSocketsAvailable:function(){return yr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),oi=Ar;Ar.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ar.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var si=Object.freeze({__proto__:null,DataConnection:oi,RealTimeConnection:br,hijackHash:function(i){var o=Ar.prototype.put;return Ar.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){Ar.prototype.put=o}},ConnectionTarget:K,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){$r.getInstance().forceRestClient(t)}}),ai=ti.ServerValue;function ui(t){var e;e=t.SDK_VERSION,vr=e;var n=t.INTERNAL.registerComponent(new r.Component("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return $r.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:Wr,Query:ke,Database:ti,DataSnapshot:me,enableLogging:l,INTERNAL:ii,ServerValue:ai,TEST_ACCESS:si}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.6.6"),w.isNodeSdk()&&(ci.exports=n)}ui(e),hi.DataSnapshot=me,hi.Database=ti,hi.OnDisconnect=ft,hi.Query=ke,hi.Reference=Wr,hi.ServerValue=ai,hi.enableLogging=l,hi.registerDatabase=ui}).call(this,li("8oxB"))},O1kn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;n("fSjL");var o,E=n("mrSG"),f=n("zVF4"),g=n("q/0M"),s=n("S+S0"),y=(a.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},a.prototype.fetch=function(s){return E.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return E.__generator(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=t.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(s.cacheMaxAgeMillis,n)?[2,r]:(s.eTag=r&&r.eTag,[4,this.client.fetch(s)]);case 2:return i=t.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return t.sent(),[2,i]}})})},a);function a(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var u=((o={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",o["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",o["registration-api-key"]="Undefined API key. Check Firebase app initialization.",o["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",o["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",o["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",o["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",o["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",o["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",o["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',o["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',o["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",o["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",o),I=new f.ErrorFactory("remoteconfig","Remote Config",u);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var m=(c.prototype.fetch=function(b){return E.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v,g,y,m,_,w;return E.__generator(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=t.sent(),r=n[0],i=n[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",s=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},c={method:"POST",headers:a,body:JSON.stringify(u)},h=fetch(s,c),l=new Promise(function(t,e){b.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([h,l])];case 3:return t.sent(),[4,h];case 4:return f=t.sent(),[3,6];case 5:throw p=t.sent(),d="fetch-client-network","AbortError"===p.name&&(d="fetch-timeout"),I.create(d,{originalErrorMessage:p.message});case 6:if(v=f.status,g=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];_=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,f.json()];case 8:return _=t.sent(),[3,10];case 9:throw w=t.sent(),I.create("fetch-client-parse",{originalErrorMessage:w.message});case 10:y=_.entries,m=_.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?v=500:"NO_CHANGE"===m?v=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(y={}),304!==v&&200!==v)throw I.create("fetch-status",{httpStatus:v});return[2,{status:v,eTag:g,config:y}]}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var e})})},c);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var h=(l.prototype.addEventListener=function(t){this.listeners.push(t)},l.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},l);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(){this.listeners=[]}var p=["1","true","t","yes","y","on"],d=(v.prototype.asString=function(){return this._value},v.prototype.asBoolean=function(){return"static"!==this._source&&0<=p.indexOf(this._value.toLowerCase())},v.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},v.prototype.getSource=function(){return this._source},v);function v(t,e){void 0===e&&(e=""),this._source=t,this._value=e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _=(w.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=g.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=g.LogLevel.SILENT;break;default:this._logger.logLevel=g.LogLevel.ERROR}},Object.defineProperty(w.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),w.prototype.activate=function(){return E.__awaiter(this,void 0,void 0,function(){var e,n,r;return E.__generator(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=t.sent(),n=e[0],r=e[1],n&&n.config&&n.eTag&&n.eTag!==r?[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},w.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},w.prototype.fetch=function(){return E.__awaiter(this,void 0,void 0,function(){var r,i,o,s=this;return E.__generator(this,function(t){switch(t.label){case 0:r=new h,setTimeout(function(){return E.__awaiter(s,void 0,void 0,function(){return E.__generator(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof f.FirebaseError&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},w.prototype.fetchAndActivate=function(){return E.__awaiter(this,void 0,void 0,function(){return E.__generator(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},w.prototype.getAll=function(){var n=this;return function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(E.__assign(E.__assign({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},w.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},w.prototype.getNumber=function(t){return this.getValue(t).asNumber()},w.prototype.getString=function(t){return this.getValue(t).asString()},w.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new d("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new d("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new d("static"))},w);function w(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function b(t,e){var n=t.target.error||void 0;return I.create(e,{originalErrorMessage:n&&n.message})}var T="app_namespace_store",S="firebase_remote_config",C=1;var N=(A.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},A.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},A.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},A.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},A.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},A.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},A.prototype.getActiveConfig=function(){return this.get("active_config")},A.prototype.setActiveConfig=function(t){return this.set("active_config",t)},A.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},A.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},A.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},A.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},A.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},A.prototype.get=function(a){return E.__awaiter(this,void 0,void 0,function(){var o,s=this;return E.__generator(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(n,e){var t=o.transaction([T],"readonly").objectStore(T),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){e(b(t,"storage-get"))},i.onsuccess=function(t){var e=t.target.result;n(e?e.value:void 0)}}catch(t){e(I.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},A.prototype.set=function(a,u){return E.__awaiter(this,void 0,void 0,function(){var o,s=this;return E.__generator(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([T],"readwrite").objectStore(T),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(b(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(I.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},A.prototype.delete=function(a){return E.__awaiter(this,void 0,void 0,function(){var o,s=this;return E.__generator(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([T],"readwrite").objectStore(T),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(b(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(I.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},A.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},A);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(S,C);t.onerror=function(t){n(b(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(T,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var k=(O.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},O.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},O.prototype.getActiveConfig=function(){return this.activeConfig},O.prototype.loadFromStorage=function(){return E.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s;return E.__generator(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(i=t.sent())&&(this.lastFetchStatus=i),[4,n];case 2:return(o=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return(s=t.sent())&&(this.activeConfig=s),[2]}})})},O.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},O.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},O.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},O);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(t){this.storage=t}var R=(P.prototype.fetch=function(n){return E.__awaiter(this,void 0,void 0,function(){var e;return E.__generator(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},P.prototype.attemptFetch=function(c,t){var h=t.throttleEndTimeMillis,l=t.backoffCount;return E.__awaiter(this,void 0,void 0,function(){var s,a,u;return E.__generator(this,function(t){switch(t.label){case 0:return[4,(i=c.signal,o=h,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(I.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(c)];case 3:return s=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,s];case 5:if(!function(t){if(t instanceof f.FirebaseError){var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}}(a=t.sent()))throw a;return u={throttleEndTimeMillis:Date.now()+(e=l,n=1e3*Math.pow(2,e),r=Math.round(.5*n*(Math.random()-.5)*2),Math.min(144e5,n+r)),backoffCount:l+1},[4,this.storage.setThrottleMetadata(u)];case 6:return t.sent(),[2,this.attemptFetch(c,u)];case 7:return[2]}var e,n,r,i,o;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */})})},P);function P(t,e){this.client=t,this.storage=e}var D="@firebase/remote-config";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function x(v){v.INTERNAL.registerComponent(new s.Component("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw I.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw I.create("registration-project-id");if(!s)throw I.create("registration-api-key");if(!a)throw I.create("registration-app-id");e=e||"firebase";var u=new N(a,n.name,e),c=new k(u),h=new g.Logger(D);h.logLevel=g.LogLevel.ERROR;var l=new m(r,v.SDK_VERSION,e,o,s,a),f=new R(l,u),p=new y(f,u,c,h),d=new _(n,p,c,u,h);return d.ensureInitialized(),d},"PUBLIC").setMultipleInstances(!0)),v.registerVersion(D,"0.1.24")}x(i),e.registerRemoteConfig=x},"S+S0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=n("mrSG"),i=n("zVF4"),r=(o.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},o.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},o.prototype.setServiceProps=function(t){return this.serviceProps=t,this},o);function o(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var l="[DEFAULT]",s=(a.prototype.get=function(t){void 0===t&&(t=l);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},a.prototype.getImmediate=function(t){var e=h.__assign({identifier:l,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},a.prototype.getComponent=function(){return this.component},a.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(l)}catch(t){}try{for(var r=h.__values(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=h.__read(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},a.prototype.clearInstance=function(t){void 0===t&&(t=l),this.instancesDeferred.delete(t),this.instances.delete(t)},a.prototype.delete=function(){return h.__awaiter(this,void 0,void 0,function(){var e;return h.__generator(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))];case 1:return t.sent(),[2]}})})},a.prototype.isComponentSet=function(){return null!=this.component},a.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===l?void 0:e),this.instances.set(t,n)),n||null},a.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:l},a);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var u=(c.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},c.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},c.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},c.prototype.getProviders=function(){return Array.from(this.providers.values())},c);function c(t){this.name=t,this.providers=new Map}e.Component=r,e.ComponentContainer=u,e.Provider=s},bQlE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;n("fSjL");var o,s,a,u,c=n("mrSG"),h=n("zVF4"),l=n("q/0M"),f=n("S+S0"),p="0.3.8",d="FB-PERF-TRACE-MEASURE",v="@firebase/performance/config",g="@firebase/performance/configexpire",y="Performance",m=((o={})["trace started"]="Trace {$traceName} was started before.",o["trace stopped"]="Trace {$traceName} is not running.",o["no window"]="Window is not available.",o["no app id"]="App id is not available.",o["no project id"]="Project id is not available.",o["no api key"]="Api key is not available.",o["invalid cc log"]="Attempted to queue invalid cc event",o["FB not default"]="Performance can only start when Firebase app instance is the default one.",o["RC response not ok"]="RC response is not ok",o["invalid attribute name"]="Attribute name {$attributeName} is invalid.",o["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",o["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",o["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",o),_=new h.ErrorFactory("performance",y,m),w=(b.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},b.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},b.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},b.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},b.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},b.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},b.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},b.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},b.getInstance=function(){return void 0===s&&(s=new b(a)),s},b);function b(t){if(!(this.window=t))throw _.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function E(t,e){var n=t.length-e.length;if(n<0||1<n)throw _.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I,T,S,C=(N.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw _.create("no app id");return t},N.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw _.create("no project id");return t},N.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw _.create("no api key");return t},N.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},N.getInstance=function(){return void 0===u&&(u=new N),u},N);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=E("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=E("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(S=T=T||{})[S.UNKNOWN=0]="UNKNOWN",S[S.VISIBLE=1]="VISIBLE",S[S.HIDDEN=2]="HIDDEN";var A=["firebase_","google_","ga_"],k=new RegExp("^[a-zA-Z]\\w*$");function O(){switch(w.getInstance().document.visibilityState){case"visible":return T.VISIBLE;case"hidden":return T.HIDDEN;default:return T.UNKNOWN}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var R=new l.Logger(y);R.logLevel=l.LogLevel.INFO;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var P="0.0.1",D={loggingEnabled:!0},x="FIREBASE_INSTALLATIONS_AUTH";function L(t){var r,e=function(){var t=w.getInstance().localStorage;if(!t)return;var e=t.getItem(g);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(v);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(F(e),Promise.resolve()):(r=t,function(){var t=C.getInstance().installationsService.getToken();return t.then(function(t){}),t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+C.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+C.getInstance().getApiKey(),n=new Request(e,{method:"POST",headers:{Authorization:x+" "+t},body:JSON.stringify({app_instance_id:r,app_instance_id_token:t,app_id:C.getInstance().getAppId(),app_version:p,sdk_version:P})});return fetch(n).then(function(t){if(t.ok)return t.json();throw _.create("RC response not ok")})}).catch(function(){R.info(M)}).then(F).then(function(t){var e=w.getInstance().localStorage;if(!t||!e)return;e.setItem(v,JSON.stringify(t)),e.setItem(g,String(Date.now()+60*C.getInstance().configTimeToLive*60*1e3))},function(){}))}var M="Could not fetch config, will use default configs";function F(t){if(!t)return t;var e=C.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):D.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=U(e.tracesSamplingRate),e.logNetworkAfterSampling=U(e.networkRequestsSamplingRate),t}function U(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j,V=1;function q(){return V=2,j=j||function(){var n=w.getInstance().document;return new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()})}().then(function(){return(t=C.getInstance().installationsService.getId()).then(function(t){I=t}),t;var t}).then(L).then(B,B)}function B(){V=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W,H=1e4,G=5500,Q=3,K=Q,z=[],X=!1;function Y(t){setTimeout(function(){if(0!==K)return z.length?void function(){var t=c.__spreadArrays(z);z=[];var e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});(function(t,i){return function(t){var e=C.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||R.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=H;isNaN(e)||(n=Math.max(e,n));var r=t.logResponseDetails;Array.isArray(r)&&0<r.length&&"RETRY_REQUEST_LATER"===r[0].responseAction&&(z=c.__spreadArrays(i,z),R.info("Retry transport request later.")),K=Q,Y(n)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:C.getInstance().logSource,log_event:e},t).catch(function(){z=c.__spreadArrays(t,z),K--,R.info("Tries left: "+K+"."),Y(H)})}():Y(H)},t)}function J(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw _.create("invalid cc log");z=c.__spreadArrays(z,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t,e){(W=W||J(et))(t,e)}function Z(t){var e=C.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&w.getInstance().requiredApisAvailable()&&(t.isAuto&&O()!==T.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===V?tt(t):q().then(function(){return tt(t)},function(){return tt(t)})))}function tt(t){I&&setTimeout(function(){return $(t,1)},0)}function et(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:nt(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:nt(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function nt(){return{google_app_id:C.getInstance().getAppId(),app_instance_id:I,web_app_info:{sdk_version:p,page_url:w.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=w.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:O(),effective_connection_type:function(){var t=w.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt=["_fp","_fcp","_fid"];
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var it=(ot.prototype.start=function(){if(1!==this.state)throw _.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},ot.prototype.stop=function(){if(2!==this.state)throw _.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Z(this)},ot.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=c.__assign({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Z(this)},ot.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e},ot.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<rt.indexOf(n))&&n.startsWith("_"))throw _.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=e},ot.prototype.getMetric=function(t){return this.counters[t]||0},ot.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length||A.some(function(t){return n.startsWith(t)})||!n.match(k)),o=0!==(r=e).length&&r.length<=100;if(i&&o)this.customAttributes[t]=e;else{if(!i)throw _.create("invalid attribute name",{attributeName:t});if(!o)throw _.create("invalid attribute value",{attributeValue:e})}},ot.prototype.getAttribute=function(t){return this.customAttributes[t]},ot.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},ot.prototype.getAttributes=function(){return c.__assign({},this.customAttributes)},ot.prototype.setStartTime=function(t){this.startTimeUs=t},ot.prototype.setDuration=function(t){this.durationUs=t},ot.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},ot.createOobTrace=function(t,e,n){var r,i,o,s,a=w.getInstance().getUrl();a&&(r=new ot("_wt_"+a,!0),i=Math.floor(1e3*w.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((o=e.find(function(t){return"first-paint"===t.name}))&&o.startTime&&r.putMetric("_fp",Math.floor(1e3*o.startTime)),(s=e.find(function(t){return"first-contentful-paint"===t.name}))&&s.startTime&&r.putMetric("_fcp",Math.floor(1e3*s.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),Z(r))},ot.createUserTimingTrace=function(t){Z(new ot(t,!1,t))},ot);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=w.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||d+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function st(t){var e,n,r,i,o,s,a,u,c,h,l=t;l&&void 0!==l.responseStart&&(e=w.getInstance().getTimeOrigin(),n=Math.floor(1e3*(l.startTime+e)),r=l.responseStart?Math.floor(1e3*(l.responseStart-l.startTime)):void 0,i=Math.floor(1e3*(l.responseEnd-l.startTime)),o={url:l.name&&l.name.split("?")[0],responsePayloadBytes:l.transferSize,startTimeUs:n,timeToResponseInitiatedUs:r,timeToResponseCompletedUs:i},s=o,(h=C.getInstance()).instrumentationEnabled&&(a=s.url,u=h.logEndPointUrl.split("?")[0],c=h.flTransportEndpointUrl.split("?")[0],a!==u&&a!==c&&h.loggingEnabled&&h.logNetworkAfterSampling&&setTimeout(function(){return $(s,0)},0)))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at=5e3;function ut(){I&&(setTimeout(function(){var t=w.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");{var r;t.onFirstInputDelay?(r=setTimeout(function(){it.createOobTrace(e,n),r=void 0},at),t.onFirstInputDelay(function(t){r&&(clearTimeout(r),it.createOobTrace(e,n,t))})):it.createOobTrace(e,n)}},0),setTimeout(function(){for(var t=w.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){st(r[n])}t.setupObserver("resource",st)},0),setTimeout(function(){for(var t=w.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){ct(r[n])}t.setupObserver("measure",ct)},0))}function ct(t){var e=t.name;e.substring(0,d.length)!==d&&it.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht=(lt.prototype.trace=function(t){return new it(t)},Object.defineProperty(lt.prototype,"instrumentationEnabled",{get:function(){return C.getInstance().instrumentationEnabled},set:function(t){C.getInstance().instrumentationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(lt.prototype,"dataCollectionEnabled",{get:function(){return C.getInstance().dataCollectionEnabled},set:function(t){C.getInstance().dataCollectionEnabled=t},enumerable:!0,configurable:!0}),lt);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t){this.app=t,w.getInstance().requiredApisAvailable()?(X||(Y(G),X=!0),q().then(ut,ut)):R.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}function ft(t){function r(t,e){if("[DEFAULT]"!==t.name)throw _.create("FB not default");if("undefined"==typeof window)throw _.create("no window");return a=window,C.getInstance().firebaseAppInstance=t,C.getInstance().installationsService=e,new ht(t)}t.INTERNAL.registerComponent(new f.Component("performance",function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return r(e,n)},"PUBLIC")),t.registerVersion("@firebase/performance","0.3.8")}ft(i),e.registerPerformance=ft},fSjL:function(t,e,n){"use strict";n.r(e),n.d(e,"registerInstallations",function(){return nt});var r,i=n("wj3C"),o=n.n(i),s=n("S+S0"),p=n("mrSG"),a=n("zVF4"),u=n("nbvr"),c="@firebase/installations",h="0.4.13",l=1e4,d="w:"+h,f="FIS_v2",v="https://firebaseinstallations.googleapis.com/v1",g=36e5,y=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["not-registered"]="Firebase Installation is not registered.",r["installation-not-found"]="Firebase Installation not found.",r["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',r["app-offline"]="Could not process request. Application offline.",r["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",r),m=new a.ErrorFactory("installations","Installations",y);function _(t){return t instanceof a.FirebaseError&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(t){var e=t.projectId;return v+"/projects/"+e+"/installations"}function b(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function E(r,i){return Object(p.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return[4,i.json()];case 1:return e=t.sent(),n=e.error,[2,m.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}})})}function I(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function T(t,e){var n=e.refreshToken,r=I(t);return r.append("Authorization",f+" "+n),r}function S(n){return Object(p.__awaiter)(this,void 0,void 0,function(){var e;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function C(e){return new Promise(function(t){setTimeout(t,e)})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var N=/^[cdef][\w-]{21}$/,A="";function k(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return btoa(String.fromCharCode.apply(String,Object(p.__spread)(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return N.test(e)?e:A}catch(t){return A}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function O(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R=new Map;function P(t,e){var n=O(t);D(n,e),function(t,e){var n=L();n&&n.postMessage({key:t,fid:e});M()}(n,e)}function D(t,e){var n,r,i=R.get(t);if(i)try{for(var o=Object(p.__values)(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var x=null;function L(){return!x&&"BroadcastChannel"in self&&((x=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){D(t.data.key,t.data.fid)}),x}function M(){0===R.size&&x&&(x.close(),x=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F="firebase-installations-database",U=1,j="firebase-installations-store",V=null;function q(){return V=V||Object(u.openDb)(F,U,function(t){switch(t.oldVersion){case 0:t.createObjectStore(j)}})}function B(s,a){return Object(p.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return e=O(s),[4,q()];case 1:return n=t.sent(),r=n.transaction(j,"readwrite"),[4,(i=r.objectStore(j)).get(e)];case 2:return o=t.sent(),[4,i.put(a,e)];case 3:return t.sent(),[4,r.complete];case 4:return t.sent(),o&&o.fid===a.fid||P(s,a.fid),[2,a]}})})}function W(i){return Object(p.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return e=O(i),[4,q()];case 1:return n=t.sent(),[4,(r=n.transaction(j,"readwrite")).objectStore(j).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}function H(a,u){return Object(p.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return e=O(a),[4,q()];case 1:return n=t.sent(),r=n.transaction(j,"readwrite"),[4,(i=r.objectStore(j)).get(e)];case 2:return o=t.sent(),void 0!==(s=u(o))?[3,4]:[4,i.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,i.put(s,e)];case 5:t.sent(),t.label=6;case 6:return[4,r.complete];case 7:return t.sent(),!s||o&&o.fid===s.fid||P(a,s.fid),[2,s]}})})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(i){return Object(p.__awaiter)(this,void 0,void 0,function(){var r,e,n;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return[4,H(i,function(t){var e=K(t||{fid:k(),registrationStatus:0}),n=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(o){return Object(p.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return[4,Q(o)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,C(100)];case 3:return t.sent(),[4,Q(o)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,G(o)];case 6:return n=t.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(m.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function(r,i){return Object(p.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(a,t){var u=t.fid;return Object(p.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return e=w(a),n=I(a),r={fid:u,authVersion:f,appId:a.appId,sdkVersion:d},i={method:"POST",headers:n,body:JSON.stringify(r)},[4,S(function(){return fetch(e,i)})];case 1:return(o=t.sent()).ok?[4,o.json()]:[3,3];case 2:return s=t.sent(),[2,{fid:s.fid||u,registrationStatus:2,refreshToken:s.refreshToken,authToken:b(s.authToken)}];case 3:return[4,E("Create Installation",o)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,B(r,e)];case 2:return _(n=t.sent())&&409===n.serverCode?[4,W(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,B(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,r);return{installationEntry:r,registrationPromise:i}}}(i,e);return r=n.registrationPromise,n.installationEntry})];case 1:return(e=t.sent()).fid!==A?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=t.sent(),n)];case 3:return[2,{installationEntry:e,registrationPromise:r}]}})})}function Q(t){return H(t,function(t){if(!t)throw m.create("installation-not-found");return K(t)})}function K(t){return 1===(e=t).registrationStatus&&e.registrationTime+l<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function z(t,h){var l=t.appConfig,f=t.platformLoggerProvider;return Object(p.__awaiter)(this,void 0,void 0,function(){var r,i,o,s,a,u,c;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return e=l,n=h.fid,r=w(e)+"/"+n+"/authTokens:generate",i=T(l,h),(o=f.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:d}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,S(function(){return fetch(r,a)})];case 1:return(u=t.sent()).ok?[4,u.json()]:[3,3];case 2:return c=t.sent(),[2,b(c)];case 3:return[4,E("Generate Auth Token",u)];case 4:throw t.sent()}var e,n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */})})}function X(a,u){return void 0===u&&(u=!1),Object(p.__awaiter)(this,void 0,void 0,function(){var s,e,n;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return[4,H(a.appConfig,function(t){if(!J(t))throw m.create("not-registered");var e,n,r,i=t.authToken;if(u||2!==(r=i).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+g}(r)){if(1===i.requestStatus)return s=function(r,i){return Object(p.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return[4,Y(r.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,C(100)];case 3:return t.sent(),[4,Y(r.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(n=e.authToken).requestStatus?[2,X(r,i)]:[2,n]}})})}(a,u),t;if(!navigator.onLine)throw m.create("app-offline");var o=(e=t,n={requestStatus:1,requestTime:Date.now()},Object(p.__assign)(Object(p.__assign)({},e),{authToken:n}));return s=function(i,o){return Object(p.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,z(i,o)];case 1:return e=t.sent(),r=Object(p.__assign)(Object(p.__assign)({},o),{authToken:e}),[4,B(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!_(n=t.sent())||401!==n.serverCode&&404!==n.serverCode?[3,5]:[4,W(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=Object(p.__assign)(Object(p.__assign)({},o),{authToken:{requestStatus:0}}),[4,B(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(a,o),o}return t})];case 1:return e=t.sent(),s?[4,s]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function Y(t){return H(t,function(t){if(!J(t))throw m.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+l<Date.now()?Object(p.__assign)(Object(p.__assign)({},t),{authToken:{requestStatus:0}}):t})}function J(t){return void 0!==t&&2===t.registrationStatus}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $(e,n){return void 0===n&&(n=!1),Object(p.__awaiter)(this,void 0,void 0,function(){return Object(p.__generator)(this,function(t){switch(t.label){case 0:return[4,function(n){return Object(p.__awaiter)(this,void 0,void 0,function(){var e;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return[4,G(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.appConfig)];case 1:return t.sent(),[4,X(e,n)];case 2:return[2,t.sent().token]}})})}function Z(a,u){return Object(p.__awaiter)(this,void 0,void 0,function(){var r,i,o,s;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return e=a,n=u.fid,r=w(e)+"/"+n,i=T(a,u),o={method:"DELETE",headers:i},[4,S(function(){return fetch(r,o)})];case 1:return(s=t.sent()).ok?[3,3]:[4,E("Delete Installation",s)];case 2:throw t.sent();case 3:return[2]}var e,n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */})})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tt(t,r){var i=t.appConfig;return function(t,e){L();var n=O(t),r=R.get(n);r||(r=new Set,R.set(n,r)),r.add(e)}(i,r),function(){var t,e,n;t=r,e=O(i),(n=R.get(e))&&(n.delete(t),0===n.size&&R.delete(e),M())}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t){return m.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t){t.INTERNAL.registerComponent(new s.Component("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw et("App Configuration");if(!t.name)throw et("App Name");try{for(var r=Object(p.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw et(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return function(i){return Object(p.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return[4,G(i.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):X(i).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return $(n,t)},delete:function(){return function(r){return Object(p.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(p.__generator)(this,function(t){switch(t.label){case 0:return[4,H(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw m.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw m.create("app-offline");case 3:return[4,Z(e,n)];case 4:return t.sent(),[4,W(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return tt(n,t)}}},"PUBLIC")),t.registerVersion(c,h)}nt(o.a)},gHGA:function(t,e,n){"use strict";n.r(e);var r,i=n("wj3C"),o=n.n(i),s=(n("fSjL"),n("S+S0")),d=n("mrSG"),a=n("zVF4"),u=n("nbvr"),c=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["only-available-in-window"]="This method is available in a Window context.",r["only-available-in-sw"]="This method is available in a service worker context.",r["permission-default"]="The notification permission was not granted and dismissed instead.",r["permission-blocked"]="The notification permission was not granted and blocked instead.",r["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",r["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",r["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",r["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",r["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",r["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",r["token-update-no-token"]="FCM returned no token when updating the user to push.",r["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",r["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",r["invalid-vapid-key"]="The public VAPID key must be a string.",r["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",r),v=new a.ErrorFactory("messaging","Messaging",c);function h(t){return v.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(d.__spread)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var l="fcm_token_details_db",f=5,p="fcm_token_object_Store";function y(a){return Object(d.__awaiter)(this,void 0,void 0,function(){var e,s,n=this;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(l))return[2,null];t.label=2;case 2:return s=null,[4,Object(u.openDb)(l,f,function(o){return Object(d.__awaiter)(n,void 0,void 0,function(){var e,n,r,i;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return o.oldVersion<2?[2]:o.objectStoreNames.contains(p)?[4,(e=o.transaction.objectStore(p)).index("fcmSenderId").get(a)]:[2];case 1:return n=t.sent(),[4,e.clear()];case 2:if(t.sent(),!n)return[2];if(2===o.oldVersion){if(!(r=n).auth||!r.p256dh||!r.endpoint)return[2];s={token:r.fcmToken,createTime:null!==(i=r.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:r.auth,p256dh:r.p256dh,endpoint:r.endpoint,swScope:r.swScope,vapidKey:"string"==typeof r.vapidKey?r.vapidKey:g(r.vapidKey)}}}else(3===o.oldVersion||4===o.oldVersion)&&(s={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:g(r.auth),p256dh:g(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:g(r.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,Object(u.deleteDb)(l)];case 4:return t.sent(),[4,Object(u.deleteDb)("fcm_vapid_details_db")];case 5:return t.sent(),[4,Object(u.deleteDb)("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(s)?s:null]}})})}var m="firebase-messaging-database",_=1,w="firebase-messaging-store",b=null;function E(){return b=b||Object(u.openDb)(m,_,function(t){switch(t.oldVersion){case 0:t.createObjectStore(w)}})}function I(i){return Object(d.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return e=S(i),[4,E()];case 1:return[4,t.sent().transaction(w).objectStore(w).get(e)];case 2:return(n=t.sent())?[2,n]:[3,3];case 3:return[4,y(i.appConfig.senderId)];case 4:return(r=t.sent())?[4,T(i,r)]:[3,6];case 5:return t.sent(),[2,r];case 6:return[2]}})})}function T(i,o){return Object(d.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return e=S(i),[4,E()];case 1:return n=t.sent(),[4,(r=n.transaction(w,"readwrite")).objectStore(w).put(o,e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2,o]}})})}function S(t){return t.appConfig.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",N="https://fcmregistrations.googleapis.com/v1",A="google.c.a.c_id";function k(s,a){return Object(d.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return[4,R(s)];case 1:e=t.sent(),n={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(O(s.appConfig)+"/"+a,n)];case 3:return[4,t.sent().json()];case 4:if((r=t.sent()).error)throw i=r.error.message,v.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw o=t.sent(),v.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function O(t){var e=t.projectId;return N+"/projects/"+e+"/registrations"}function R(t){var n=t.appConfig,r=t.installations;return Object(d.__awaiter)(this,void 0,void 0,function(){var e;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function P(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==C&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D,x;function L(l,f,p){return Object(d.__awaiter)(this,void 0,void 0,function(){var a,u,c,h;return Object(d.__generator)(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw v.create("permission-blocked");return[4,function(n,r){return Object(d.__awaiter)(this,void 0,void 0,function(){var e;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}(r)})]}})})}(f,p)];case 1:return a=t.sent(),[4,I(l)];case 2:return u=t.sent(),c={vapidKey:p,swScope:f.scope,endpoint:a.endpoint,auth:g(a.getKey("auth")),p256dh:g(a.getKey("p256dh"))},u?[3,3]:[2,F(l,c)];case 3:if(e=u.subscriptionOptions,r=(n=c).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,s=n.p256dh===e.p256dh,r&&i&&o&&s)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,k(l,u.token)];case 5:return t.sent(),[3,7];case 6:return h=t.sent(),console.warn(h),[3,7];case 7:return[2,F(l,c)];case 8:return Date.now()>=u.createTime+6048e5?[2,function(i,o,s){return Object(d.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(a,u){return Object(d.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return[4,R(a)];case 1:e=t.sent(),n=P(u.subscriptionOptions),r={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(O(a.appConfig)+"/"+u.token,r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),v.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,v.create("token-update-failed",{errorInfo:s});if(!i.token)throw v.create("token-update-no-token");return[2,i.token]}})})}(o,i)];case 1:return e=t.sent(),n=Object(d.__assign)({token:e,createTime:Date.now()},i),[4,T(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,M(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:u.token,createTime:Date.now(),subscriptionOptions:c},l,f)]:[2,u.token];case 9:return[2]}var e,n,r,i,o,s;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */})})}function M(r,i){return Object(d.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return[4,I(r)];case 1:return(e=t.sent())?[4,k(r,e.token)]:[3,4];case 2:return t.sent(),[4,function(i){return Object(d.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return e=S(i),[4,E()];case 1:return n=t.sent(),[4,(r=n.transaction(w,"readwrite")).objectStore(w).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}(r)];case 3:t.sent(),t.label=4;case 4:return[4,i.pushManager.getSubscription()];case 5:return(n=t.sent())?[2,n.unsubscribe()]:[2,!0]}})})}function F(r,i){return Object(d.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return[4,
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(a,u){return Object(d.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return[4,R(a)];case 1:e=t.sent(),n=P(u),r={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(O(a.appConfig),r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),v.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,v.create("token-subscribe-failed",{errorInfo:s});if(!i.token)throw v.create("token-subscribe-no-token");return[2,i.token]}})})}(r,i)];case 1:return e=t.sent(),n={token:e,createTime:Date.now(),subscriptionOptions:i},[4,T(r,n)];case 2:return t.sent(),[2,n.token]}})})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function U(t){return"object"==typeof t&&t&&A in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(x=D=D||{}).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked";var j=(Object.defineProperty(V.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),V.prototype.getToken=function(){return Object(d.__awaiter)(this,void 0,void 0,function(){var e;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return this.vapidKey||(this.vapidKey=C),[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),"default"!==Notification.permission?[3,3]:[4,Notification.requestPermission()];case 2:t.sent(),t.label=3;case 3:if("granted"!==Notification.permission)throw v.create("permission-blocked");return[2,L(this.firebaseDependencies,e,this.vapidKey)]}})})},V.prototype.deleteToken=function(){return Object(d.__awaiter)(this,void 0,void 0,function(){var e;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),[2,M(this.firebaseDependencies,e)]}})})},V.prototype.requestPermission=function(){return Object(d.__awaiter)(this,void 0,void 0,function(){var e;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?v.create("permission-blocked"):v.create("permission-default")}})})},V.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw v.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw v.create("invalid-vapid-key");this.vapidKey=t},V.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw v.create("invalid-sw-registration");if(this.swRegistration)throw v.create("use-sw-after-get-token");this.swRegistration=t},V.prototype.onMessage=function(t){var e=this;return this.onMessageCallback="function"==typeof t?t:t.next,function(){e.onMessageCallback=null}},V.prototype.setBackgroundMessageHandler=function(){throw v.create("only-available-in-sw")},V.prototype.onTokenRefresh=function(){return function(){}},V.prototype.getServiceWorkerRegistration=function(){return Object(d.__awaiter)(this,void 0,void 0,function(){var e,n;return Object(d.__generator)(this,function(t){switch(t.label){case 0:if(this.swRegistration)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 2:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,4];case 3:throw n=t.sent(),v.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 4:return[2,this.swRegistration]}})})},V.prototype.messageEventListener=function(o){var s;return Object(d.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return null!==(s=o.data)&&void 0!==s&&s.firebaseMessaging?(e=o.data.firebaseMessaging,n=e.type,r=e.payload,this.onMessageCallback&&n===D.PUSH_RECEIVED&&this.onMessageCallback(r),U(i=r.data)&&"1"===i["google.c.a.e"]?[4,this.logEvent(n,i)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},V.prototype.logEvent=function(n,r){return Object(d.__awaiter)(this,void 0,void 0,function(){var e;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case D.NOTIFICATION_CLICKED:return"notification_open";case D.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[A],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},V);function V(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var q=(Object.defineProperty(B.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),B.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw v.create("invalid-bg-handler");this.bgMessageHandler=t},B.prototype.getToken=function(){var n,r;return Object(d.__awaiter)(this,void 0,void 0,function(){var e;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,I(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(r=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:C,t.label=2;case 2:return[2,L(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},B.prototype.deleteToken=function(){return M(this.firebaseDependencies,self.registration)},B.prototype.requestPermission=function(){throw v.create("only-available-in-window")},B.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw v.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw v.create("invalid-vapid-key");this.vapidKey=t},B.prototype.useServiceWorker=function(){throw v.create("only-available-in-window")},B.prototype.onMessage=function(){throw v.create("only-available-in-window")},B.prototype.onTokenRefresh=function(){throw v.create("only-available-in-window")},B.prototype.onPush=function(i){return Object(d.__awaiter)(this,void 0,void 0,function(){var e,n,r;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(i))?[4,W()]:[2];case 1:return(n=t.sent()).some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})?[2,function(t,e){var n,r,i=H(D.PUSH_RECEIVED,e);try{for(var o=Object(d.__values)(t),s=o.next();!s.done;s=o.next())s.value.postMessage(i)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(n,e)]:(r=function(t){var e;if(t&&"object"==typeof t.notification){var n=Object(d.__assign)({},t.notification);return n.data=Object(d.__assign)(Object(d.__assign)({},t.notification.data),((e={}).FCM_MSG=t,e)),n}}(e))?[4,function(t){var e,n=null!==(e=t.title)&&void 0!==e?e:"",r=t.actions,i=Notification.maxActions;return r&&i&&r.length>i&&console.warn("This browser only supports "+i+" actions. The remaining actions will not be displayed."),self.registration.showNotification(n,t)}(r)]:[3,3];case 2:return t.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:t.sent(),t.label=5;case 5:return[2]}})})},B.prototype.onSubChange=function(n){var r,i;return Object(d.__awaiter)(this,void 0,void 0,function(){var e;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,M(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,I(this.firebaseDependencies)];case 3:return e=t.sent(),[4,M(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,L(this.firebaseDependencies,self.registration,null!==(i=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==i?i:C)];case 5:return t.sent(),[2]}})})},B.prototype.onNotificationClick=function(s){var a,u;return Object(d.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return!(n=null===(u=null===(a=s.notification)||void 0===a?void 0:a.data)||void 0===u?void 0:u.FCM_MSG)||s.action?[2]:(s.stopImmediatePropagation(),s.notification.close(),(r=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(U(t.data)?self.location.origin:null)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n))?[4,function(u){return Object(d.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Object(d.__generator)(this,function(t){switch(t.label){case 0:return e=new URL(u,self.location.href),[4,W()];case 1:n=t.sent();try{for(r=Object(d.__values)(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).host===e.host)return[2,o]}catch(t){s={error:t}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}return[2,null]}})})}(r)]:[2]);case 1:return(i=t.sent())?[3,4]:[4,self.clients.openWindow(r)];case 2:return i=t.sent(),[4,(e=3e3,new Promise(function(t){setTimeout(t,e)}))];case 3:return t.sent(),[3,6];case 4:return[4,i.focus()];case 5:i=t.sent(),t.label=6;case 6:return i?(o=H(D.NOTIFICATION_CLICKED,n),[2,i.postMessage(o)]):[2]}var e})})},B);function B(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function W(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function H(t,e){return{firebaseMessaging:{type:t,payload:e}}}var G={isSupported:Q};function Q(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}o.a.INTERNAL.registerComponent(new s.Component("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){var e,n;if(!t||!t.options)throw h("App Configuration Object");if(!t.name)throw h("App Name");var r=t.options;try{for(var i=Object(d.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw h(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!Q())throw v.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?q:j)(n)},"PUBLIC").setServiceProps(G))},iqUP:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;n("t6oF"),n("NSPt"),n("6Joi"),n("ABqa"),n("gHGA"),n("LmZi"),n("bQlE"),n("3Kre"),n("O1kn");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i.registerVersion("firebase","7.15.5","app");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),i.registerVersion("firebase","7.15.5"),t.exports=i},"q/0M":function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function s(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r;n.r(e),n.d(e,"LogLevel",function(){return a}),n.d(e,"Logger",function(){return f}),n.d(e,"setLogLevel",function(){return d}),n.d(e,"setUserLogHandler",function(){return v});var a,i,o=[];(i=a=a||{})[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";function u(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=l[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,s(["["+i+"]  "+t.name+":"],n))}}var c={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},h=a.INFO,l=((r={})[a.DEBUG]="log",r[a.VERBOSE]="log",r[a.INFO]="info",r[a.WARN]="warn",r[a.ERROR]="error",r),f=(Object.defineProperty(p.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in a))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!0,configurable:!0}),p.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?c[t]:t},Object.defineProperty(p.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),p.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.DEBUG],t)),this._logHandler.apply(this,s([this,a.DEBUG],t))},p.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.VERBOSE],t)),this._logHandler.apply(this,s([this,a.VERBOSE],t))},p.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.INFO],t)),this._logHandler.apply(this,s([this,a.INFO],t))},p.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.WARN],t)),this._logHandler.apply(this,s([this,a.WARN],t))},p.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.ERROR],t)),this._logHandler.apply(this,s([this,a.ERROR],t))},p);function p(t){this.name=t,this._logLevel=h,this._logHandler=u,this._userLogHandler=null,o.push(this)}function d(e){o.forEach(function(t){t.setLogLevel(e)})}function v(s,e){for(var t=0,n=o;t<n.length;t++){!function(t){var o=null;e&&e.level&&(o=c[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:a[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}}},t6oF:function(t,e,n){"use strict";n.r(e),function(zl){var t=n("wj3C"),Xl=n.n(t);(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof zl&&zl,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},s.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.u(t):this.h(t)}},s.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},s.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Oa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Oa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Oa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),!(o=e.next()).done;);})},s});var h=h||{},p=this||self,d=/^[\w+/_-]+[=]{0,2}$/,v=null;function s(){}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function l(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){return"function"==n(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function r(t){return Object.prototype.hasOwnProperty.call(t,e)&&t[e]||(t[e]=++i)}var e="closure_uid_"+(1e9*Math.random()>>>0),i=0;function a(t,e,n){return t.call.apply(t.bind,arguments)}function y(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:y).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var w=Date.now||function(){return+new Date};function b(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t,e,n){this.code=S+t,this.message=e||C[t]||"",this.a=n||null}function I(t){var e=t&&t.code;return e?new E(e.substring(S.length),t.message,t.serverResponse):null}b(E,Error),E.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},E.prototype.toJSON=function(){return this.v()};var T,S="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function A(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function k(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function O(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,O):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");O.call(this,n+t[r])}function P(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function D(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function x(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function L(){this.b=this.a=null}T=A("__EID__")?"__EID__":void 0,b(O,Error),O.prototype.name="CustomError",b(R,O),R.prototype.name="AssertionError",D.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var M=new D(function(){return new F},function(t){t.reset()});function F(){this.next=this.b=this.a=null}L.prototype.add=function(t,e){var n=M.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},F.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},F.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},j=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var V=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++){a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n))}return i},q=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},B=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function W(t,e){return 0<=U(t,e)}function H(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function Q(t){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var z,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Y=/&/g,J=/</g,$=/>/g,Z=/"/g,tt=/'/g,et=/\x00/g,nt=/[\x00&<>"']/;function rt(t,e){return-1!=t.indexOf(e)}function it(t,e){return t<e?-1:e<t?1:0}t:{var ot=p.navigator;if(ot){var st=ot.userAgent;if(st){z=st;break t}}z=""}function at(t){return rt(z,t)}function ut(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ct(t){for(var e in t)return;return 1}function ht(t){var e,n={};for(e in t)n[e]=t[e];return n}var lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<lt.length;o++)n=lt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function pt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||p).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;P("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function dt(t,e){this.a=t===yt&&e||"",this.b=gt}function vt(t){return t instanceof dt&&t.constructor===dt&&t.b===gt?t.a:(P("expected object of type Const, got '"+t+"'"),"type_error:Const")}dt.prototype.ra=!0,dt.prototype.qa=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var gt={},yt={},mt=new dt(yt,"");function _t(t,e){this.a=t===St&&e||"",this.b=Tt}function wt(t){return t instanceof _t&&t.constructor===_t&&t.b===Tt?t.a:(P("expected object of type TrustedResourceUrl, got '"+t+"' of type "+n(t)),"type_error:TrustedResourceUrl")}function bt(t,n){var r=vt(t);if(!It.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(Et,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof dt?vt(t):encodeURIComponent(String(t))}),new _t(St,t)}_t.prototype.ra=!0,_t.prototype.qa=function(){return this.a.toString()},_t.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Et=/%{(\w+)}/g,It=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Tt={},St={};function Ct(t,e){this.a=t===Rt&&e||"",this.b=Ot}function Nt(t){return t instanceof Ct&&t.constructor===Ct&&t.b===Ot?t.a:(P("expected object of type SafeUrl, got '"+t+"' of type "+n(t)),"type_error:SafeUrl")}Ct.prototype.ra=!0,Ct.prototype.qa=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var At=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function kt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.ra?t.qa():String(t),At.test(t)||(t="about:invalid#zClosurez"),new Ct(Rt,t))}var Ot={},Rt={};function Pt(){this.a="",this.b=xt}function Dt(t){return t instanceof Pt&&t.constructor===Pt&&t.b===xt?t.a:(P("expected object of type SafeHtml, got '"+t+"' of type "+n(t)),"type_error:SafeHtml")}Pt.prototype.ra=!0,Pt.prototype.qa=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var xt={};function Lt(t){var e=new Pt;return e.a=t,e}Lt("<!DOCTYPE html>");var Mt=Lt("");function Ft(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ut(t){return nt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Y,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(J,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace($,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(Z,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(tt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(et,"&#0;"))),t}function jt(t){return jt[" "](t),t}Lt("<br>"),jt[" "]=s;var Vt,qt,Bt=at("Opera"),Wt=at("Trident")||at("MSIE"),Ht=at("Edge"),Gt=Ht||Wt,Qt=at("Gecko")&&!(rt(z.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),Kt=rt(z.toLowerCase(),"webkit")&&!at("Edge");function zt(){var t=p.document;return t?t.documentMode:void 0}t:{var Xt="",Yt=(qt=z,Qt?/rv:([^\);]+)(\)|;)/.exec(qt):Ht?/Edge\/([\d\.]+)/.exec(qt):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(qt):Kt?/WebKit\/(\S+)/.exec(qt):Bt?/(?:Version)[ \/]?(\S+)/.exec(qt):void 0);if(Yt&&(Xt=Yt?Yt[1]:""),Wt){var Jt=zt();if(null!=Jt&&Jt>parseFloat(Xt)){Vt=String(Jt);break t}}Vt=Xt}var $t,Zt={};function te(a){return t=a,e=function(){for(var t=0,e=X(String(Vt)).split("."),n=X(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=it(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||it(0==o[2].length,0==s[2].length)||it(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=Zt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}$t=p.document&&Wt?zt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var ee=!Wt||9<=Number($t);function ne(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function re(n,t){ut(t,function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:se.hasOwnProperty(e)?n.setAttribute(se[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var ie,oe,se={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ae(t,e,n){var r,i=arguments,o=document,s=String(i[0]),a=i[1];return!ee&&a&&(a.name||a.type)&&(s=["<",s],a.name&&s.push(' name="',Ut(a.name),'"'),a.type&&(s.push(' type="',Ut(a.type),'"'),ft(r={},a),delete r.type,a=r),s.push(">"),s=s.join("")),s=ue(o,s),a&&("string"==typeof a?s.className=a:Array.isArray(a)?s.className=a.join(" "):re(s,a)),2<i.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!l(o)||g(o)&&0<o.nodeType?r(o):j(function(t){if(t&&"number"==typeof t.length){if(g(t))return"function"==typeof t.item||"string"==typeof t.item;if(f(t))return"function"==typeof t.item}return!1}(o)?K(o):o,r)}}(o,s,i),s}function ue(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ce(t){p.setTimeout(function(){throw t},0)}function he(){var t=p.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!at("Presto")&&(t=function(){var t,e,n=ue(document,"IFRAME");n.style.display="none",t=n,e=new _t(St,vt(mt)),pt(t,"HTMLIFrameElement"),t.src=wt(e).toString(),document.documentElement.appendChild(n);var r=n.contentWindow;(n=r.document).open(),n.write(Dt(Mt)),n.close();var i="callImmediate"+Math.random(),o="file:"==r.location.protocol?"*":r.location.protocol+"//"+r.location.host;n=m(function(t){"*"!=o&&t.origin!=o||t.data!=i||this.port1.onmessage()},this),r.addEventListener("message",n,!1),this.port1={},this.port2={postMessage:function(){r.postMessage(i,o)}}}),void 0===t||at("Trident")||at("MSIE"))return function(t){p.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Db,n.Db=null,t())},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}function le(t,e){oe||function(){{var t;oe=p.Promise&&p.Promise.resolve?(t=p.Promise.resolve(void 0),function(){t.then(de)}):function(){var t=de;!f(p.setImmediate)||p.Window&&p.Window.prototype&&!at("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(ie=ie||he())(t):p.setImmediate(t)}}}(),fe||(oe(),fe=!0),pe.add(t,e)}var fe=!1,pe=new L;function de(){for(var t,e,n;n=e=void 0,n=null,(e=pe).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ce(t)}x(M,t)}fe=!1}function ve(t,e){if(this.a=ge,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Ae(n,ye,t)},function(t){if(!(t instanceof Le))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ae(n,me,t)})}catch(t){Ae(this,me,t)}}var ge=0,ye=2,me=3;function _e(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}_e.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var we=new D(function(){return new _e},function(t){t.reset()});function be(t,e,n){var r=we.get();return r.g=t,r.b=e,r.f=n,r}function Ee(t){if(t instanceof ve)return t;var e=new ve(s);return Ae(e,ye,t),e}function Ie(n){return new ve(function(t,e){e(n)})}function Te(t,e,n){ke(t,e,n,null)||le(_(e,t))}function Se(n){return new ve(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Mb:!0,value:n}:{Mb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Te(n[e],_(t,e,!0),_(t,e,!1));else r(o)})}function Ce(t,e){t.b||t.a!=ye&&t.a!=me||Oe(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ne(t,i,o,s){var e=be(null,null,null);return e.a=new ve(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof Le?r(t):n(e)}catch(t){r(t)}}:r}),Ce(e.a.c=t,e),e.a}function Ae(t,e,n){var r,i;t.a==ge&&(t===n&&(e=me,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ke(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,Oe(t),e!=me||n instanceof Le||(i=n,(r=t).g=!0,le(function(){r.g&&xe.call(null,i)}))))}function ke(t,e,n,r){if(t instanceof ve)return Ce(t,be(e||s,n||null,r)),1;if(k(t))return t.then(e,n,r),1;if(g(t))try{var i=t.then;if(f(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Oe(t){t.h||(t.h=!0,le(t.ec,t))}function Re(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Pe(t,e,n,r){if(n==me&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,De(e,n,r);else try{e.c?e.g.call(e.f):De(e,n,r)}catch(t){xe.call(null,t)}x(we,e)}function De(t,e,n){e==ye?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}ve.prototype.then=function(t,e,n){return Ne(this,f(t)?t:null,f(e)?e:null,n)},ve.prototype.$goog_Thenable=!0,(t=ve.prototype).ma=function(t,e){return(t=be(t,t,e)).c=!0,Ce(this,t),this},t.o=function(t,e){return Ne(this,null,t,e)},t.cancel=function(t){var e;this.a==ge&&(e=new Le(t),le(function(){!function t(e,n){if(e.a==ge)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==ge&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Re(r),Pe(r,o,me,n)))}e.c=null}else Ae(e,me,n)}(this,e)},this))},t.Yc=function(t){this.a=ge,Ae(this,ye,t)},t.Zc=function(t){this.a=ge,Ae(this,me,t)},t.ec=function(){for(var t;t=Re(this);)Pe(this,t,this.a,this.i);this.h=!1};var xe=ce;function Le(t){O.call(this,t)}function Me(){0!=Fe&&(Ue[r(this)]=this),this.wa,this.na}b(Le,O);var Fe=0,Ue={};function je(t){if(!t.wa&&(t.wa=!0,t.Ba(),0!=Fe)){var e=r(t);if(0!=Fe&&t.na&&0<t.na.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ue[e]}}Me.prototype.wa=!(Le.prototype.name="cancel"),Me.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var Ve=Object.freeze||function(t){return t},qe=!Wt||9<=Number($t),Be=Wt&&!te("9"),We=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{p.addEventListener("test",s,e),p.removeEventListener("test",s,e)}catch(t){}return t}();function He(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ge(t,e){if(He.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Qt){t:{try{jt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Qe[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}He.prototype.preventDefault=function(){this.defaultPrevented=!0},b(Ge,He);var Qe=Ve({2:"touch",3:"pen",4:"mouse"});Ge.prototype.preventDefault=function(){Ge.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Be)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Ge.prototype.f=function(){return this.a};var Ke="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Xe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++ze,this.ua=this.Na=!1}function Ye(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function Je(t){this.src=t,this.a={},this.b=0}function $e(t,e){var n=e.type;n in t.a&&H(t.a[n],e)&&(Ye(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Ze(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}Je.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ze(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new Xe(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var tn="closure_lm_"+(1e6*Math.random()|0),en={};function nn(t,e,n,r,i){if(r&&r.once)on(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else n=dn(n),t&&t[Ke]?gn(t,e,n,g(r)?!!r.capture:!!r,i):rn(t,e,n,!1,r,i)}function rn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=g(i)?!!i.capture:!!i,c=fn(t);if(c||(t[tn]=c=new Je(t)),!(n=c.add(e,n,r,u,o)).proxy){if(s=ln,r=a=qe?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)We||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(un(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function on(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)on(t,e[o],n,r,i);else n=dn(n),t&&t[Ke]?yn(t,e,n,g(r)?!!r.capture:!!r,i):rn(t,e,n,!0,r,i)}function sn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)sn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=dn(n),t&&t[Ke]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=Ze(o=t.a[e],n,r,i))&&(Ye(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&fn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ze(e,n,r,i)),(n=-1<t?e[t]:null)&&an(n))}function an(t){var e,n,r;"number"!=typeof t&&t&&!t.ua&&((e=t.src)&&e[Ke]?$e(e.u,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(un(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=fn(e))?($e(n,t),0==n.b&&(n.src=null,e[tn]=null)):Ye(t)))}function un(t){return t in en?en[t]:en[t]="on"+t}function cn(t,e,n,r){var i=!0;if((t=fn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=hn(o,r),i=i&&!1!==o)}return i}function hn(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&an(t),n.call(r,e)}function ln(t,e){if(t.ua)return!0;if(qe)return hn(t,new Ge(e,this));if(!e)t:{e=["window","event"];for(var n=p,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ge(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=cn(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=cn(r[i],t,!1,e),n=n&&o}return n}function fn(t){return(t=t[tn])instanceof Je?t:null}var pn="__closure_events_fn_"+(1e9*Math.random()>>>0);function dn(e){return f(e)?e:(e[pn]||(e[pn]=function(t){return e.handleEvent(t)}),e[pn])}function vn(){Me.call(this),this.u=new Je(this),(this.Yb=this).eb=null}function gn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function yn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function mn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.ua&&u.capture==n&&(s=u.listener,a=u.Ta||u.src,u.Na&&$e(t.u,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function _n(t,e,n){if(f(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:p.setTimeout(t,e||0)}function wn(n){var r=null;return new ve(function(t,e){-1==(r=_n(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw p.clearTimeout(r),t})}function bn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(l(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function En(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(l(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function In(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof In)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Tn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Sn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)Sn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Sn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}b(vn,Me),vn.prototype[Ke]=!0,vn.prototype.addEventListener=function(t,e,n,r){nn(this,t,e,n,r)},vn.prototype.removeEventListener=function(t,e,n,r){sn(this,t,e,n,r)},vn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t?t=new He(t,n):t instanceof He?t.target=t.target||n:(s=t,ft(t=new He(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=mn(o,r,!0,t)&&s;if(s=mn(o=t.b=n,r,!0,t)&&s,s=mn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=mn(o=t.b=e[i],r,!1,t)&&s;return s},vn.prototype.Ba=function(){if(vn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ye(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=In.prototype).V=function(){Tn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return Tn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Sn(this.b,t)?this.b[t]:e},t.set=function(t,e){Sn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Cn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Nn?(this.h=void 0!==e?e:t.h,An(this,t.f),this.i=t.i,this.b=t.b,kn(this,t.l),this.c=t.c,On(this,Xn(t.a)),this.g=t.g):t&&(n=String(t).match(Cn))?(this.h=!!e,An(this,n[1]||"",!0),this.i=Ln(n[2]||""),this.b=Ln(n[3]||"",!0),kn(this,n[4]),this.c=Ln(n[5]||"",!0),On(this,n[6]||"",!0),this.g=Ln(n[7]||"")):(this.h=!!e,this.a=new Wn(null,this.h))}function An(t,e,n){t.f=n?Ln(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function kn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function On(t,e,n){var r,i;e instanceof Wn?(t.a=e,r=t.a,(i=t.h)&&!r.f&&(Hn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Qn(this,e),zn(this,n,t))},r)),r.f=i):(n||(e=Mn(e,qn)),t.a=new Wn(e,t.h))}function Rn(t,e,n){t.a.set(e,n)}function Pn(t,e){return t.a.get(e)}function Dn(t){return t instanceof Nn?new Nn(t):new Nn(t,void 0)}function xn(t,e){var n=new Nn(null,void 0);return An(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Ln(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Mn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Fn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Fn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Nn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Mn(e,Un,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(Mn(e,Un,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Mn(n,"/"==n.charAt(0)?Vn:jn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Mn(n,Bn)),t.join("")},Nn.prototype.resolve=function(t){var e=new Nn(this),n=!!t.f;n?An(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r,i=t.c;if(n)kn(e,t.l);else if(n=!!t.c){if("/"!=i.charAt(0)&&(this.b&&!this.c?i="/"+i:-1!=(r=e.c.lastIndexOf("/"))&&(i=e.c.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(rt(r,"./")||rt(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r}return n?e.c=i:n=""!==t.a.toString(),n?On(e,Xn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Un=/[#\/\?@]/g,jn=/[#\?:]/g,Vn=/[#\?]/g,qn=/[#\?@]/g,Bn=/#/g;function Wn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Hn(n){n.a||(n.a=new In,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Gn(t){var e=En(t);if(void 0===e)throw Error("Keys are undefined");var n=new Wn(null,void 0);t=bn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?zn(n,i,o):n.add(i,o)}return n}function Qn(t,e){Hn(t),e=Yn(t,e),Sn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Sn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Tn(t)))}function Kn(t,e){return Hn(t),e=Yn(t,e),Sn(t.a.b,e)}function zn(t,e,n){Qn(t,e),0<n.length&&(t.c=null,t.a.set(Yn(t,e),K(n)),t.b+=n.length)}function Xn(t){var e=new Wn;return e.c=t.c,t.a&&(e.a=new In(t.a),e.b=t.b),e}function Yn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Jn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(s=n[i])&&(r.push(o),er(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":er(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new $n,t,e),e.join("")}function $n(){}(t=Wn.prototype).add=function(t,e){Hn(this),this.c=null,t=Yn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){Hn(this),this.a.forEach(function(t,e){j(t,function(t){n.call(r,t,e,this)},this)},this)},t.X=function(){Hn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Hn(this);var e=[];if("string"==typeof t)Kn(this,t)&&(e=Q(e,this.a.get(Yn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},t.set=function(t,e){return Hn(this),this.c=null,Kn(this,t=Yn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.V(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Zn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},tr=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function er(t,e){e.push('"',t.replace(tr,function(t){var e=Zn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Zn[t]=e),e}),'"')}function nr(){var t=br();return Wt&&$t&&11==$t||/Edge\/\d+/.test(t)}function rr(){return p.window&&p.window.location.href||self&&self.location&&self.location.href||""}function ir(t,e){e=e||p.window;var n="about:blank";t&&(n=Nt(kt(t))),e.location.href=n}function or(t){return!!((t=(t||br()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function sr(t){t=t||p.window;try{t.close()}catch(t){}}function ar(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=br().toLowerCase(),r&&(e.target=r,rt(n,"crios/")&&(e.target="_blank")),mr(br())==gr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:kt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(pt(s=ue(document,"A"),"HTMLAnchorElement"),e instanceof Ct||e instanceof Ct||(e="object"==typeof e&&e.ra?e.qa():String(e),At.test(e)||(e="about:invalid#zClosurez"),e=new Ct(Rt,e)),s.href=Nt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Nt(e),s&&(Gt&&rt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Lt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ut(t)+'">'),r=s.document)&&(r.write(Dt(t)),r.close())):(s=r.open(Nt(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var ur=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cr=/^[^@]+@[^@]+$/;function hr(){var e=null;return new ve(function(t){"complete"==p.document.readyState?t():(e=function(){t()},on(window,"load",e))}).o(function(t){throw sn(window,"load",e),t})}function lr(t){return t=t||br(),!("file:"!==Cr()&&"ionic:"!==Cr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function fr(){var t=p.window;try{return t&&t!=t.top}catch(t){return}}function pr(){return void 0!==p.WorkerGlobalScope&&"function"==typeof p.importScripts}function dr(){return Xl.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Xl.a.INTERNAL.hasOwnProperty("node")?"Node":pr()?"Worker":"Browser"}function vr(){var t=dr();return"ReactNative"===t||"Node"===t}var gr="Firefox",yr="Chrome";function mr(t){var e=t.toLowerCase();return rt(e,"opera/")||rt(e,"opr/")||rt(e,"opios/")?"Opera":rt(e,"iemobile")?"IEMobile":rt(e,"msie")||rt(e,"trident/")?"IE":rt(e,"edge/")?"Edge":rt(e,"firefox/")?gr:rt(e,"silk/")?"Silk":rt(e,"blackberry")?"Blackberry":rt(e,"webos")?"Webos":!rt(e,"safari/")||rt(e,"chrome/")||rt(e,"crios/")||rt(e,"android")?!rt(e,"chrome/")&&!rt(e,"crios/")||rt(e,"edge/")?rt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":yr:"Safari"}var _r={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function wr(t,e){e=e||[];var n,r=[],i={};for(n in _r)i[_r[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=dr())?r=mr(i=br()):"Worker"===r&&(r=mr(i=br())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function br(){return p.navigator&&p.navigator.userAgent||""}function Er(t,e){t=t.split("."),e=e||p;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Ir(){try{var t=p.localStorage,e=Rr();if(t)return t.setItem(e,"1"),t.removeItem(e),!nr()||!!p.indexedDB}catch(t){return pr()&&!!p.indexedDB}return!1}function Tr(){return(Sr()||"chrome-extension:"===Cr()||lr())&&!vr()&&Ir()&&!pr()}function Sr(){return"http:"===Cr()||"https:"===Cr()}function Cr(){return p.location&&p.location.protocol||null}function Nr(t){return!or(t=t||br())&&mr(t)!=gr}function Ar(t){return void 0===t?null:Jn(t)}function kr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Or(t){if(null!==t)return JSON.parse(t)}function Rr(t){return t||Math.floor(1e9*Math.random()).toString()}function Pr(t){return"Safari"!=mr(t=t||br())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Dr(){var t=p.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function xr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=br(),e=dr(),this.b=or(t)||"ReactNative"===e}function Lr(){var t=p.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Mr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Fr(){return Er("fireauth.oauthhelper",p)||Er("fireauth.iframe",p)}xr.prototype.get=function(){var t=p.navigator;return!t||"boolean"!=typeof t.onLine||!Sr()&&"chrome-extension:"!==Cr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Ur,jr={};function Vr(t){jr[t]||(jr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var qr={};Object.defineProperty(qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Ur=2==qr.abcd}catch(t){Ur=!1}function Br(t,e,n){Ur?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Wr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Br(t,n,e[n])}function Hr(t){var e={};return Wr(e,t),e}function Gr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Br(e,n,Gr(t[n]));return e}function Qr(t){var e=t&&(t[Jr]?"phone":null);if(!(e&&t&&t[Yr]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");Br(this,"uid",t[Yr]),Br(this,"displayName",t[zr]||null);var n=null;t[Xr]&&(n=new Date(t[Xr]).toUTCString()),Br(this,"enrollmentTime",n),Br(this,"factorId",e)}function Kr(t){try{var e=new $r(t)}catch(t){e=null}return e}Qr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var zr="displayName",Xr="enrolledAt",Yr="mfaEnrollmentId",Jr="phoneInfo";function $r(t){Qr.call(this,t),Br(this,"phoneNumber",t[Jr])}function Zr(t){var e={},n=t[ri],r=t[oi],i=t[si];if(t=Kr(t[ii]),!i||i!=ei&&i!=ni&&!n||i==ni&&!r||i==ti&&!t)throw Error("Invalid checkActionCode response!");i==ni?(e[ui]=n||null,e[hi]=n||null,e[ai]=r):(e[ui]=r||null,e[hi]=r||null,e[ai]=n||null),e[ci]=t||null,Br(this,fi,i),Br(this,li,Gr(e))}b($r,Qr),$r.prototype.v=function(){var t=$r.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var ti="REVERT_SECOND_FACTOR_ADDITION",ei="EMAIL_SIGNIN",ni="VERIFY_AND_CHANGE_EMAIL",ri="email",ii="mfaInfo",oi="newEmail",si="requestType",ai="email",ui="fromEmail",ci="multiFactorInfo",hi="previousEmail",li="data",fi="operation";function pi(t){var e=Pn(t=Dn(t),di)||null,n=Pn(t,vi)||null,r=(r=Pn(t,mi)||null)&&wi[r]||null;if(!e||!n||!r)throw new E("argument-error",di+", "+vi+"and "+mi+" are required in a valid action code URL.");Wr(this,{apiKey:e,operation:r,code:n,continueUrl:Pn(t,gi)||null,languageCode:Pn(t,yi)||null,tenantId:Pn(t,_i)||null})}var di="apiKey",vi="oobCode",gi="continueUrl",yi="languageCode",mi="mode",_i="tenantId",wi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ti,signIn:ei,verifyAndChangeEmail:ni,verifyEmail:"VERIFY_EMAIL"};function bi(t){try{return new pi(t)}catch(t){return null}}function Ei(t){var e=t[Ni];if(void 0===e)throw new E("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new E("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[Ii])&&"object"==typeof r){e=r[Oi];var n=r[Ai],r=r[ki];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new E("argument-error",Ai+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new E("argument-error",ki+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new E("argument-error",Oi+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new E("missing-android-pkg-name")}}else if(void 0!==r)throw new E("argument-error",Ii+" property must be a non null object when specified.");if(this.f=null,(e=t[Ci])&&"object"==typeof e){if("string"==typeof(e=e[Ri])&&e.length)this.f=e;else if(void 0!==e)throw new E("argument-error",Ri+" property must be a non empty string when specified.")}else if(void 0!==e)throw new E("argument-error",Ci+" property must be a non null object when specified.");if(void 0!==(e=t[Si])&&"boolean"!=typeof e)throw new E("argument-error",Si+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ti])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new E("argument-error",Ti+" property must be a non empty string when specified.");this.i=t||null}var Ii="android",Ti="dynamicLinkDomain",Si="handleCodeInApp",Ci="iOS",Ni="url",Ai="installApp",ki="minimumVersion",Oi="packageName",Ri="bundleId";function Pi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Di=null;function xi(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Di[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Di){Di={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Di[o]&&(Di[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}function Li(t){var e=Fi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,w(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Mi(t){try{return new Li(t)}catch(t){return null}}function Fi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(xi(t))}catch(t){}return null}Li.prototype.S=function(){return this.f},Li.prototype.i=function(){return this.b},Li.prototype.toString=function(){return this.g};var Ui="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),ji=["client_id","response_type","scope","redirect_uri","state"],Vi={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:ji},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:ji},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:ji},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Ui},gd:{Ha:"locale",ta:640,sa:600,ea:"apple.com",Va:[]}};function qi(t){for(var e in Vi)if(Vi[e].ea==t)return Vi[e];return null}function Bi(t){var e={};e["facebook.com"]=Ki,e["google.com"]=Xi,e["github.com"]=zi,e["twitter.com"]=Yi;var n=t&&t[Hi];try{if(n)return e[n]?new e[n](t):new Qi(t);if(void 0!==t[Wi])return new Gi(t)}catch(t){}return null}var Wi="idToken",Hi="providerId";function Gi(t){var e,n=t[Hi];if(n||!t[Wi]||(e=Mi(t[Wi]))&&e.a&&(n=e.a),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Br(this,"providerId",n),Br(this,"isNewUser",e)}function Qi(t){Gi.call(this,t),Br(this,"profile",Gr((t=Or(t.rawUserInfo||"{}"))||{}))}function Ki(t){if(Qi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function zi(t){if(Qi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Br(this,"username",this.profile&&this.profile.login||null)}function Xi(t){if(Qi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Yi(t){if(Qi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Br(this,"username",t.screenName||null)}function Ji(t){var e=Pn(r=Dn(t),"link"),n=Pn(Dn(e),"link"),r=Pn(r,"deep_link_id");return Pn(Dn(r),"link")||r||n||e||t}function $i(t,e){if(!t&&!e)throw new E("internal-error","Internal assert: no raw session string available");if(t&&e)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Zi:to}b(Qi,Gi),b(Ki,Qi),b(zi,Qi),b(Xi,Qi),b(Yi,Qi);var Zi="enroll",to="signin";function eo(){}function no(t,n){return t.then(function(t){if(t[Gs]){var e=Mi(t[Gs]);if(!e||n!=e.h)throw new E("user-mismatch");return t}throw new E("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==S+"user-not-found"?new E("user-mismatch"):t})}function ro(t,e){if(!e)throw new E("internal-error","failed to construct a credential");this.a=e,Br(this,"providerId",t),Br(this,"signInMethod",t)}function io(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function oo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ro(t.providerId,t.pendingToken)}catch(t){}return null}function so(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Br(this,"idToken",e.idToken),e.accessToken&&Br(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Br(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");Br(this,"accessToken",e.oauthToken),Br(this,"secret",e.oauthTokenSecret)}Br(this,"providerId",t),Br(this,"signInMethod",n)}function ao(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Gn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function uo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new so(t.providerId,e,t.signInMethod)}catch(t){}}return null}function co(t,e){this.Oc=e||[],Wr(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(qi(t)||{}).Ha||null,this.kb=null}function ho(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');co.call(this,t,[])}function lo(t){co.call(this,t,ji),this.a=[]}function fo(){lo.call(this,"facebook.com")}function po(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new fo).credential({accessToken:e})}function vo(){lo.call(this,"github.com")}function go(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new vo).credential({accessToken:e})}function yo(){lo.call(this,"google.com"),this.Aa("profile")}function mo(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new yo).credential({idToken:n,accessToken:e})}function _o(){co.call(this,"twitter.com",Ui)}function wo(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new so("twitter.com",n,"twitter.com")}function bo(t,e,n){this.a=t,this.f=e,Br(this,"providerId","password"),Br(this,"signInMethod",n===Io.EMAIL_LINK_SIGN_IN_METHOD?Io.EMAIL_LINK_SIGN_IN_METHOD:Io.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Eo(t){return t&&t.email&&t.password?new bo(t.email,t.password,t.signInMethod):null}function Io(){Wr(this,{providerId:"password",isOAuthProvider:!1})}function To(t,e){if(!(e=So(e)))throw new E("argument-error","Invalid email link!");return new bo(t,e.code,Io.EMAIL_LINK_SIGN_IN_METHOD)}function So(t){return(t=bi(t=Ji(t)))&&t.operation===ei?t:null}function Co(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new E("internal-error");this.a=t,Br(this,"providerId","phone"),this.ea="phone",Br(this,"signInMethod","phone")}function No(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return j(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new Co(n)}return null}function Ao(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function ko(t){try{this.a=t||Xl.a.auth()}catch(t){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Wr(this,{providerId:"phone",isOAuthProvider:!1})}function Oo(t,e){if(!t)throw new E("missing-verification-id");if(!e)throw new E("missing-verification-code");return new Co({bb:t,ab:e})}function Ro(t){if(t.temporaryProof&&t.phoneNumber)return new Co({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return mo(o,n);case"facebook.com":return po(n);case"github.com":return go(n);case"twitter.com":return wo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ro(e,s):new so(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new lo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Po(t){if(!t.isOAuthProvider)throw new E("invalid-oauth-provider")}function Do(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function xo(t){return(t=t||{}).type?new Do(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&I(t.error),t.postBody,t.tenantId):null}function Lo(){this.b=null,this.a=[]}$i.prototype.Fa=function(){return this.a?Ee(this.a):Ee(this.b)},$i.prototype.v=function(){return this.type==Zi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},eo.prototype.ia=function(){},eo.prototype.b=function(){},eo.prototype.c=function(){},eo.prototype.v=function(){},ro.prototype.ia=function(t){return la(t,io(this))},ro.prototype.b=function(t,e){var n=io(this);return n.idToken=e,fa(t,n)},ro.prototype.c=function(t,e){return no(pa(t,io(this)),e)},ro.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},so.prototype.ia=function(t){return la(t,ao(this))},so.prototype.b=function(t,e){var n=ao(this);return n.idToken=e,fa(t,n)},so.prototype.c=function(t,e){return no(pa(t,ao(this)),e)},so.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},co.prototype.Ia=function(t){return this.Fb=ht(t),this},b(ho,co),b(lo,co),lo.prototype.Aa=function(t){return W(this.a,t)||this.a.push(t),this},lo.prototype.Nb=function(){return K(this.a)},lo.prototype.credential=function(t,e){var n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!n.idToken&&!n.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new so(this.providerId,n,this.providerId)},b(fo,lo),Br(fo,"PROVIDER_ID","facebook.com"),Br(fo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),b(vo,lo),Br(vo,"PROVIDER_ID","github.com"),Br(vo,"GITHUB_SIGN_IN_METHOD","github.com"),b(yo,lo),Br(yo,"PROVIDER_ID","google.com"),Br(yo,"GOOGLE_SIGN_IN_METHOD","google.com"),b(_o,co),Br(_o,"PROVIDER_ID","twitter.com"),Br(_o,"TWITTER_SIGN_IN_METHOD","twitter.com"),bo.prototype.ia=function(t){return this.signInMethod==Io.EMAIL_LINK_SIGN_IN_METHOD?za(t,ba,{email:this.a,oobCode:this.f}):za(t,Wa,{email:this.a,password:this.f})},bo.prototype.b=function(t,e){return this.signInMethod==Io.EMAIL_LINK_SIGN_IN_METHOD?za(t,Ea,{idToken:e,email:this.a,oobCode:this.f}):za(t,La,{idToken:e,email:this.a,password:this.f})},bo.prototype.c=function(t,e){return no(this.ia(t),e)},bo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Wr(Io,{PROVIDER_ID:"password"}),Wr(Io,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Wr(Io,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Co.prototype.ia=function(t){return t.cb(Ao(this))},Co.prototype.b=function(t,e){var n=Ao(this);return n.idToken=e,za(t,Ga,n)},Co.prototype.c=function(t,e){var n=Ao(this);return n.operation="REAUTH",no(t=za(t,Qa,n),e)},Co.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},ko.prototype.cb=function(i,o){var s=this.a.b;return Ee(o.verify()).then(function(r){if("string"!=typeof r)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(o.type){case"recaptcha":var t=g(i)?i.session:null,e=g(i)?i.phoneNumber:i,n=t&&t.type==Zi?t.Fa().then(function(t){return za(s,Fa,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==to?t.Fa().then(function(t){return e=s,n={mfaPendingCredential:t,mfaEnrollmentId:i.multiFactorHint&&i.multiFactorHint.uid||i.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}},za(e,Ua,n).then(function(t){return t.phoneResponseInfo.sessionInfo});var e,n}):za(s,Da,{phoneNumber:e,recaptchaToken:r});return n.then(function(t){return"function"==typeof o.reset&&o.reset(),t},function(t){throw"function"==typeof o.reset&&o.reset(),t});default:throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Wr(ko,{PROVIDER_ID:"phone"}),Wr(ko,{PHONE_SIGN_IN_METHOD:"phone"}),Do.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Do.prototype.S=function(){return this.h},Do.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Mo,Fo=null;function Uo(t){var e="unauthorized-domain",n=void 0,r=Dn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Ft("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ft("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",E.call(this,e,n)}function jo(t,e,n){E.call(this,t,n),(t=e||{}).Gb&&Br(this,"email",t.Gb),t.da&&Br(this,"phoneNumber",t.da),t.credential&&Br(this,"credential",t.credential),t.Wb&&Br(this,"tenantId",t.Wb)}function Vo(t){if(t.code){var e=t.code||"";0==e.indexOf(S)&&(e=e.substring(S.length));var n={credential:Ro(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new E(e,t.message||void 0);return new jo(e,n,t.message)}return null}function qo(){}function Bo(t){return t.c||(t.c=t.b())}function Wo(){}function Ho(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Go(){}function Qo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.oc,this),this.a.onerror=m(this.Pb,this),this.a.onprogress=m(this.pc,this),this.a.ontimeout=m(this.tc,this)}function Ko(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function zo(t,e,n){this.reset(t,e,n,void 0,void 0)}b(Uo,E),b(jo,E),jo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&ft(t,e),t},jo.prototype.toJSON=function(){return this.v()},qo.prototype.c=null,b(Wo,qo),Wo.prototype.a=function(){var t=Ho(this);return t?new ActiveXObject(t):new XMLHttpRequest},Wo.prototype.b=function(){var t={};return Ho(this)&&(t[0]=!0,t[1]=!0),t},Mo=new Wo,b(Go,qo),Go.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Qo;throw Error("Unsupported browser")},Go.prototype.b=function(){return{}},(t=Qo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ko(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",Ko(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,Ko(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},zo.prototype.a=null;function Xo(t){this.f=t,this.b=this.c=this.a=null}function Yo(t,e){this.name=t,this.value=e}zo.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||w(),delete this.a},Yo.prototype.toString=function(){return this.name};var Jo=new Yo("SEVERE",1e3),$o=new Yo("WARNING",900),Zo=new Yo("CONFIG",700),ts=new Yo("FINE",500);Xo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(P("Root logger has no level set."),null)}(this).value)for(f(e)&&(e=e()),t=new zo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var es,ns={},rs=null;function is(t){var e,n,r;return rs||(rs=new Xo(""),(ns[""]=rs).c=Zo),(e=ns[t])||(e=new Xo(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=is(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,ns[t]=e),e}function os(t,e){t&&t.log(ts,e,void 0)}function ss(t){this.f=t}function as(t){vn.call(this),this.s=t,this.readyState=us,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=is("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}b(ss,qo),ss.prototype.a=function(){return new as(this.f)},ss.prototype.b=(es={},function(){return es}),b(as,vn);var us=0;function cs(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function hs(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,ls(t)}function ls(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function fs(t){vn.call(this),this.headers=new In,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=ps,this.w=this.R=!1}(t=as.prototype).open=function(t,e){if(this.readyState!=us)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,ls(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,hs(this,!1)),this.readyState=us},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,ls(this)),this.a&&(this.readyState=3,ls(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==p.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,cs(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){var e;this.a&&((e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),t.done?hs(this,!0):ls(this),3==this.readyState&&cs(this))},t.rc=function(t){this.a&&(this.response=this.responseText=t,hs(this,!0))},t.qc=function(t){this.a&&(this.response=t,hs(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log($o,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&hs(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log($o,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log($o,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},b(fs,vn);var ps="";fs.prototype.b=is("goog.net.XhrIo");var ds=/^https?$/i,vs=["POST","PUT"];function gs(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.N=!1,e.c=!0,e.a=e.D?e.D.a():Mo.a(),e.B=e.D?Bo(e.D):Bo(Mo),e.a.onreadystatechange=m(e.Sb,e);try{os(e.b,Ss(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return os(e.b,Ss(e,"Error opening Xhr: "+t.message)),void ms(e,t)}t=r||"";var o,s=new In(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||"string"==typeof t)j(t,e,void 0);else for(var n=En(t),r=bn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=ys,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.X()),r=p.FormData&&t instanceof p.FormData,!W(vs,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.R&&(e.a.withCredentials=e.R);try{Es(e),0<e.g&&(e.w=(o=e.a,Wt&&te(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),os(e.b,Ss(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.w)),e.w?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ka,e)):e.s=_n(e.Ka,e.g,e)),os(e.b,Ss(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){os(e.b,Ss(e,"Send error: "+t.message)),ms(e,t)}}function ys(t){return"content-type"==t.toLowerCase()}function ms(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,_s(t),bs(t)}function _s(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ws(e){if(e.c&&void 0!==h)if(e.B[1]&&4==Is(e)&&2==Ts(e))os(e.b,Ss(e,"Local request error detected and ignored"));else if(e.i&&4==Is(e))_n(e.Sb,0,e);else if(e.dispatchEvent("readystatechange"),4==Is(e)){os(e.b,Ss(e,"Request complete")),e.c=!1;try{var t,n,r,i,o=Ts(e);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((t=s)||((n=0===o)&&(!(i=String(e.l).match(Cn)[1]||null)&&p.self&&p.self.location&&(i=(r=p.self.location.protocol).substr(0,r.length-1)),n=!ds.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<Is(e)?e.a.statusText:""}catch(t){os(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+Ts(e)+"]",_s(e)}}finally{bs(e)}}}function bs(e,t){if(e.a){Es(e);var n=e.a,r=e.B[0]?s:null;e.a=null,e.B=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Jo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function Es(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(p.clearTimeout(t.s),t.s=null)}function Is(t){return t.a?t.a.readyState:0}function Ts(t){try{return 2<Is(t)?t.a.status:-1}catch(t){return-1}}function Ss(t,e){return e+" ["+t.P+" "+t.l+" "+Ts(t)+"]"}function Cs(t){var e=Fs;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Ns(t,e,n){t.a=!0,t.c=n,t.f=!e,Rs(t)}function As(t){if(t.a){if(!t.u)throw new Ps;t.u=!1}}function ks(t,e,n,r){t.g.push([e,n,r]),t.a&&Rs(t)}function Os(t){return B(t.g,function(t){return f(t[1])})}function Rs(e){var n,r;e.h&&e.a&&Os(e)&&(n=e.h,(r=Ls[n])&&(p.clearTimeout(r.a),delete Ls[n]),e.h=0),e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=(s=e.g.shift())[0],o=s[1],s=s[2];if(i=e.f?o:i)try{var a=i.call(s||e.s,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(k(n)||"function"==typeof p.Promise&&n instanceof p.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,Os(e)||(r=!0)}}e.c=n,t&&(a=m(e.m,e,!0),t=m(e.m,e,!1),n instanceof Cs?(ks(n,a,t),n.B=!0):n.then(a,t)),r&&(n=new xs(n),Ls[n.a]=n,e.h=n.a)}function Ps(){O.call(this)}function Ds(){O.call(this)}function xs(t){this.a=p.setTimeout(m(this.c,this),0),this.b=t}(t=fs.prototype).Ka=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",os(this.b,Ss(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(os(this.b,Ss(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),bs(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),bs(this,!0)),fs.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?ws(this):this.Hc())},t.Hc=function(){ws(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ps:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Jo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return os(this.b,"Can not get response: "+t.message),null}},Cs.prototype.cancel=function(t){var e;this.a?this.c instanceof Cs&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Ds,As(this),Ns(this,!1,t)))},Cs.prototype.m=function(t,e){this.i=!1,Ns(this,t,e)},Cs.prototype.then=function(t,e,n){var r,i,o=new ve(function(t,e){r=t,i=e});return ks(this,r,function(t){t instanceof Ds?o.cancel():i(t)}),o.then(t,e,n)},Cs.prototype.$goog_Thenable=!0,b(Ps,O),Ps.prototype.message="Deferred has already fired",Ps.prototype.name="AlreadyCalledError",b(Ds,O),Ds.prototype.message="Deferred was canceled",Ds.prototype.name="CanceledError",xs.prototype.c=function(){throw delete Ls[this.a],this.b};var Ls={};function Ms(t){var e,n,r,i,o={},s=o.document||document,a=wt(t).toString(),u=ue(document,"SCRIPT"),c={Tb:u,Ka:void 0},h=new Cs(c),l=null,f=null!=o.timeout?o.timeout:5e3;return 0<f&&(l=window.setTimeout(function(){Us(u,!0);var t=new qs(Vs,"Timeout reached for loading script "+a);As(h),Ns(h,!1,t)},f),c.Ka=l),u.onload=u.onreadystatechange=function(){u.readyState&&"loaded"!=u.readyState&&"complete"!=u.readyState||(Us(u,o.ud||!1,l),As(h),Ns(h,!0,null))},u.onerror=function(){Us(u,!0,l);var t=new qs(js,"Error while loading script "+a);As(h),Ns(h,!1,t)},ft(c=o.attributes||{},{type:"text/javascript",charset:"UTF-8"}),re(u,c),n=t,pt(e=u,"HTMLScriptElement"),e.src=wt(n),null===v&&(v=(n=(n=p.document).querySelector&&n.querySelector("script[nonce]"))&&(n=n.nonce||n.getAttribute("nonce"))&&d.test(n)?n:""),(n=v)&&e.setAttribute("nonce",n),((i=((r=s)||document).getElementsByTagName("HEAD"))&&0!=i.length?i[0]:r.documentElement).appendChild(u),h}function Fs(){var t;this&&this.Tb&&((t=this.Tb)&&"SCRIPT"==t.tagName&&Us(t,!0,this.Ka))}function Us(t,e,n){null!=n&&p.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var js=0,Vs=1;function qs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Bs(t){this.f=t}function Ws(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Qs,this.g=ht(t.secureTokenHeaders||Ks),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||zs,this.a=ht(t.firebaseHeaders||Xs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==dr(),!(n=p.XMLHttpRequest||n&&Xl.a.INTERNAL.node&&Xl.a.INTERNAL.node.XMLHttpRequest)&&!pr())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,pr()?this.f=new ss(self):vr()?this.f=new Bs(n):this.f=new Go,this.b=null}b(qs,O),b(Bs,qo),Bs.prototype.a=function(){return new this.f},Bs.prototype.b=function(){return{}};var Hs,Gs="idToken",Qs=new xr(3e4,6e4),Ks={"Content-Type":"application/x-www-form-urlencoded"},zs=new xr(3e4,6e4),Xs={"Content-Type":"application/json"};function Ys(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Js(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function $s(t,e,n,r,i,o,s){var a;(t=!((a=mr(a=br())==yr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Wt&&$t&&!(9<$t))||pr()?m(t.w,t):(Hs=Hs||new ve(function(t,e){!function(t,e){{((window.gapi||{}).client||{}).request?t():(p[ta]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){ks(t,null,e,void 0)}(Ms(bt(Zs,{onload:ta})),function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}),m(t.s,t)))(e,n,r,i,o,s)}Ws.prototype.S=function(){return this.b},Ws.prototype.w=function(t,n,e,r,i,o){if(pr()&&(void 0===p.fetch||void 0===p.Headers||void 0===p.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new fs(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),gn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return os(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),yn(a,"ready",function(){s&&clearTimeout(s),je(this)}),yn(a,"timeout",function(){s&&clearTimeout(s),je(this),n&&n(null)}),gs(a,t,e,r,i)};var Zs=new dt(yt,"https://apis.google.com/js/client.js?onload=%{onload}"),ta="__fcb"+Math.floor(1e6*Math.random()).toString();function ea(t,e,n,r,i,o,s){var a=Dn(e+n);Rn(a,"key",t.c),s&&Rn(a,"cb",w().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Rn(a,c,i[c]);return new ve(function(e,n){$s(t,a.toString(),function(t){t?t.error?n(Ya(t,o||{})):e(t):n(new E("network-request-failed"))},r,u?void 0:Jn(kr(i)),t.a,t.i.get())})}function na(t){if("string"!=typeof(t=t.email)||!cr.test(t))throw new E("invalid-email")}function ra(t){"email"in t&&na(t)}function ia(t){if(!t[Gs]){if(t.mfaPendingCredential)throw new E("multi-factor-auth-required",null,ht(t));throw new E("internal-error")}}function oa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new E("internal-error")}else{if(!t.sessionInfo)throw new E("missing-verification-id");if(!t.code)throw new E("missing-verification-code")}}Ws.prototype.s=function(t,n,r,i,o){var s=this;Hs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ws.prototype.vb=function(){return za(this,Ma,{})},Ws.prototype.xb=function(t,e){return za(this,xa,{idToken:t,email:e})},Ws.prototype.yb=function(t,e){return za(this,La,{idToken:t,password:e})};var sa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function aa(t){if(!t.phoneVerificationInfo)throw new E("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new E("missing-verification-code")}function ua(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new E("internal-error")}function ca(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Kn(t=new Wn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ha(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Vo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Vo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Vo(t)):t.errorMessage&&(e=Xa(t.errorMessage)),e)throw e;ia(t)}function la(t,e){return e.returnIdpCredential=!0,za(t,ja,e)}function fa(t,e){return e.returnIdpCredential=!0,za(t,qa,e)}function pa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,za(t,Va,e)}function da(t){if(!t.oobCode)throw new E("invalid-action-code")}(t=Ws.prototype).zb=function(t,r){var i={idToken:t},o=[];return ut(sa,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),za(this,xa,i)},t.rb=function(t,e){return ft(t={requestType:"PASSWORD_RESET",email:t},e),za(this,ka,t)},t.sb=function(t,e){return ft(t={requestType:"EMAIL_SIGNIN",email:t},e),za(this,Ca,t)},t.qb=function(t,e){return ft(t={requestType:"VERIFY_EMAIL",idToken:t},e),za(this,Na,t)},t.Ab=function(t,e,n){return ft(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),za(this,Aa,t)},t.cb=function(t){return za(this,Ha,t)},t.jb=function(t,e){return za(this,Pa,{oobCode:t,newPassword:e})},t.Pa=function(t){return za(this,ga,{oobCode:t})},t.fb=function(t){return za(this,va,{oobCode:t})};var va={endpoint:"setAccountInfo",A:da,Y:"email",C:!0},ga={endpoint:"resetPassword",A:da,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new E("internal-error")},C:!0},ya={endpoint:"signupNewUser",A:function(t){if(na(t),!t.password)throw new E("weak-password")},G:ia,U:!0,C:!0},ma={endpoint:"createAuthUri",C:!0},_a={endpoint:"deleteAccount",M:["idToken"]},wa={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=n(t.deleteProvider))throw new E("internal-error")}},ba={endpoint:"emailLinkSignin",M:["email","oobCode"],A:na,G:ia,U:!0,C:!0},Ea={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:na,G:ia,U:!0},Ia={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:aa,G:ia,C:!0,La:!0},Ta={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:aa,G:ia,C:!0,La:!0},Sa={endpoint:"getAccountInfo"},Ca={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new E("internal-error");na(t)},Y:"email",C:!0},Na={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new E("internal-error")},Y:"email",C:!0},Aa={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new E("internal-error")},Y:"email",C:!0},ka={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new E("internal-error");na(t)},Y:"email",C:!0},Oa={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Ra={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new E("internal-error")}},Pa={endpoint:"resetPassword",A:da,Y:"email",C:!0},Da={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},xa={endpoint:"setAccountInfo",M:["idToken"],A:ra,U:!0},La={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(ra(t),!t.password)throw new E("weak-password")},G:ia,U:!0},Ma={endpoint:"signupNewUser",G:ia,U:!0,C:!0},Fa={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new E("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new E("internal-error")},C:!0,La:!0},Ua={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new E("internal-error")},C:!0,La:!0},ja={endpoint:"verifyAssertion",A:ua,Wa:ca,G:ha,U:!0,C:!0},Va={endpoint:"verifyAssertion",A:ua,Wa:ca,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new E("user-not-found");if(t.errorMessage)throw Xa(t.errorMessage);ia(t)},U:!0,C:!0},qa={endpoint:"verifyAssertion",A:function(t){if(ua(t),!t.idToken)throw new E("internal-error")},Wa:ca,G:ha,U:!0},Ba={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new E("invalid-custom-token")},G:ia,U:!0,C:!0},Wa={endpoint:"verifyPassword",A:function(t){if(na(t),!t.password)throw new E("wrong-password")},G:ia,U:!0,C:!0},Ha={endpoint:"verifyPhoneNumber",A:oa,G:ia,C:!0},Ga={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new E("internal-error");oa(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Vo(t);ia(t)}},Qa={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:oa,G:ia,C:!0},Ka={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Gs]^!!t.refreshToken)throw new E("internal-error")},C:!0,La:!0};function za(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return Ie(new E("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return Ee(n).then(e.A).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ea(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)}).then(function(t){return r=t,e.Wa?e.Wa(n,r):r}).then(e.G).then(function(){if(!e.Y)return r;if(!(e.Y in r))throw new E("internal-error");return r[e.Y]})}function Xa(t){return Ya({error:{errors:[{message:t}],code:400,message:t}})}function Ya(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new E(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",ft(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new E(r[i],e);return!e&&t&&(e=Ar(t)),new E("internal-error",e)}function Ja(t){var o;this.b=t,this.a=null,this.nb=(o=this,(eu=eu||new ve(function(t,e){function n(){Dr(),Er("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Dr(),e(Error("Network Error"))},timeout:Za.get()})}var r;Er("gapi.iframes.Iframe")?t():Er("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),p[r]=function(){Er("gapi.load")?n():e(Error("Network Error"))},Ee(Ms(r=bt($a,{onload:r}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw eu=null,t})).then(function(){return new ve(function(r,i){Er("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:Er("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},tu.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var $a=new dt(yt,"https://apis.google.com/js/api.js?onload=%{onload}"),Za=new xr(3e4,6e4),tu=new xr(5e3,15e3),eu=null;function nu(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=xn(this.i,"/__/auth/iframe"),Rn(this.a,"apiKey",this.g),Rn(this.a,"appName",this.h),this.b=null,this.c=[]}function ru(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function iu(t){try{return Xl.a.app(t).auth().Ea()}catch(t){return[]}}function ou(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function su(t){var a=rr();return za(t,Oa,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=Dn(a)).f,n=n.b,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?Dn(i).b==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(ur.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Uo(rr())})}function au(i){return i.l||(i.l=hr().then(function(){var t,e,n,r;i.s||(t=i.c,e=i.h,n=iu(i.b),(r=new nu(i.u,i.f,i.b)).f=t,r.b=e,r.c=K(n||[]),i.s=r.toString()),i.i=new Ja(i.s),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then(function(){t.a.register("authEvent",e,Er("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.i,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=xo(t.authEvent),e=0;e<r.g.length;e++)n=r.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",Ee(e)}return e.status="ERROR",Ee(e)})}(i)})),i.l}function uu(t){return t.m||(t.w=t.c?wr(t.c,iu(t.b)):null,t.m=new Ws(t.f,A(t.h),t.w)),t.m}function cu(t,e,n,r,i,o,s,a,u,c,h){return(t=new ru(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=ht(u||null),t.f=c,t.ub(h).toString()}function hu(t){if(this.a=t||Xl.a.INTERNAL.reactNative&&Xl.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function lu(t){this.b=t,this.a={},this.f=m(this.c,this)}nu.prototype.toString=function(){return this.f?Rn(this.a,"v",this.f):Qn(this.a.a,"v"),this.b?Rn(this.a,"eid",this.b):Qn(this.a.a,"eid"),this.c.length?Rn(this.a,"fw",this.c.join(",")):Qn(this.a.a,"fw"),this.a.toString()},ru.prototype.ub=function(t){return this.h=t,this},ru.prototype.toString=function(){var t=xn(this.s,"/__/auth/handler");if(Rn(t,"apiKey",this.m),Rn(t,"appName",this.c),Rn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=Xl.a.app(this.c).auth().ja()}catch(t){n=null}for(var r in e.kb=n,Rn(t,"providerId",this.a.providerId),n=kr((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=ht(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),ct(n)||Rn(t,"customParameters",Ar(n))}if("function"==typeof this.a.Nb&&((e=this.a.Nb()).length&&Rn(t,"scopes",e.join(","))),this.l?Rn(t,"redirectUrl",this.l):Qn(t.a,"redirectUrl"),this.g?Rn(t,"eventId",this.g):Qn(t.a,"eventId"),this.i?Rn(t,"v",this.i):Qn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Pn(t,s)&&Rn(t,s,this.b[s]);return this.h?Rn(t,"tid",this.h):Qn(t.a,"tid"),this.f?Rn(t,"eid",this.f):Qn(t.a,"eid"),(s=iu(this.c)).length&&Rn(t,"fw",s.join(",")),t.toString()},(t=ou.prototype).Lb=function(e,n,t){var r=new E("popup-closed-by-user"),i=new E("web-storage-unsupported"),o=this,s=!1;return this.ka().then(function(){var t,r;r={type:"webStorageSupport"},au(t=o).then(function(){return e=t.i,n=r,e.nb.then(function(){return new ve(function(t){e.a.send(n.type,n,t,Er("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&sr(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new ve(function(e){return function t(){wn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return wn(t).then(function(){n(r)})})},t.Ub=function(){var t=br();return!Nr(t)&&!Pr(t)},t.Qb=function(){return!1},t.Jb=function(e,t,n,r,i,o,s,a){if(!e)return Ie(new E("popup-blocked"));if(s&&!Nr())return this.ka().o(function(t){sr(e),i(t)}),r(),Ee();this.a||(this.a=su(uu(this)));var u=this;return this.a.then(function(){var t=u.ka().o(function(t){throw sr(e),i(t),t});return r(),t}).then(function(){Po(n),s||ir(cu(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,a),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Kb=function(t,e,n,r){this.a||(this.a=su(uu(this)));var i=this;return this.a.then(function(){Po(e),ir(cu(i.u,i.f,i.b,t,e,rr(),n,i.c,void 0,i.h,r))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ka=function(){var t=this;return au(this).then(function(){return t.i.nb}).o(function(){throw t.a=null,new E("network-request-failed")})},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(e){G(this.g,function(t){return t==e})},(t=hu.prototype).get=function(t){return Ee(this.a.getItem(t)).then(function(t){return t&&Or(t)})},t.set=function(t,e){return Ee(this.a.setItem(t,Ar(e)))},t.T=function(t){return Ee(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var fu,pu=[];function du(t,e,n){ct(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function vu(t){this.a=t}function gu(t){this.c=t,this.b=!1,this.a=[]}function yu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return Ie(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ve(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return mu(r,c),t}).o(function(t){throw mu(r,c),t})}function mu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),G(t.a,function(t){return t==e}))}function _u(){if(!Eu())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=p.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t,e,n,r=this;pr()&&self?(this.l=(n=pr()?self:null,j(pu,function(t){t.b==n&&(e=t)}),e||(e=new lu(n),pu.push(e)),e),du(this.l,"keyChanged",function(t,n){return Nu(r).then(function(e){return 0<e.length&&j(r.a,function(t){t(e)}),{keyProcessed:W(e,n.key)}})}),du(this.l,"ping",function(){return Ee(["keyChanged"])})):((t=p.navigator)&&t.serviceWorker?Ee().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Ee(null)).then(function(t){(r.h=t)&&(r.g=new gu(new vu(t)),yu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&W(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function wu(i){return new ve(function(e,n){var t=i.u.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new ve(function(t,e){var n=r.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return wu(i)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}function bu(t){return t.m||(t.m=wu(t)),t.m}function Eu(){try{return p.indexedDB}catch(t){return}}function Iu(t){return t.objectStore("firebaseLocalStorage")}function Tu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Su(t){return new ve(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Cu(t,e){return t.g&&t.h&&((n=p.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?yu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Ee();var n}function Nu(r){return bu(r).then(function(t){var i=Iu(Tu(t,!1));return i.getAll?Su(i.getAll()):new ve(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Au(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ku(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ee().then(function(){if(Eu()){var e=Rr(),n="__sak"+e;return fu=fu||new _u,(i=fu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ba(function(e){j(r.a,function(t){t(e)})}),t})}function Ou(){this.a={},this.type="inMemory"}function Ru(){if(!function(){var t="Node"==dr();if(!(t=Pu()||t&&Xl.a.INTERNAL.node&&Xl.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==dr())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Pu()||Xl.a.INTERNAL.node.localStorage,this.type="localStorage"}function Pu(){try{var t=p.localStorage,e=Rr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Du(){this.type="nullStorage"}function xu(){if(!function(){var t="Node"==dr();if(!(t=Lu()||t&&Xl.a.INTERNAL.node&&Xl.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==dr())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Lu()||Xl.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Lu(){try{var t=p.sessionStorage,e=Rr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Mu(){var t={};t.Browser=ju,t.Node=Vu,t.ReactNative=qu,t.Worker=Bu,this.a=t[dr()]}lu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],j(t,function(t){e.push(Ee().then(function(){return t(n.origin,n.data.data)}))}),Se(e).then(function(t){var e=[];j(t,function(t){e.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})}),j(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},vu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},gu.prototype.close=function(){for(;0<this.a.length;)mu(this,this.a[0]);this.b=!0},(t=_u.prototype).set=function(n,r){var i,o=!1,s=this;return bu(this).then(function(t){return Su((t=Iu(Tu(i=t,!0))).get(n))}).then(function(t){var e=Iu(Tu(i,!0));return t?(t.value=r,Su(e.put(t))):(s.b++,o=!0,(t={}).fbase_key=n,t.value=r,Su(e.add(t)))}).then(function(){return s.c[n]=r,Cu(s,n)}).ma(function(){o&&s.b--})},t.get=function(e){return bu(this).then(function(t){return Su(Iu(Tu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=!1,r=this;return bu(this).then(function(t){return n=!0,r.b++,Su(Iu(Tu(t,!0)).delete(e))}).then(function(){return delete r.c[e],Cu(r,e)}).ma(function(){n&&r.b--})},t.ba=function(t){var n;0==this.a.length&&(Au(n=this),function e(){n.f=setTimeout(function(){n.i=Nu(n).then(function(e){0<e.length&&j(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ha=function(e){G(this.a,function(t){return t==e}),0==this.a.length&&Au(this)},(t=ku.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ba=function(t){this.a.push(t)},t.ha=function(e){G(this.a,function(t){return t==e})},(t=Ou.prototype).get=function(t){return Ee(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ee()},t.T=function(t){return delete this.a[t],Ee()},t.ba=function(){},t.ha=function(){},(t=Ru.prototype).get=function(t){var e=this;return Ee().then(function(){return Or(e.a.getItem(t))})},t.set=function(e,n){var r=this;return Ee().then(function(){var t=Ar(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return Ee().then(function(){e.a.removeItem(t)})},t.ba=function(t){p.window&&nn(p.window,"storage",t)},t.ha=function(t){p.window&&sn(p.window,"storage",t)},(t=Du.prototype).get=function(){return Ee(null)},t.set=function(){return Ee()},t.T=function(){return Ee()},t.ba=function(){},t.ha=function(){},(t=xu.prototype).get=function(t){var e=this;return Ee().then(function(){return Or(e.a.getItem(t))})},t.set=function(e,n){var r=this;return Ee().then(function(){var t=Ar(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return Ee().then(function(){e.a.removeItem(t)})},t.ba=function(){},t.ha=function(){};var Fu,Uu,ju={F:Ru,$a:xu},Vu={F:Ru,$a:xu},qu={F:hu,$a:Du},Bu={F:Ru,$a:Du},Wu={od:"local",NONE:"none",qd:"session"};function Hu(){var t=!(Pr(br())||!fr()),e=Nr(),n=Ir();this.m=t,this.h=e,this.l=n,this.a={},t=Fu=Fu||new Mu;try{this.g=!nr()&&Fr()||!p.indexedDB?new t.a.F:new ku(pr()?new Ou:new t.a.F)}catch(t){this.g=new Ou,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new Ou}this.u=new Ou,this.f=m(this.Vb,this),this.b={}}function Gu(){return Uu=Uu||new Hu}function Qu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Ku(t,e){return"firebase:"+t.name+(e?":"+e:"")}function zu(t,e,n){return n=Ku(e,n),"local"==e.F&&(t.b[n]=null),Qu(t,e.F).T(n)}function Xu(t){t.c&&(clearInterval(t.c),t.c=null)}function Yu(t){this.a=t,this.b=Gu()}(t=Hu.prototype).get=function(t,e){return Qu(this,t.F).get(Ku(t,e))},t.set=function(e,t,n){var r=Ku(e,n),i=this,o=Qu(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Ku(t,e),this.l&&(this.b[t]=p.localStorage.getItem(t)),ct(this.a)&&(Qu(this,"local").ba(this.f),this.h||(nr()||!Fr())&&p.indexedDB||!this.l||(Xu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=p.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Ge({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Vb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Ku(t,e),this.a[t]&&(G(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ct(this.a)&&(Qu(this,"local").ha(this.f),Xu(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=p.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Qu(this,"local").ha(this.f):Xu(this),this.m)if(n=p.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?p.localStorage.setItem(e,r):p.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===p.localStorage.getItem(e)||(o.b[e]=p.localStorage.getItem(e),o.ib(e))};Wt&&$t&&10==$t&&p.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else j(t,m(this.ib,this))},t.ib=function(t){this.a[t]&&j(this.a[t],function(t){t()})};var Ju,$u={name:"authEvent",F:"local"};function Zu(){this.a=Gu()}function tc(t,e){this.b=ec,this.f=p.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=p.Int32Array?new Int32Array(64):Array(64),void 0===Ju&&(Ju=p.Int32Array?new Int32Array(uc):uc),this.reset()}b(tc,function(){this.b=-1});for(var ec=64,nc=ec-1,rc=[],ic=0;ic<nc;ic++)rc[ic]=0;var oc=Q(128,rc);function sc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Ju[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function ac(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(sc(t),i=0);else{if(!l(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(sc(t),i=0)}}t.c=i,t.g+=n}tc.prototype.reset=function(){this.g=this.c=0,this.a=p.Int32Array?new Int32Array(this.h):K(this.h)};var uc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function cc(){tc.call(this,8,hc)}b(cc,tc);var hc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function lc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new Zu,this.g=new Yu(this.h),this.f=null,this.b=[],this.a=this.c=null}function fc(t){return new E("invalid-cordova-configuration",t)}function pc(t){var e=new cc;ac(e,t),t=[];var n=8*e.g;e.c<56?ac(e,oc,56-e.c):ac(e,oc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(sc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return q(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function dc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function vc(a){return a.f||(a.f=a.ka().then(function(){return new ve(function(n){function e(r){t=!0,s&&s.cancel(),gc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,-1!=(n=Ji(r.url)).indexOf("/__/auth/callback")&&(e=(e="object"==typeof(e=Or(Pn(e=Dn(n),"firebaseError")||null))?I(e):null)?new Do(t.c,t.b,null,null,e,null,t.S()):new Do(t.c,t.b,n,t.f,null,null,t.S())),n=e||o),dc(i,n)})}var i,o,t,s,r;a.Ca(function t(e){return n(e),a.Qa(t),!1}),i=a,o=new Do("unknown",null,null,null,new E("no-auth-event")),t=!1,s=wn(500).then(function(){return gc(i).then(function(){t||dc(i,o)})}),r=p.handleOpenURL,p.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Er("BuildInfo.packageName",p).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Fo=Fo||new Lo,function(t){var n=Fo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=Er("universalLinks.subscribe",p))&&t(null,n.b))}(e)})})),a.f}function gc(e){var t,n=null;return(t=e.g).b.get($u,t.a).then(xo).then(function(t){return n=t,zu((t=e.g).b,$u,t.a)}).then(function(){return n})}function yc(t){this.a=t,this.b=Gu()}(t=lc.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(lr(void 0)?hr().then(function(){return new ve(function(t,e){var n=p.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Ie(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Er("universalLinks.subscribe",p))throw fc("cordova-universal-links-plugin-fix is not installed");if(void 0===Er("BuildInfo.packageName",p))throw fc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Er("cordova.plugins.browsertab.openUrl",p))throw fc("cordova-plugin-browsertab is not installed");if("function"!=typeof Er("cordova.InAppBrowser.open",p))throw fc("cordova-plugin-inappbrowser is not installed")},function(){throw new E("cordova-not-ready")})},t.Lb=function(t,e){return e(new E("operation-not-supported-in-this-environment")),Ee()},t.Jb=function(){return Ie(new E("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return Ie(new E("redirect-operation-pending"));var i=this,o=p.document,s=null,a=null,u=null,c=null;return this.c=Ee().then(function(){return Po(e),vc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Do(t,r,null,o,new E("no-auth-event"),null,i),a=Er("BuildInfo.packageName",p);if("string"!=typeof a)throw new E("invalid-cordova-configuration");var u=Er("BuildInfo.displayName",p),c={};if(br().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!br().toLowerCase().match(/android/))return Ie(new E("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=pc(o),c.sessionId=o;var h=cu(n.u,n.i,n.l,t,e,null,r,n.m,c,n.s,i);return n.ka().then(function(){var t=n.h;return n.w.a.set($u,s.v(),t)}).then(function(){var t=Er("cordova.plugins.browsertab.isAvailable",p);if("function"!=typeof t)throw new E("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=Er("cordova.plugins.browsertab.openUrl",p)))throw new E("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=Er("cordova.InAppBrowser.open",p)))throw new E("invalid-cordova-configuration");t=br(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new ve(function(e,t){a=function(){var t=Er("cordova.plugins.browsertab.close",p);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(a),u=function(){s=s||wn(2e3).then(function(){t(new E("redirect-cancelled-by-user"))})},c=function(){Lr()&&u()},o.addEventListener("resume",u,!1),br().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return gc(i).then(function(){throw t})})}).ma(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Qa(a),i.c=null})},t.Ca=function(e){this.b.push(e),vc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Do("unknown",null,null,null,new E("no-auth-event")),e(t))})},t.Qa=function(e){G(this.b,function(t){return t==e})};var mc={name:"pendingRedirect",F:"session"};function _c(t){return zu(t.b,mc,t.a)}function wc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new xc,this.B=new jc,this.g=new yc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=bc(this.D,this.u,this.m,T)}function bc(t,e,n,r){var i=Xl.a.SDK_VERSION||null;return new(lr()?lc:ou)(t,e,n,i,r)}function Ec(e){e.f||(e.f=!0,e.a.Ca(e.l));var n=e.a;return e.a.ka().o(function(t){throw e.a==n&&e.reset(),t})}function Ic(n){n.a.Ub()&&Ec(n).o(function(t){var e=new Do("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));kc(t)&&n.s(e)}),n.a.Qb()||Lc(n.b)}function Tc(n,t){var e;W(n.h,t)||n.h.push(t),n.f||(e=n.g).b.get(mc,e.a).then(function(t){return"pending"==t}).then(function(t){t?_c(n.g).then(function(){Ec(n).o(function(t){var e=new Do("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));kc(t)&&n.s(e)})}):Ic(n)}).o(function(){Ic(n)})}function Sc(t,e){G(t.h,function(t){return t==e})}wc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=bc(this.D,this.u,this.m),this.i={}},wc.prototype.s=function(t){if(!t)throw new E("invalid-auth-event");if(6e5<=w()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=w())),e=!0;break}}return Lc(this.b),e};var Cc=new xr(2e3,1e4),Nc=new xr(3e4,6e4);function Ac(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,function(){t.f||(t.f=!0,t.a.Ca(t.l))},function(){t.reset()},i,o,s)}function kc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Oc(e,t,n,r,i){var o,s;return(s=e.g).b.set(mc,"pending",s.a).then(function(){return e.a.Kb(t,n,r,i).o(function(t){if(kc(t))throw new E("operation-not-supported-in-this-environment");return o=t,_c(e.g).then(function(){throw o})}).then(function(){return e.a.Xb()?new ve(function(){}):_c(e.g).then(function(){return e.pa()}).then(function(){}).o(function(){})})})}function Rc(t,e,n,r,i){return t.a.Lb(r,function(t){e.la(n,null,t,i)},Cc.get())}wc.prototype.pa=function(){return this.b.pa()};var Pc={};function Dc(t,e,n){var r=e+":"+n;return Pc[r]||(Pc[r]=new wc(t,e,n)),Pc[r]}function xc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Lc(t){t.g||(t.g=!0,Uc(t,!1,null,null))}function Mc(t){t.g&&!t.i&&Uc(t,!1,null,null)}function Fc(t,e){if(t.b=function(){return Ee(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Uc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ie(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Fc(t,n):Fc(t,{user:null}),t.f=[],t.c=[]}function jc(){}function Vc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function qc(t,e){this.a=e,Br(this,"verificationId",t)}function Bc(t,e,n,r){return new ko(t).cb(e,n).then(function(t){return new qc(t,r)})}function Wc(t){var e=Fi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Wr(this,{token:t,expirationTime:Mr(1e3*e.exp),authTime:Mr(1e3*e.auth_time),issuedAtTime:Mr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Hc(t,e,n){var r=e&&e[Qc];if(!r)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ht(e),this.g=n,this.c=new $i(null,r),this.b=[];var i=this;j(e[Gc]||[],function(t){(t=Kr(t))&&i.b.push(t)}),Br(this,"auth",this.a),Br(this,"session",this.c),Br(this,"hints",this.b)}xc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},xc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Uc(this,!0,null,t.a),Ee()):e.Da(n,r)?function(e,t,n){n=n.Da(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Uc(e,a,t,null)}).o(function(t){Uc(e,a,null,t)})}(this,t,e):Ie(new E("invalid-auth-event")):(Uc(this,!1,null,null),Ee())):Ie(new E("invalid-auth-event"))},xc.prototype.pa=function(){var i=this;return new ve(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new E("timeout"),n.a&&n.a.cancel(),n.a=wn(Nc.get()).then(function(){n.b||(n.g=!0,Uc(n,!0,null,r))}))})},jc.prototype.h=function(t,e){var n,r,i,o,s,a;t?(n=t.c,r=t.b,t.a?(e.la(t.c,null,t.a,t.b),Ee()):e.Da(n,r)?(o=e,s=(i=t).b,a=i.c,o.Da(a,s)(i.g,i.f,i.S(),i.i).then(function(t){o.la(a,t,null,s)}).o(function(t){o.la(a,null,t,s)})):Ie(new E("invalid-auth-event"))):Ie(new E("invalid-auth-event"))},qc.prototype.confirm=function(t){return t=Oo(this.verificationId,t),this.a(t)};var Gc="mfaInfo",Qc="mfaPendingCredential";function Kc(t,e,n,r){E.call(this,"multi-factor-auth-required",r,e),this.b=new Hc(t,e,n),Br(this,"resolver",this.b)}function zc(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Kc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Xc(){}function Yc(t){Br(this,"factorId",t.ea),this.a=t}function Jc(t){if(Yc.call(this,t),this.a.ea!=ko.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function $c(t,e){for(var n in He.call(this,t),e)this[n]=e[n]}function Zc(t,e){this.a=t,this.b=[],this.c=m(this.wc,this),nn(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&j(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Yr]=t.uid),t.displayName&&(n[zr]=t.displayName),t.enrollmentTime&&(n[Xr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Jr]=t.phoneNumber);try{e=new $r(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),th(this,r)}function th(t,e){t.b=e,Br(t,"enrolledFactors",e)}function eh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function nh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function rh(t){this.c=t,this.b=this.a=null}function ih(t){return t.b&&1e3*t.b.c||0}function oh(t,e){var n=e.refreshToken;t.b=Mi(e[Gs]||""),t.a=n}function sh(e,t){return r=e.c,i=t,new ve(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?$s(r,r.u+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ya(t)):t.access_token&&t.refresh_token?e(t):n(new E("internal-error")):n(new E("network-request-failed"))},"POST",Gn(i).toString(),r.g,r.m.get()):n(new E("internal-error"))}).then(function(t){return e.b=Mi(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function ah(t,e){this.a=t||null,this.b=e||null,Wr(this,{lastSignInTime:Mr(e||null),creationTime:Mr(t||null)})}function uh(t,e,n,r,i,o){Wr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function ch(t,e,n){var r;this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=Xl.a.SDK_VERSION?wr(Xl.a.SDK_VERSION):null,this.a=new Ws(this.l,A(T),t),this.b=new rh(this.a),gh(this,e[Gs]),oh(this.b,e),Br(this,"refreshToken",this.b.a),_h(this,n||{}),vn.call(this),this.P=!1,this.s&&Tr()&&(this.i=Dc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=(r=this,new eh(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=ih(r.b)-w()-3e5;return 0<t?t:0})),this.Z=m(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){lh(i,t.c)},this.$=null,this.O=new Zc(this,n),Br(this,"multiFactor",this.O)}function hh(t,e){t.aa&&sn(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&nn(e,"languageCodeChanged",t.za)}function lh(t,e){t.W=e,Js(t.a,Xl.a.SDK_VERSION?wr(Xl.a.SDK_VERSION,t.W):null)}function fh(t,e){t.$&&sn(t.$,"frameworkChanged",t.ya),(t.$=e)&&nn(e,"frameworkChanged",t.ya)}function ph(e){try{return Xl.a.app(e.m).auth()}catch(t){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function dh(t){t.D||t.B.b||(t.B.start(),sn(t,"tokenChanged",t.Z),nn(t,"tokenChanged",t.Z))}function vh(t){sn(t,"tokenChanged",t.Z),t.B.stop()}function gh(t,e){t.xa=e,Br(t,"_lat",e)}function yh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Se(e).then(function(){return t})}function mh(t){t.i&&!t.P&&(t.P=!0,Tc(t.i,t))}function _h(t,e){Wr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new ah(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function wh(){}function bh(t){return Ee().then(function(){if(t.D)throw new E("app-deleted")})}function Eh(t){return q(t.providerData,function(t){return t.providerId})}function Ih(t,e){e&&(Th(t,e.providerId),t.providerData.push(e))}function Th(t,e){G(t.providerData,function(t){return t.providerId==e})}function Sh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Br(t,e,n)}function Ch(e,t){var n,r,i;e!=t&&(Wr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Br(e,"metadata",new ah((i=t.metadata).a,i.b)):Br(e,"metadata",new ah),j(t.providerData,function(t){Ih(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,Br(e,"refreshToken",e.b.a),th(e.O,t.O.b))}function Nh(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,za((e=i).a,Sa,{idToken:n}).then(m(e.Ic,e)).then(function(){return r||Sh(i,"isAnonymous",!1),t})})}function Ah(t,e){e[Gs]&&t.xa!=e[Gs]&&(oh(t.b,e),t.dispatchEvent(new $c("tokenChanged")),gh(t,e[Gs]),Sh(t,"refreshToken",t.b.a))}function kh(t,e){return Nh(t).then(function(){if(W(Eh(t),e))return yh(t).then(function(){throw new E("provider-already-linked")})})}function Oh(t,e,n){return Hr({user:t,credential:Ro(e),additionalUserInfo:e=Bi(e),operationType:n})}function Rh(t,e){return Ah(t,e),t.reload().then(function(){return t})}function Ph(n,r,t,e,i){if(!Tr())return Ie(new E("operation-not-supported-in-this-environment"));if(n.h&&!i)return Ie(n.h);var o=qi(t.providerId),s=Rr(n.uid+":::"),a=null;(!Nr()||fr())&&n.s&&t.isOAuthProvider&&(a=cu(n.s,n.l,n.m,r,t,null,s,Xl.a.SDK_VERSION||null,null,null,n.tenantId));var u=ar(a,o&&o.ta,o&&o.sa);return e=e().then(function(){if(xh(n),!i)return n.I().then(function(){})}).then(function(){return Ac(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new ve(function(t,e){n.la(r,null,new E("cancelled-popup-request"),n.g||null),n.f=t,n.w=e,n.g=s,n.c=Rc(n.i,n,r,u,s)})}).then(function(t){return u&&sr(u),t?Hr(t):null}).o(function(t){throw u&&sr(u),t}),Lh(n,e,i)}function Dh(e,t,n,r,i){if(!Tr())return Ie(new E("operation-not-supported-in-this-environment"));if(e.h&&!i)return Ie(e.h);var o=null,s=Rr(e.uid+":::");return r=r().then(function(){if(xh(e),!i)return e.I().then(function(){})}).then(function(){return e.fa=s,yh(e)}).then(function(t){return e.ga&&(t=(t=e.ga).b.set(Uh,e.v(),t.a)),t}).then(function(){return Oc(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ga)return jh(e.ga);throw o}).then(function(){if(o)throw o}),Lh(e,r,i)}function xh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new E("internal-error");throw new E("auth-domain-config-required")}}function Lh(n,t,e){var r,i,o,s=(i=t,o=e,(r=n).h&&!o?(i.cancel(),Ie(r.h)):i.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new $c("userInvalidated")),r.h=t),t}));return n.N.push(s),s.ma(function(){H(n.N,s)}),s.o(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=zc(t.v(),ph(n),m(n.hc,n))),e||t})}function Mh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Gs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new ch(e,n,t);return t.providerData&&j(t.providerData,function(t){t&&Ih(r,Hr(t))}),t.redirectEventId&&(r.fa=t.redirectEventId),r}function Fh(t){this.a=t,this.b=Gu()}Hc.prototype.Pc=function(t){var n=this;return t.ob(this.a.b,this.c).then(function(t){var e=ht(n.f);return delete e[Gc],delete e[Qc],ft(e,t),n.g(e)})},b(Kc,E),Xc.prototype.ob=function(t,e,n){return e.type==Zi?(o=this,s=t,a=n,e.Fa().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),ft(t,{phoneVerificationInfo:Ao(o.a)}),za(s,Ia,t)})):(r=this,i=t,e.Fa().then(function(t){return ft(t={mfaPendingCredential:t},{phoneVerificationInfo:Ao(r.a)}),za(i,Ta,t)}));var r,i,o,s,a},b(Yc,Xc),b(Jc,Yc),b($c,He),(t=Zc.prototype).wc=function(t){var e,n;th(this,(e=t.ed,n=[],j(e.mfaInfo||[],function(t){(t=Kr(t))&&n.push(t)}),n))},t.Ob=function(){return this.a.I().then(function(t){return new $i(t,null)})},t.dc=function(e,n){var r=this,i=this.a.a;return this.Ob().then(function(t){return e.ob(i,t,n)}).then(function(t){return Ah(r.a,t),r.a.reload()})},t.$c=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return za(e,Ka,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=V(n.b,function(t){return t.uid!=r});return th(n,e),Ah(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.v=function(){return{multiFactor:{enrolledFactors:q(this.b,function(t){return t.v()})}}},eh.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=wn(nh(n,t)).then(function(){return e=p.document,n=null,Lr()||!e?Ee():new ve(function(t){n=function(){Lr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},eh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},rh.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:ih(this)}},rh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ie(new E("user-token-expired")):t||!this.b||w()>ih(this)-3e4?this.a?sh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ee(null):Ee({accessToken:this.b.toString(),refreshToken:this.a})},ah.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},b(ch,vn),ch.prototype.va=function(t){this.oa=t,Ys(this.a,t)},ch.prototype.ja=function(){return this.oa},ch.prototype.Ea=function(){return K(this.W)},ch.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Br(ch.prototype,"providerId","firebase"),(t=ch.prototype).reload=function(){var t=this;return Lh(this,bh(this).then(function(){return Nh(t).then(function(){return yh(t)}).then(wh)}))},t.mc=function(t){return this.I(t).then(function(t){return new Wc(t)})},t.I=function(t){var e=this;return Lh(this,bh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new E("internal-error");return t.accessToken!=e.xa&&(gh(e,t.accessToken),e.dispatchEvent(new $c("tokenChanged"))),Sh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new E("internal-error");_h(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?q(e,function(t){return new uh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)Ih(this,n[r]);Sh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new $c("userReloaded",{ed:t}))},t.Jc=function(t){return Vr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Lh(this,t.c(this.a,this.uid).then(function(t){return Ah(e,t),n=Oh(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Ac=function(t){return Vr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(e){var n=this,r=null;return Lh(this,kh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=Oh(n,t,"link"),Rh(n,t)}).then(function(){return r}))},t.Bc=function(t,e){var n=this;return Lh(this,kh(this,"phone").then(function(){return Bc(ph(n),t,e,m(n.mb,n))}))},t.Kc=function(t,e){var n=this;return Lh(this,Ee().then(function(){return Bc(ph(n),t,e,m(n.pb,n))}),!0)},t.xb=function(e){var n=this;return Lh(this,this.I().then(function(t){return n.a.xb(t,e)}).then(function(t){return Ah(n,t),n.reload()}))},t.cd=function(e){var n=this;return Lh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Ah(n,t),n.reload()}))},t.yb=function(e){var n=this;return Lh(this,this.I().then(function(t){return n.a.yb(t,e)}).then(function(t){return Ah(n,t),n.reload()}))},t.zb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return bh(this);var n=this;return Lh(this,this.I().then(function(t){return n.a.zb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Ah(n,t),Sh(n,"displayName",t.displayName||null),Sh(n,"photoURL",t.photoUrl||null),j(n.providerData,function(t){"password"===t.providerId&&(Br(t,"displayName",n.displayName),Br(t,"photoURL",n.photoURL))}),yh(n)}).then(wh))},t.ad=function(e){var n=this;return Lh(this,Nh(this).then(function(t){return W(Eh(n),e)?za(n.a,wa,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return j(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),j(Eh(n),function(t){e[t]||Th(n,t)}),e[ko.PROVIDER_ID]||Br(n,"phoneNumber",null),yh(n)}):yh(n).then(function(){throw new E("no-such-provider")})}))},t.delete=function(){var e=this;return Lh(this,this.I().then(function(t){return za(e.a,_a,{idToken:t})}).then(function(){e.dispatchEvent(new $c("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");hh(e,null),fh(e,null),e.N=[],e.D=!0,vh(e),Br(e,"refreshToken",null),e.i&&Sc(e.i,e)})},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?m(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?m(this.Ib,this):null},t.Cc=function(t){var e=this;return Ph(this,"linkViaPopup",t,function(){return kh(e,t.providerId).then(function(){return yh(e)})},!1)},t.Lc=function(t){return Ph(this,"reauthViaPopup",t,function(){return Ee()},!0)},t.Dc=function(t){var e=this;return Dh(this,"linkViaRedirect",t,function(){return kh(e,t.providerId)},!1)},t.Mc=function(t){return Dh(this,"reauthViaRedirect",t,function(){return Ee()},!0)},t.Hb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return fa(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Oh(i,t,"link"),Rh(i,t)}).then(function(){return o}),Lh(this,t)},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Lh(this,Ee().then(function(){return no(pa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Oh(i,t,"reauthenticate"),Ah(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.qb=function(e){var n=this,r=null;return Lh(this,this.I().then(function(t){return r=t,void 0===e||ct(e)?{}:Pi(new Ei(e))}).then(function(t){return n.a.qb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Ab=function(e,n){var r=this,i=null;return Lh(this,this.I().then(function(t){return i=t,void 0===n||ct(n)?{}:Pi(new Ei(n))}).then(function(t){return r.a.Ab(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.hc=function(t){var e=null,n=this;return Lh(this,t=no(Ee(t),n.uid).then(function(t){return e=Oh(n,t,"reauthenticate"),Ah(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.v()},t.v=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&ft(e,this.metadata.v()),j(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),ft(e,this.O.v()),e};var Uh={name:"redirectUser",F:"session"};function jh(t){return zu(t.b,Uh,t.a)}function Vh(t){var e,n,r,i;this.a=t,this.b=Gu(),this.c=null,this.f=(n=Wh("local"),r=Wh("session"),i=Wh("none"),function(n,r,i){var o=Ku(r,i),s=Qu(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=Or(p.localStorage.getItem(o))}catch(t){}if(e&&!t)return p.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&p.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Bh,e.a).then(function(t){return t?Wh(t):n})})})}).then(function(t){return e.c=t,qh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Wh("local"),this.a,m(this.g,this))}function qh(t,e){var n,a,r=[];for(n in Wu)Wu[n]!==e&&r.push(zu(t.b,Wh(Wu[n]),t.a));return r.push(zu(t.b,Bh,t.a)),a=r,new ve(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Te(a[s],_(t,s),o);else n(i)})}Vh.prototype.g=function(){var e=this,n=Wh("local");Kh(this,function(){return Ee().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return qh(e,"local").then(function(){e.c=n})})})};var Bh={name:"persistence",F:"session"};function Wh(t){return{name:"authUser",F:t}}function Hh(t,e){return Kh(t,function(){return t.b.set(t.c,e.v(),t.a)})}function Gh(t){return Kh(t,function(){return zu(t.b,t.c,t.a)})}function Qh(t,e){return Kh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Mh(t||{})})})}function Kh(t,e){return t.f=t.f.then(e,e),t.f}function zh(t){if(this.l=!1,Br(this,"settings",new Vc),Br(this,"app",t),!nl(this).options||!nl(this).options.apiKey)throw new E("invalid-api-key");var n,e,r,i,o,s,a,u;t=Xl.a.SDK_VERSION?wr(Xl.a.SDK_VERSION):null,this.b=new Ws(nl(this).options&&nl(this).options.apiKey,A(T),t),this.P=[],this.m=[],this.O=[],this.$b=Xl.a.INTERNAL.createSubscribe(m(this.xc,this)),this.W=void 0,this.ac=Xl.a.INTERNAL.createSubscribe(m(this.yc,this)),tl(this,null),this.i=new Vh(nl(this).options.apiKey+":"+nl(this).name),this.B=new Fh(nl(this).options.apiKey+":"+nl(this).name),this.Z=sl(this,(e=nl(n=this).options.authDomain,r=function(e){var t=function(t,e){return t.b.get(Uh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Mh(t||{})})}(e.B,nl(e).options.authDomain).then(function(t){return(e.D=t)&&(t.ga=e.B),jh(e.B)});return sl(e,t)}(n).then(function(){return Qh(n.i,e)}).then(function(e){return e?(e.ga=n.B,n.D&&(n.D.fa||null)==(e.fa||null)?e:e.reload().then(function(){return Hh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Gh(n.i)})):null}).then(function(t){tl(n,t||null)}),sl(n,r))),this.h=sl(this,(i=this).Z.then(function(){return $h(i)}).o(function(){}).then(function(){if(!i.l)return i.oa()}).o(function(){}).then(function(){var t;i.l||(i.aa=!0,(t=i.i).b.addListener(Wh("local"),t.a,i.oa))})),this.aa=!1,this.oa=m(this.Xc,this),this.Ma=m(this.ca,this),this.xa=m(this.jc,this),this.ya=m(this.uc,this),this.za=m(this.vc,this),this.a=null,s=nl(o=this).options.authDomain,a=nl(o).options.apiKey,s&&Tr()&&(o.Zb=o.Z.then(function(){var t;if(!o.l)return o.a=Dc(s,a,nl(o).name),Tc(o.a,o),rl(o)&&mh(rl(o)),o.D&&(mh(o.D),(t=o.D).va(o.ja()),hh(t,o),lh(t=o.D,o.N),fh(t,o),o.D=null),o.a})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Ec,this),this.s=0,vn.call(this),u=this,Object.defineProperty(u,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),u.$=null,Object.defineProperty(u,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),u.R=null,this.N=[]}function Xh(t){He.call(this,"languageCodeChanged"),this.g=t}function Yh(t){He.call(this,"frameworkChanged"),this.c=t}function Jh(t){return t.Zb||Ie(new E("auth-domain-config-required"))}function $h(t){if(!Tr())return Ie(new E("operation-not-supported-in-this-environment"));var e=Jh(t).then(function(){return t.a.pa()}).then(function(t){return t?Hr(t):null});return sl(t,e)}function Zh(o,s){var a={};return a.apiKey=nl(o).options.apiKey,a.authDomain=nl(o).options.authDomain,a.appName=nl(o).name,o.Z.then(function(){return t=a,e=s,n=o.B,r=o.Ea(),i=new ch(t,e),n&&(i.ga=n),r&&lh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return rl(o)&&t.uid==rl(o).uid?Ch(rl(o),t):(tl(o,t),mh(t)),o.ca(t)}).then(function(){ol(o)})}function tl(t,e){var n,r;rl(t)&&(n=rl(t),r=t.Ma,G(n.R,function(t){return t==r}),sn(rl(t),"tokenChanged",t.xa),sn(rl(t),"userDeleted",t.ya),sn(rl(t),"userInvalidated",t.za),vh(rl(t))),e&&(e.R.push(t.Ma),nn(e,"tokenChanged",t.xa),nn(e,"userDeleted",t.ya),nn(e,"userInvalidated",t.za),0<t.s&&dh(e)),Br(t,"currentUser",e),e&&(e.va(t.ja()),hh(e,t),lh(e,t.N),fh(e,t))}function el(n,t){var e=null,r=null;return sl(n,t.then(function(t){return e=Ro(t),r=Bi(t),Zh(n,t)},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=zc(t.v(),n,m(n.ic,n))),e||t}).then(function(){return Hr({user:rl(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function nl(t){return t.app}function rl(t){return t.currentUser}function il(t){return rl(t)&&rl(t)._lat||null}function ol(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](il(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](il(t))}}function sl(t,e){return t.P.push(e),e.ma(function(){H(t.P,e)}),e}function al(){}function ul(){this.a={},this.b=1e12}Vh.prototype.tb=function(e){var n=null,r=this;return function(t){var e=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");t:{for(r in Wu)if(Wu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(dr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Eu()&&"none"!==t)throw n;break;default:if(!Ir()&&"none"!==t)throw n}}(e),Kh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,qh(r,e)}).then(function(){if(r.c=Wh(e),n)return r.b.set(r.c,n,r.a)}):Ee()})},b(zh,vn),b(Xh,He),b(Yh,He),(t=zh.prototype).tb=function(t){return t=this.i.tb(t),sl(this,t)},t.va=function(t){this.$===t||this.l||(this.$=t,Ys(this.b,this.$),this.dispatchEvent(new Xh(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=p.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),Js(this.b,Xl.a.SDK_VERSION?wr(Xl.a.SDK_VERSION,this.N):null),this.dispatchEvent(new Yh(this.N))},t.Ea=function(){return K(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:nl(this).options.apiKey,authDomain:nl(this).options.authDomain,appName:nl(this).name,currentUser:rl(this)&&rl(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then(function(){return el(i,la(i.b,o))})},t.Vc=function(e){if(!Tr())return Ie(new E("operation-not-supported-in-this-environment"));var n=this,t=qi(e.providerId),r=Rr(),i=null;(!Nr()||fr())&&nl(this).options.authDomain&&e.isOAuthProvider&&(i=cu(nl(this).options.authDomain,nl(this).options.apiKey,nl(this).name,"signInViaPopup",e,null,r,Xl.a.SDK_VERSION||null,null,null,this.S()));var o=ar(i,t&&t.ta,t&&t.sa);return sl(this,t=Jh(this).then(function(t){return Ac(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new ve(function(t,e){n.la("signInViaPopup",null,new E("cancelled-popup-request"),n.g),n.f=t,n.w=e,n.g=r,n.c=Rc(n.a,n,"signInViaPopup",o,r)})}).then(function(t){return o&&sr(o),t?Hr(t):null}).o(function(t){throw o&&sr(o),t}))},t.Wc=function(t){if(!Tr())return Ie(new E("operation-not-supported-in-this-environment"));var e=this;return sl(this,Jh(this).then(function(){return Kh(t=e.i,function(){return t.b.set(Bh,t.c.F,t.a)});var t}).then(function(){return Oc(e.a,"signInViaRedirect",t,void 0,e.S())}))},t.pa=function(){var e=this;return $h(this).then(function(t){return e.a&&Mc(e.a.b),t}).o(function(t){throw e.a&&Mc(e.a.b),t})},t.bd=function(t){if(!t)return Ie(new E("null-user"));if(this.R!=t.tenantId)return Ie(new E("tenant-id-mismatch"));var e=this,n={};n.apiKey=nl(this).options.apiKey,n.authDomain=nl(this).options.authDomain,n.appName=nl(this).name;var r,i,o,s,a,u,c=(r=t,i=n,o=e.B,s=e.Ea(),a=r.b,(u={})[Gs]=a.b&&a.b.toString(),u.refreshToken=a.a,i=new ch(i||{apiKey:r.l,authDomain:r.s,appName:r.m},u),o&&(i.ga=o),s&&lh(i,s),Ch(i,r),i);return sl(this,this.h.then(function(){if(nl(e).options.apiKey!=t.l)return c.reload()}).then(function(){return rl(e)&&t.uid==rl(e).uid?(Ch(rl(e),t),e.ca(t)):(tl(e,c),mh(c),e.ca(c))}).then(function(){ol(e)}))},t.wb=function(){var t=this,e=this.h.then(function(){return t.a&&Mc(t.a.b),rl(t)?(tl(t,null),Gh(t.i).then(function(){ol(t)})):Ee()});return sl(this,e)},t.Xc=function(){var r=this;return Qh(this.i,nl(this).options.authDomain).then(function(t){if(!r.l){var e,n;if((n=rl(r)&&t)&&(n=rl(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return Ch(rl(r),t),rl(r).I();(rl(r)||t)&&(tl(r,t),t&&(mh(t),t.ga=r.B),r.a&&Tc(r.a,r),ol(r))}})},t.ca=function(t){return Hh(this.i,t)},t.jc=function(){ol(this),this.ca(rl(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then(function(){return el(e,Ee(t))})},t.xc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(rl(e))})},t.yc=function(t){var e,n,r=this;n=function(){t.next(rl(r))},(e=this).O.push(n),sl(e,e.h.then(function(){!e.l&&W(e.O,n)&&e.W!==e.getUid()&&(e.W=e.getUid(),n(il(e)))}))},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){f(t)?t(rl(r)):f(t.next)&&t.next(rl(r))}),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){r.W=r.getUid(),f(t)?t(rl(r)):f(t.next)&&t.next(rl(r))}),this.ac(t,e,n)},t.kc=function(t){var e=this,n=this.h.then(function(){return rl(e)?rl(e).I(t).then(function(t){return{accessToken:t}}):null});return sl(this,n)},t.Rc=function(t){var n=this;return this.h.then(function(){return el(n,za(n.b,Ba,{token:t}))}).then(function(t){var e=t.user;return Sh(e,"isAnonymous",!1),n.ca(e),t})},t.Sc=function(t,e){var n=this;return this.h.then(function(){return el(n,za(n.b,Wa,{email:t,password:e}))})},t.cc=function(t,e){var n=this;return this.h.then(function(){return el(n,za(n.b,ya,{email:t,password:e}))})},t.Ya=function(t){var e=this;return this.h.then(function(){return el(e,t.ia(e.b))})},t.Qc=function(t){return Vr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var n=this;return this.h.then(function(){var t=rl(n);if(t&&t.isAnonymous){var e=Hr({providerId:null,isNewUser:!1});return Hr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return el(n,n.b.vb()).then(function(t){var e=t.user;return Sh(e,"isAnonymous",!0),n.ca(e),t})})},t.getUid=function(){return rl(this)&&rl(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&rl(this)&&dh(rl(this))},t.Nc=function(e){var n=this;j(this.m,function(t){t==e&&n.s--}),this.s<0&&(this.s=0),0==this.s&&rl(this)&&vh(rl(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),sl(this,this.h.then(function(){e.l||W(e.m,t)&&t(il(e))}))},t.removeAuthTokenListener=function(e){G(this.m,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Wh("local"),t.a,this.oa),this.a&&(Sc(this.a,this),Mc(this.a.b)),Promise.resolve()},t.fc=function(t){return sl(this,za(this.b,ma,{identifier:t,continueUri:Sr()?rr():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.zc=function(t){return!!So(t)},t.sb=function(e,n){var r=this;return sl(this,Ee().then(function(){var t=new Ei(n);if(!t.c)throw new E("argument-error",Si+" must be true when sending sign in link to email");return Pi(t)}).then(function(t){return r.b.sb(e,t)}).then(function(){}))},t.fd=function(t){return this.Pa(t).then(function(t){return t.data.email})},t.jb=function(t,e){return sl(this,this.b.jb(t,e).then(function(){}))},t.Pa=function(t){return sl(this,this.b.Pa(t).then(function(t){return new Zr(t)}))},t.fb=function(t){return sl(this,this.b.fb(t).then(function(){}))},t.rb=function(e,t){var n=this;return sl(this,Ee().then(function(){return void 0===t||ct(t)?{}:Pi(new Ei(t))}).then(function(t){return n.b.rb(e,t)}).then(function(){}))},t.Uc=function(t,e){return sl(this,Bc(this,t,e,m(this.Ya,this)))},t.Tc=function(n,r){var i=this;return sl(this,Ee().then(function(){var t=r||rr(),e=To(n,t);if(!(t=So(t)))throw new E("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new E("tenant-id-mismatch");return i.Ya(e)}))},al.prototype.render=function(){},al.prototype.reset=function(){},al.prototype.getResponse=function(){},al.prototype.execute=function(){};var cl=null;function hl(t,e){return(e=ll(e))&&t.a[e]||null}function ll(t){return(t=void 0===t?1e12:t)?t.toString():null}function fl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ne(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():nn(this.f,"click",this.i)}function pl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function dl(){}function vl(){}ul.prototype.render=function(t,e){return this.a[this.b.toString()]=new fl(t,e),this.b++},ul.prototype.reset=function(t){var e=hl(this,t);t=ll(t),e&&t&&(e.delete(),delete this.a[t])},ul.prototype.getResponse=function(t){return(t=hl(this,t))?t.getResponse():null},ul.prototype.execute=function(t){(t=hl(this,t))&&t.execute()},fl.prototype.getResponse=function(){return pl(this),this.b},fl.prototype.execute=function(){pl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},fl.prototype.delete=function(){pl(this),this.g=!0,clearTimeout(this.a),this.a=null,sn(this.f,"click",this.i)},Br(dl,"FACTOR_ID","phone"),vl.prototype.g=function(){return Ee(cl=cl||new ul)},vl.prototype.c=function(){};var gl=null;function yl(){this.b=p.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var ml=new dt(yt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),_l=new xr(3e4,6e4);yl.prototype.g=function(i){var o=this;return new ve(function(t,e){var r=setTimeout(function(){e(new E("network-request-failed"))},_l.get());!p.grecaptcha||i!==o.f&&!o.b?(p[o.a]=function(){var n;p.grecaptcha?(o.f=i,n=p.grecaptcha.render,p.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(p.grecaptcha)):(clearTimeout(r),e(new E("internal-error"))),delete p[o.a]},Ee(Ms(bt(ml,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(p.grecaptcha))})},yl.prototype.c=function(){this.b--};var wl=null;function bl(t,e,n,r,i,o,s){if(Br(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s=s?gl=gl||new vl:wl=wl||new yl,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Tl])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Sl],!p.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ne(e)||!this.i&&ne(e).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ws(t,o||null,i||null),this.w=r||function(){return null};var a=this;this.l=[];var u=this.a[El];this.a[El]=function(t){var e;Cl(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=Er(u,p))&&e(t)};var c=this.a[Il];this.a[Il]=function(){var t;Cl(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=Er(c,p))&&t()}}var El="callback",Il="expired-callback",Tl="sitekey",Sl="size";function Cl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Nl(t,e){return t.h.push(e),e.ma(function(){H(t.h,e)}),e}function Al(t){if(t.D)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function kl(t,e,n){var r=!1;try{this.b=n||Xl.a.app()}catch(t){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Xl.a.SDK_VERSION?wr(Xl.a.SDK_VERSION,o):null,bl.call(this,n,t,e,function(){try{var e=i.b.auth().ja()}catch(t){e=null}return e},o,A(T),r)}function Ol(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=Rl.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=Rl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new E("argument-error",t+" failed: "+r)}(t=bl.prototype).Ga=function(){var e=this;return this.f?this.f:this.f=Nl(this,Ee().then(function(){if(Sr()&&!pr())return hr();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.w())}).then(function(t){return e.g=t,za(e.s,Ra,{})}).then(function(t){e.a[Tl]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},t.render=function(){Al(this);var n=this;return Nl(this,this.Ga().then(function(){var t,e;return null===n.c&&(e=n.u,n.i||(t=ne(e),e=ae("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){Al(this);var i=this;return Nl(this,this.render().then(function(e){return new ve(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,G(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){Al(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Al(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ne(this.u);for(;t=e.firstChild;)e.removeChild(t)}},b(kl,bl);var Rl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Pl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Dl(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function xl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:g}}function Ll(t,e){return{name:t||"",J:"a function",optional:!!e,K:f}}function Ml(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Fl(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ia||!e)}}}function Ul(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}}function jl(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Vl(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&f(t.Fa)}function ql(t){return g(t)&&"string"==typeof t.uid}function Bl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||!f(t.verify))}}}function Wl(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function Hl(t,e){for(var n in e){var r=e[n].name;t[r]=Kl(r,t[n],e[n].j)}}function Gl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_(function(t){return this[t]},n),set:_(function(t,e,n,r){Ol(t,[n],[r],!0),this[e]=r},r,n,e[n].gb),enumerable:!0})}}function Ql(t,e,n,r){t[e]=Kl(e,n,r)}function Kl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Ol(s,n,t),e.apply(this,t)}if(!n)return e;var i,o,s=(o=(o=t).split("."))[o.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Hl(zh.prototype,{fb:{name:"applyActionCode",j:[Pl("code")]},Pa:{name:"checkActionCode",j:[Pl("code")]},jb:{name:"confirmPasswordReset",j:[Pl("code"),Pl("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Pl("email"),Pl("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Pl("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Pl("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Wl(xl(),Ll(),"nextOrObserver"),Ll("opt_error",!0),Ll("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Wl(xl(),Ll(),"nextOrObserver"),Ll("opt_error",!0),Ll("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Pl("email"),Wl(xl("opt_actionCodeSettings",!0),Ml(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Pl("email"),xl("actionCodeSettings")]},tb:{name:"setPersistence",j:[Pl("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Fl()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Fl()]},Rc:{name:"signInWithCustomToken",j:[Pl("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Pl("email"),Pl("password")]},Tc:{name:"signInWithEmailLink",j:[Pl("email"),Pl("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Pl("phoneNumber"),Bl()]},Vc:{name:"signInWithPopup",j:[jl()]},Wc:{name:"signInWithRedirect",j:[jl()]},bd:{name:"updateCurrentUser",j:[Wl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof ch)}},Ml(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Pl(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Pl("code")]}}),Gl(zh.prototype,{lc:{name:"languageCode",gb:Wl(Pl(),Ml(),"languageCode")},ti:{name:"tenantId",gb:Wl(Pl(),Ml(),"tenantId")}}),(zh.Persistence=Wu).LOCAL="local",zh.Persistence.SESSION="session",zh.Persistence.NONE="none",Hl(ch.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Dl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Dl("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Fl()]},mb:{name:"linkWithCredential",j:[Fl()]},Bc:{name:"linkWithPhoneNumber",j:[Pl("phoneNumber"),Bl()]},Cc:{name:"linkWithPopup",j:[jl()]},Dc:{name:"linkWithRedirect",j:[jl()]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Fl()]},pb:{name:"reauthenticateWithCredential",j:[Fl()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Pl("phoneNumber"),Bl()]},Lc:{name:"reauthenticateWithPopup",j:[jl()]},Mc:{name:"reauthenticateWithRedirect",j:[jl()]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Wl(xl("opt_actionCodeSettings",!0),Ml(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Pl(null,!0)]},ad:{name:"unlink",j:[Pl("provider")]},xb:{name:"updateEmail",j:[Pl("email")]},yb:{name:"updatePassword",j:[Pl("password")]},cd:{name:"updatePhoneNumber",j:[Fl("phone")]},zb:{name:"updateProfile",j:[xl("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Pl("email"),Wl(xl("opt_actionCodeSettings",!0),Ml(null,!0),"opt_actionCodeSettings",!0)]}}),Hl(ul.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hl(al.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hl(ve.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Gl(Vc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Dl("appVerificationDisabledForTesting")}}),Hl(qc.prototype,{confirm:{name:"confirm",j:[Pl("verificationCode")]}}),Ql(eo,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[uo,Eo,No,oo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Wl(Pl(),xl(),"json")]),Ql(Io,"credential",function(t,e){return new bo(t,e)},[Pl("email"),Pl("password")]),Hl(bo.prototype,{v:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(fo.prototype,{Aa:{name:"addScope",j:[Pl("scope")]},Ia:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Ql(fo,"credential",po,[Wl(Pl(),xl(),"token")]),Ql(Io,"credentialWithLink",To,[Pl("email"),Pl("emailLink")]),Hl(vo.prototype,{Aa:{name:"addScope",j:[Pl("scope")]},Ia:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Ql(vo,"credential",go,[Wl(Pl(),xl(),"token")]),Hl(yo.prototype,{Aa:{name:"addScope",j:[Pl("scope")]},Ia:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Ql(yo,"credential",mo,[Wl(Pl(),Wl(xl(),Ml()),"idToken"),Wl(Pl(),Ml(),"accessToken",!0)]),Hl(_o.prototype,{Ia:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Ql(_o,"credential",wo,[Wl(Pl(),xl(),"token"),Pl("secret",!0)]),Hl(lo.prototype,{Aa:{name:"addScope",j:[Pl("scope")]},credential:{name:"credential",j:[Wl(Pl(),Wl(xl(),Ml()),"optionsOrIdToken"),Wl(Pl(),Ml(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Hl(so.prototype,{v:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(ro.prototype,{v:{name:"toJSON",j:[Pl(null,!0)]}}),Ql(ko,"credential",Oo,[Pl("verificationId"),Pl("verificationCode")]),Hl(ko.prototype,{cb:{name:"verifyPhoneNumber",j:[Wl(Pl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Vl(t.session,Zi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Vl(t.session,to)&&ql(t.multiFactorHint):t.session&&t.multiFactorUid?Vl(t.session,to)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Bl()]}}),Hl(Co.prototype,{v:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(E.prototype,{toJSON:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(jo.prototype,{toJSON:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(Uo.prototype,{toJSON:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(Kc.prototype,{toJSON:{name:"toJSON",j:[Pl(null,!0)]}}),Hl(Hc.prototype,{Pc:{name:"resolveSignIn",j:[Ul()]}}),Hl(Zc.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[Ul(),Pl("displayName",!0)]},$c:{name:"unenroll",j:[Wl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:ql},Pl(),"multiFactorInfoIdentifier")]}}),Hl(kl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ql(pi,"parseLink",bi,[Pl("link")]),Ql(dl,"assertion",function(t){return new Jc(t)},[Fl("phone")]),function(){if(void 0===Xl.a||!Xl.a.INTERNAL||!Xl.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ei,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ti,VERIFY_AND_CHANGE_EMAIL:ni,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:zh,AuthCredential:eo,Error:E};Ql(t,"EmailAuthProvider",Io,[]),Ql(t,"FacebookAuthProvider",fo,[]),Ql(t,"GithubAuthProvider",vo,[]),Ql(t,"GoogleAuthProvider",yo,[]),Ql(t,"TwitterAuthProvider",_o,[]),Ql(t,"OAuthProvider",lo,[Pl("providerId")]),Ql(t,"SAMLAuthProvider",ho,[Pl("providerId")]),Ql(t,"PhoneAuthProvider",ko,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof zh)}}]),Ql(t,"RecaptchaVerifier",kl,[Wl(Pl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),xl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Xl.a.app.App)}}]),Ql(t,"ActionCodeURL",pi,[]),Ql(t,"PhoneMultiFactorGenerator",dl,[]),Xl.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new zh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Xl.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.kc,t),addAuthTokenListener:m(t.bc,t),removeAuthTokenListener:m(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Xl.a.registerVersion("@firebase/auth","0.14.7"),Xl.a.INTERNAL.extendNamespace({User:ch})}()}).apply(void 0!==zl?zl:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}.call(this,n("yLpj"))},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,d=n("mrSG"),v=n("zVF4"),g=n("S+S0"),o=n("q/0M"),s=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),y=new v.ErrorFactory("app","Firebase",s),a="@firebase/app",m="[DEFAULT]",_=((i={})[a]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */),w=new o.Logger("@firebase/app"),u=(Object.defineProperty(c.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),c.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},c.prototype._getService=function(t,e){return void 0===e&&(e=m),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},c.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=m),this.container.getProvider(t).clearInstance(e)},c.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){w.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},c.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},c.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw y.create("app-deleted",{appName:this.name_})},c);function c(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=v.deepCopy(t),this.container=new g.ComponentContainer(e.name),this._addComponent(new g.Component("app",function(){return o},"PUBLIC"));try{for(var s=d.__values(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}u.prototype.name&&u.prototype.options||u.prototype.delete||console.log("dc");var b="7.15.5";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(u){var c={},h=new Map,l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});{"object"==typeof e&&null!==e||(e={name:e})}var n=e;void 0===n.name&&(n.name=m);var r=n.name;if("string"!=typeof r||!r)throw y.create("bad-app-name",{appName:String(r)});if(v.contains(c,r))throw y.create("duplicate-app",{appName:r});var i=new u(t,n,l);return c[r]=i},app:f,registerVersion:function(t,e,n){var r,i=null!==(r=_[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void w.warn(a.join(" "))}p(new g.Component(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:o.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw y.create("invalid-log-argument",{appName:name});o.setUserLogHandler(t,e)},apps:null,SDK_VERSION:b,INTERNAL:{registerComponent:p,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function f(t){if(t=t||m,!v.contains(c,t))throw y.create("no-app",{appName:t});return c[t]}function p(n){var e,t,r,i=n.name;if(h.has(i))return w.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===n.type?l[i]:null;h.set(i,n),"PUBLIC"===n.type&&(r=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[i])throw y.create("invalid-app-argument",{appName:i});return t[i]()},void 0!==n.serviceProps&&v.deepExtend(r,n.serviceProps),l[i]=r,u.prototype[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,i).apply(this,n.multipleInstances?t:[])});try{for(var o=d.__values(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return"PUBLIC"===n.type?l[i]:null}return l.default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l,f=function t(){var e=h(u);return e.INTERNAL=d.__assign(d.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){v.deepExtend(e,t)},createSubscribe:v.createSubscribe,ErrorFactory:v.ErrorFactory,deepExtend:v.deepExtend}),e}(),p=(E.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if("VERSION"!==(null==(e=t.getComponent())?void 0:e.type))return null;var e,n=t.getImmediate();return n.library+"/"+n.version}).filter(function(t){return t}).join(" ")},E);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(t){this.container=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
v.isBrowser()&&void 0!==self.firebase&&(w.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(l=self.firebase.SDK_VERSION)&&0<=l.indexOf("LITE")&&w.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var I=f.initializeApp;f.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return v.isNode()&&w.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),I.apply(void 0,t)};var T,S,C=f;(T=C).INTERNAL.registerComponent(new g.Component("platform-logger",function(t){return new p(t)},"PRIVATE")),T.registerVersion(a,"0.6.7",S),T.registerVersion("fire-js",""),e.default=C,e.firebase=C},x7I3:function(t,zn,Xn){"use strict";Xn.r(zn),function(t){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function a(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}Xn.d(zn,"ErrorCode",function(){return Hn}),Xn.d(zn,"EventType",function(){return Gn}),Xn.d(zn,"WebChannel",function(){return Qn}),Xn.d(zn,"XhrIo",function(){return Kn}),Xn.d(zn,"createWebChannelTransport",function(){return Wn});var e,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},u=u||{},l=n||self;function i(){}function r(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function s(t){var e=r(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var o="closure_uid_"+(1e9*Math.random()>>>0),c=0;function h(t,e,n){return t.call.apply(t.bind,arguments)}function p(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function v(t,e,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:p).apply(null,arguments)}function d(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var g=Date.now||function(){return+new Date};function y(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function m(){this.j,this.i}m.prototype.j=!1,m.prototype.da=function(){var t;!this.j&&(this.j=!0,this.C(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,o)&&t[o]||(t[o]=++c))},m.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var _=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},w=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function b(t){return Array.prototype.concat.apply([],arguments)}function E(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function I(t){return/^[\s\xa0]*$/.test(t)}var T,S=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function C(t,e){return-1!=t.indexOf(e)}function N(t,e){return t<e?-1:e<t?1:0}t:{var A=l.navigator;if(A){var k=A.userAgent;if(k){T=k;break t}}T=""}function O(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function R(t){var e={};for(var n in t)e[n]=t[n];return e}var P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<P.length;o++)n=P[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function x(t){return x[" "](t),t}x[" "]=i;var L,M,F=C(T,"Opera"),U=C(T,"Trident")||C(T,"MSIE"),j=C(T,"Edge"),V=j||U,q=C(T,"Gecko")&&!(C(T.toLowerCase(),"webkit")&&!C(T,"Edge"))&&!(C(T,"Trident")||C(T,"MSIE"))&&!C(T,"Edge"),B=C(T.toLowerCase(),"webkit")&&!C(T,"Edge");function W(){var t=l.document;return t?t.documentMode:void 0}t:{var H="",G=(M=T,q?/rv:([^\);]+)(\)|;)/.exec(M):j?/Edge\/([\d\.]+)/.exec(M):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(M):B?/WebKit\/(\S+)/.exec(M):F?/(?:Version)[ \/]?(\S+)/.exec(M):void 0);if(G&&(H=G?G[1]:""),U){var Q=W();if(null!=Q&&Q>parseFloat(H)){L=String(Q);break t}}L=H}var K={};function z(a){return t=a,e=function(){for(var t=0,e=S(String(L)).split("."),n=S(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=N(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||N(0==o[2].length,0==s[2].length)||N(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=K,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var X=l.document&&U?W()||(parseInt(L,10)||void 0):void 0,Y=!U||9<=Number(X),J=U&&!z("9"),$=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",i,e),l.removeEventListener("test",i,e)}catch(t){}return t}();function Z(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function tt(t,e){if(Z.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(q){t:{try{x(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:et[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Z.prototype.b=function(){this.defaultPrevented=!0},y(tt,Z);var et={2:"touch",3:"pen",4:"mouse"};tt.prototype.b=function(){tt.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,J)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var nt="closure_listenable_"+(1e6*Math.random()|0),rt=0;function it(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++rt,this.V=this.X=!1}function ot(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function st(t){this.src=t,this.a={},this.b=0}function at(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=_(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(ot(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function ut(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}st.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ut(t,e,r,i);return-1<s?(e=t[s],n||(e.X=!1)):((e=new it(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var ct="closure_lm_"+(1e6*Math.random()|0),ht={};function lt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=_t(r);return e&&e[nt]?e.sa(n,r,f(i)?!!i.capture:!!i,o):ft(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)lt(t,e[o],n,r,i);return null}return n=_t(n),t&&t[nt]?t.ra(e,n,f(r)?!!r.capture:!!r,i):ft(t,e,n,!1,r,i)}function ft(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=f(i)?!!i.capture:!!i;if(s&&!Y)return null;var a,u,c=yt(t);if(c||(t[ct]=c=new st(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=gt,r=u=Y?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)$||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(dt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function pt(t){var e,n,r;"number"!=typeof t&&t&&!t.V&&((e=t.src)&&e[nt]?at(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(dt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yt(e))?(at(n,t),0==n.b&&(n.src=null,e[ct]=null)):ot(t)))}function dt(t){return t in ht?ht[t]:ht[t]="on"+t}function vt(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&pt(t),n.call(r,e)}function gt(t,e){if(t.V)return!0;if(Y)return vt(t,new tt(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return vt(t,e=new tt(e,this))}function yt(t){return(t=t[ct])instanceof st?t:null}var mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function _t(e){return"function"==r(e)?e:(e[mt]||(e[mt]=function(t){return e.handleEvent(t)}),e[mt])}function wt(){m.call(this),this.c=new st(this),(this.J=this).A=null}function bt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.V&&u.capture==n&&(s=u.listener,a=u.aa||u.src,u.X&&at(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}y(wt,m),wt.prototype[nt]=!0,(e=wt.prototype).addEventListener=function(t,e,n,r){lt(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=f(i)?!!i.capture:!!i,r=_t(r),e&&e[nt]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=ut(s=e.a[n],r,i,o))&&(ot(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&yt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ut(n,r,i,o)),(r=-1<e?n[e]:null)&&pt(r))}(this,t,e,n,r)},e.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t?t=new Z(t,n):t instanceof Z?t.target=t.target||n:(s=t,D(t=new Z(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.a=e[i],s=bt(o,r,!0,t)&&s;if(s=bt(o=t.a=n,r,!0,t)&&s,s=bt(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=bt(o=t.a=e[i],r,!1,t)&&s;return s},e.C=function(){if(wt.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ot(n[r]);delete e.a[t],e.b--}}this.A=null},e.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},e.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Et=l.JSON.stringify;function It(){this.b=this.a=null}var Tt,St=(Ct.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Ct(function(){return new Nt},function(t){t.reset()},100));function Ct(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function Nt(){this.next=this.b=this.a=null}function At(t,e){var n;Tt||(n=l.Promise.resolve(void 0),Tt=function(){n.then(Rt)}),kt||(Tt(),kt=!0),Ot.add(t,e)}It.prototype.add=function(t,e){var n=St.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Nt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var kt=!(Nt.prototype.reset=function(){this.next=this.b=this.a=null}),Ot=new It;function Rt(){for(var t,e,n;n=e=void 0,n=null,(e=Ot).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){l.setTimeout(function(){throw t},0)}(t)}var r=St;r.g(t),r.b<r.f&&(r.b++,t.next=r.a,r.a=t)}kt=!1}function Pt(t,e){wt.call(this),this.b=t||1,this.a=e||l,this.f=v(this.Ua,this),this.g=g()}function Dt(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function xt(t,e,n){if("function"==r(t))n&&(t=v(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=v(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function Lt(t,e,n){m.call(this),this.f=null!=n?v(t,n):t,this.c=e,this.b=v(this.Pa,this),this.a=[]}function Mt(t){t.T=xt(t.b,t.c),t.f.apply(null,t.a)}function Ft(t){m.call(this),this.b=t,this.a={}}y(Pt,wt),(e=Pt.prototype).Z=!1,e.L=null,e.Ua=function(){var t;this.Z&&(0<(t=g()-this.g)&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(Dt(this),this.start())))},e.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=g())},e.C=function(){Pt.M.C.call(this),Dt(this),delete this.a},y(Lt,m),(e=Lt.prototype).ba=!1,e.T=null,e.Ia=function(t){this.a=arguments,this.T?this.ba=!0:Mt(this)},e.C=function(){Lt.M.C.call(this),this.T&&(l.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},e.Pa=function(){this.T=null,this.ba&&(this.ba=!1,Mt(this))},y(Ft,m);var Ut=[];function jt(t,e,n,r){Array.isArray(n)||(n&&(Ut[0]=n.toString()),n=Ut);for(var i=0;i<n.length;i++){var o=lt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Vt(t){O(t.a,function(t,e){this.a.hasOwnProperty(e)&&pt(t)},t),t.a={}}function qt(){}Ft.prototype.C=function(){Ft.M.C.call(this),Vt(this)},Ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bt=null;function Wt(){return Bt=Bt||new wt}function Ht(t){Z.call(this,"serverreachability",t)}function Gt(t){var e=Wt();e.dispatchEvent(new Ht(e))}function Qt(t){Z.call(this,"statevent",t)}function Kt(t){var e=Wt();e.dispatchEvent(new Qt(e))}function zt(t){Z.call(this,"timingevent",t)}function Xt(t,e){if("function"!=r(t))throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){t()},e)}y(Ht,Z),y(Qt,Z),y(zt,Z);var Yt={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},Jt={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function $t(){}function Zt(t){var e;return(e=t.a)||(e=t.a={}),e}function te(){}$t.prototype.a=null;var ee,ne={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function re(){Z.call(this,"d")}function ie(){Z.call(this,"c")}function oe(){}function se(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new Ft(this),this.N=ae,t=V?125:void 0,this.O=new Pt(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}y(re,Z),y(ie,Z),y(oe,$t),ee=new oe;var ae=45e3,ue={},ce={};function he(t,e,n){t.B=1,t.f=Re(Se(e)),t.j=n,t.F=!0,le(t,null)}function le(t,e){t.s=g(),pe(t),t.A=Se(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),He(n.b,"t",r),t.w=0,t.a=Ln(t.g,t.g.w?e:null),0<t.J&&(t.D=new Lt(v(t.ya,t,t.a),t.J)),jt(t.G,t.a,"readystatechange",t.Sa),e=t.m?R(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),Gt(1)}function fe(t,e,n){for(var r,i,o,s,a=!0;!t.l&&t.w<n.length;){var u=(i=n,s=o=void 0,o=(r=t).w,-1==(s=i.indexOf("\n",o))?ce:(o=Number(i.substring(o,s)),isNaN(o)?ue:(s+=1)+o>i.length?ce:(i=i.substr(s,o),r.w=s+o,i)));if(u==ce){4==e&&(t.c=4,Kt(14),a=!1);break}if(u==ue){t.c=4,Kt(15),a=!1;break}me(t,u)}4==e&&0==n.length&&(t.c=1,Kt(16),a=!1),t.b=t.b&&a,a||(ye(t),ge(t))}function pe(t){t.P=g()+t.N,de(t,t.N)}function de(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=Xt(v(t.Qa,t),e)}function ve(t){t.h&&(l.clearTimeout(t.h),t.h=null)}function ge(t){0==t.g.u||t.l||On(t.g,t)}function ye(t){ve(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,Dt(t.O),Vt(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function me(t,e){try{var n,r,i,o,s,a,u,c,h,l,f=t.g;if(0!=f.u&&(f.a==t||Je(f.b,t)))if(f.A=t.H,!t.o&&Je(f.b,t)&&3==f.u){try{var p=f.ja.a.parse(e)}catch(t){p=null}if(Array.isArray(p)&&3==p.length){var d=p;if(0==d[0]){t:if(!f.i){if(f.a){if(!(f.a.s+3e3<t.s))break t;kn(f),f.a.cancel(),f.a=null}An(f),Kt(18)}}else f.ia=d[1],0<f.ia-f.G&&d[2]<37500&&f.U&&0==f.m&&!f.l&&(f.l=Xt(v(f.Na,f),6e3));if(Ye(f.b)<=1&&f.O){try{f.O()}catch(t){}f.O=void 0}}else Pn(f,11)}else if(!t.o&&f.a!=t||kn(f),!I(e))for(e=p=f.ja.a.parse(e),p=0;p<e.length;p++){d=e[p],f.G=d[0],d=d[1],2==f.u?"c"==d[0]?(f.B=d[1],f.R=d[2],null!=(n=d[3])&&(f.oa=n),null!=(r=d[5])&&"number"==typeof r&&0<r&&(f.D=1.5*r),i=f,(o=t.a)&&(!(s=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(a=i.b).a&&(C(s,"spdy")||C(s,"quic")||C(s,"h2"))&&(a.f=a.g,a.a=new Set,a.b&&($e(a,a.b),a.b=null)),!i.s||(u=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(i.ha=u,Oe(i.v,i.s,u))),f.u=3,f.c&&f.c.na(),c=t,(i=f).ea=xn(i,i.w?i.R:null,i.P),c.o?(Ze(i.b,c),h=c,(l=i.D)&&h.setTimeout(l),h.h&&(ve(h),pe(h)),i.a=c):Nn(i),0<f.f.length&&In(f)):"stop"!=d[0]&&"close"!=d[0]||Pn(f,7):3==f.u&&("stop"==d[0]||"close"==d[0]?"stop"==d[0]?Pn(f,7):wn(f):"noop"!=d[0]&&f.c&&f.c.ma(d),f.m=0)}Gt(4)}catch(t){}}function _e(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(s(t)||"string"==typeof t)w(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(s(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(s(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function we(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof we)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function be(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ee(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)Ee(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Ee(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(e=se.prototype).setTimeout=function(t){this.N=t},e.Sa=function(t){t=t.target;var e=this.D;e&&3==gn(t)?e.Ia():this.ya(t)},e.ya=function(t){try{if(t==this.a)t:{var e=gn(this.a),n=this.a.qa(),r=this.a.S();if(!(e<3||3==e&&!V&&!this.a.Y())){this.l||4!=e||7==n||Gt(8==n||r<=0?3:2),ve(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.c=3,Kt(12),ye(this),ge(this);break t}this.o=!0,me(this,u)}this.F?(fe(this,e,o),V&&this.b&&3==e&&(jt(this.G,this.O,"tick",this.Ra),this.O.start())):me(this,o),4==e&&ye(this),this.b&&!this.l&&(4==e?On(this.g,this):(this.b=!1,pe(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Kt(12)):(this.c=0,Kt(13)),ye(this),ge(this)}}}catch(t){}},e.Ra=function(){var t,e;this.a&&(t=gn(this.a),e=this.a.Y(),this.w<e.length&&(ve(this),fe(this,t,e),this.b&&4!=t&&pe(this)))},e.cancel=function(){this.l=!0,ye(this)},e.Qa=function(){this.h=null;var t=g();0<=t-this.P?(2!=this.B&&(Gt(3),Kt(17)),ye(this),this.c=2,ge(this)):de(this,this.P-t)},(e=we.prototype).I=function(){be(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.K=function(){return be(this),this.a.concat()},e.get=function(t,e){return Ee(this.b,t)?this.b[t]:e},e.set=function(t,e){Ee(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ie=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Te(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Te?(this.a=void 0!==e?e:t.a,Ce(this,t.f),this.j=t.j,Ne(this,t.c),Ae(this,t.h),this.g=t.g,e=t.b,(n=new Ve).c=e.c,e.a&&(n.a=new we(e.a),n.b=e.b),ke(this,n),this.i=t.i):t&&(n=String(t).match(Ie))?(this.a=!!e,Ce(this,n[1]||"",!0),this.j=Pe(n[2]||""),Ne(this,n[3]||"",!0),Ae(this,n[4]),this.g=Pe(n[5]||"",!0),ke(this,n[6]||"",!0),this.i=Pe(n[7]||"")):(this.a=!!e,this.b=new Ve(null,this.a))}function Se(t){return new Te(t)}function Ce(t,e,n){t.f=n?Pe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ne(t,e,n){t.c=n?Pe(e,!0):e}function Ae(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ke(t,e,n){var r,i;e instanceof Ve?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(qe(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Be(this,e),He(this,n,t))},r)),r.f=i):(n||(e=De(e,Ue)),t.b=new Ve(e,t.a))}function Oe(t,e,n){t.b.set(e,n)}function Re(t){return Oe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^g()).toString(36)),t}function Pe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function De(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,xe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Te.prototype.toString=function(){var t=[],e=this.f;e&&t.push(De(e,Le,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(De(e,Le,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(De(n,"/"==n.charAt(0)?Fe:Me,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",De(n,je)),t.join("")};var Le=/[#\/\?@]/g,Me=/[#\?:]/g,Fe=/[#\?]/g,Ue=/[#\?@]/g,je=/#/g;function Ve(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function qe(n){n.a||(n.a=new we,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Be(t,e){qe(t),e=Ge(t,e),Ee(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ee((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&be(t)))}function We(t,e){return qe(t),e=Ge(t,e),Ee(t.a.b,e)}function He(t,e,n){Be(t,e),0<n.length&&(t.c=null,t.a.set(Ge(t,e),E(n)),t.b+=n.length)}function Ge(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Qe(t,e){this.b=t,this.a=e}function Ke(t){this.g=t||ze,t=l.PerformanceNavigationTiming?0<(t=l.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(l.ca&&l.ca.ua&&l.ca.ua()&&l.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(e=Ve.prototype).add=function(t,e){qe(this),this.c=null,t=Ge(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.forEach=function(n,r){qe(this),this.a.forEach(function(t,e){w(t,function(t){n.call(r,t,e,this)},this)},this)},e.K=function(){qe(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.I=function(t){qe(this);var e=[];if("string"==typeof t)We(this,t)&&(e=b(e,this.a.get(Ge(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=b(e,t[n])}return e},e.set=function(t,e){return qe(this),this.c=null,We(this,t=Ge(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.I(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var ze=10;function Xe(t){return t.b||t.a&&t.a.size>=t.f}function Ye(t){return t.b?1:t.a?t.a.size:0}function Je(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function $e(t,e){t.a?t.a.add(e):t.b=e}function Ze(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function tn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null==t.a||0===t.a.size)return E(t.c);var r=t.c;try{for(var i=a(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.i)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function en(){}function nn(){this.a=new en}function rn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Ke.prototype.cancel=function(){var e,t;if(this.c=tn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=a(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},en.prototype.stringify=function(t){return l.JSON.stringify(t,void 0)},en.prototype.parse=function(t){return l.JSON.parse(t,void 0)};var on=l.JSON.parse;function sn(t){wt.call(this),this.headers=new we,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=an,this.B=this.F=!1}y(sn,wt);var an="",un=/^https?$/i,cn=["POST","PUT"];function hn(t){return"content-type"==t.toLowerCase()}function ln(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,fn(t),dn(t)}function fn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function pn(t){if(t.b&&void 0!==u&&(!t.s[1]||4!=gn(t)||2!=t.S()))if(t.l&&4==gn(t))xt(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==gn(t)){t.b=!1;try{var e,n,r,i,o=t.S();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.D).match(Ie)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!un.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<gn(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.S()+"]",fn(t)}}finally{dn(t)}}}function dn(t,e){if(t.a){vn(t);var n=t.a,r=t.s[0]?i:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function vn(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(l.clearTimeout(t.m),t.m=null)}function gn(t){return t.a?t.a.readyState:0}function yn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",O(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Oe(t,e,n))}function mn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function _n(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=mn("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=mn("baseRetryDelayMs",5e3,t),this.Ga=mn("retryDelaySeedMs",1e4,t),this.Da=mn("forwardChannelMaxRetries",2,t),this.ga=mn("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new Ke(t&&t.concurrentRequestLimit),this.ja=new nn,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function wn(t){var e,n;bn(t),3==t.u&&(e=t.H++,Oe(n=Se(t.v),"SID",t.B),Oe(n,"RID",e),Oe(n,"TYPE","terminate"),Sn(t,n),(e=new se(t,e,void 0)).B=2,e.f=Re(Se(n)),n=!1,l.navigator&&l.navigator.sendBeacon&&(n=l.navigator.sendBeacon(e.f.toString(),"")),!n&&l.Image&&((new Image).src=e.f,n=!0),n||(e.a=Ln(e.g,null),e.a.$(e.f)),e.s=g(),pe(e)),Dn(t)}function bn(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(l.clearTimeout(t.i),t.i=null),kn(t),t.b.cancel(),t.g&&("number"==typeof t.g&&l.clearTimeout(t.g),t.g=null)}function En(t,e){t.f.push(new Qe(t.Fa++,e)),3==t.u&&In(t)}function In(t){Xe(t.b)||t.g||(t.g=!0,At(t.xa,t),t.o=0)}function Tn(t,e){var n=e?e.W:t.H++,r=Se(t.v);Oe(r,"SID",t.B),Oe(r,"RID",n),Oe(r,"AID",t.G),Sn(t,r),t.h&&t.j&&yn(r,t.h,t.j),n=new se(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=Cn(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),$e(t.b,n),he(n,r,e)}function Sn(t,n){t.c&&_e({},function(t,e){Oe(n,e,t)})}function Cn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?v(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r,e){var i=e||"";try{_e(t,function(t,e){var n=t;f(t)&&(n=Et(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function Nn(t){t.a||t.i||(t.J=1,At(t.wa,t),t.m=0)}function An(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=Xt(v(t.wa,t),Rn(t,t.m)),t.m++,1)}function kn(t){null!=t.l&&(l.clearTimeout(t.l),t.l=null)}function On(t,e){var n,r=null;if(t.a==e){kn(t),t.a=null;var i=2}else{if(!Je(t.b,e))return;r=e.i,Ze(t.b,e),i=1}if(t.A=e.H,0!=t.u)if(e.b){1==i?(r=e.j?e.j.length:0,e=g()-e.s,n=t.o,(i=Wt()).dispatchEvent(new zt(i)),In(t)):Nn(t)}else if(3==(n=e.c)||0==n&&0<t.A||!(1==i&&function(t,e){if(!(Ye(t.b)>=t.b.f-(t.g?1:0))){if(t.g)return t.f=e.i.concat(t.f),1;if(!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da)))return t.g=Xt(v(t.xa,t,e),Rn(t,t.o)),t.o++,1}}(t,e)||2==i&&An(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:Pn(t,5);break;case 4:Pn(t,10);break;case 3:Pn(t,6);break;default:Pn(t,2)}}function Rn(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function Pn(t,e){var n,r,i,o,s,a;2==e?(n=null,t.c&&(n=null),r=v(t.Ta,t),n||(n=new Te("//www.google.com/images/cleardot.gif"),l.location&&"http"==l.location.protocol||Ce(n,"https"),Re(n)),i=n.toString(),o=r,a=new qt,l.Image?((s=new Image).onload=d(rn,a,s,"TestLoadImage: loaded",!0,o),s.onerror=d(rn,a,s,"TestLoadImage: error",!1,o),s.onabort=d(rn,a,s,"TestLoadImage: abort",!1,o),s.ontimeout=d(rn,a,s,"TestLoadImage: timeout",!1,o),l.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i):o(!1)):Kt(2),t.u=0,t.c&&t.c.la(e),Dn(t),bn(t)}function Dn(t){t.u=0,t.A=-1,t.c&&(0==tn(t.b).length&&0==t.f.length||(t.b.c.length=0,E(t.f),t.f.length=0),t.c.ka())}function xn(t,e,n){var r,i,o,s,a,u,c,h=(r=n)instanceof Te?Se(r):new Te(r,void 0);return""!=h.c?(e&&Ne(h,e+"."+h.c),Ae(h,h.h)):(i=l.location,o=i.protocol,s=e?e+"."+i.hostname:i.hostname,a=+i.port,u=n,c=new Te(null,void 0),o&&Ce(c,o),s&&Ne(c,s),a&&Ae(c,a),u&&(c.g=u),h=c),t.N&&O(t.N,function(t,e){Oe(h,e,t)}),e=t.s,n=t.ha,e&&n&&Oe(h,e,n),Oe(h,"VER",t.oa),Sn(t,h),h}function Ln(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new sn(t.Ea)).F=t.w,e}function Mn(){}function Fn(){if(U&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function Un(t,e){wt.call(this),this.a=new _n(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!I(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!I(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new qn(this)}function jn(t){re.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Vn(){ie.call(this),this.status=1}function qn(t){this.a=t}(e=sn.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?Zt(this.G):Zt(ee),this.a.onreadystatechange=v(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void ln(this,t)}t=n||"";var i,o=new we(this.headers);r&&_e(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=hn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.K()),n=l.FormData&&t instanceof l.FormData,0<=_(cn,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{vn(this),0<this.o&&((this.B=(i=this.a,U&&z(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=v(this.ta,this)):this.m=xt(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){ln(this,t)}},e.ta=function(){void 0!==u&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),dn(this))},e.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),dn(this,!0)),sn.M.C.call(this)},e.va=function(){this.j||(this.w||this.l||this.g?pn(this):this.Oa())},e.Oa=function(){pn(this)},e.S=function(){try{return 2<gn(this)?this.a.status:-1}catch(t){return-1}},e.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},e.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),on(e)}},e.qa=function(){return this.h},e.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(e=_n.prototype).oa=8,e.u=1,e.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random()),t=this.H++;var e,n=new se(this,t,void 0),r=this.j;if(this.F&&(r?D(r=R(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Cn(this,n,e),Oe(i=Se(this.v),"RID",t),Oe(i,"CVER",22),this.s&&Oe(i,"X-HTTP-Session-Id",this.s),Sn(this,i),this.h&&r&&yn(i,this.h,r),$e(this.b,n),this.fa?(Oe(i,"$req",e),Oe(i,"SID","null"),n.R=!0,he(n,i,null)):he(n,i,e),this.u=2}}else 3==this.u&&(t?Tn(this,t):0==this.f.length||Xe(this.b)||Tn(this))},e.wa=function(){this.i=null,this.a=new se(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=Se(this.ea);Oe(t,"RID","rpc"),Oe(t,"SID",this.B),Oe(t,"CI",this.U?"0":"1"),Oe(t,"AID",this.G),Sn(this,t),Oe(t,"TYPE","xmlhttp"),this.h&&this.j&&yn(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=Re(Se(t)),e.j=null,e.F=!0,le(e,n)},e.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,An(this),Kt(19))},e.Ta=function(t){Kt(t?2:1)},(e=Mn.prototype).na=function(){},e.ma=function(){},e.la=function(){},e.ka=function(){},e.Ha=function(){},Fn.prototype.a=function(t,e){return new Un(t,e)},y(Un,wt),(e=Un.prototype).addEventListener=function(t,e,n,r){Un.M.addEventListener.call(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){Un.M.removeEventListener.call(this,t,e,n,r)},e.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;Kt(0),t.P=e,t.N=n||{},t.U=t.W,t.v=xn(t,null,t.P),In(t)},e.close=function(){wn(this.a)},e.La=function(t){var e;"string"==typeof t?((e={}).__data__=t,En(this.a,e)):this.g?((e={}).__data__=Et(t),En(this.a,e)):En(this.a,t)},e.C=function(){this.a.c=null,delete this.f,wn(this.a),delete this.a,Un.M.C.call(this)},y(jn,re),y(Vn,ie),y(qn,Mn),qn.prototype.na=function(){this.a.dispatchEvent("a")},qn.prototype.ma=function(t){this.a.dispatchEvent(new jn(t))},qn.prototype.la=function(t){this.a.dispatchEvent(new Vn)},qn.prototype.ka=function(){this.a.dispatchEvent("b")},Fn.prototype.createWebChannel=Fn.prototype.a,Un.prototype.send=Un.prototype.La,Un.prototype.open=Un.prototype.Ka,Yt.NO_ERROR=0,Yt.TIMEOUT=8,Yt.HTTP_ERROR=6,Jt.COMPLETE="complete",(te.EventType=ne).OPEN="a",ne.CLOSE="b",ne.ERROR="c",ne.MESSAGE="d",wt.prototype.listen=wt.prototype.ra,sn.prototype.listenOnce=sn.prototype.sa,sn.prototype.getLastError=sn.prototype.Ma,sn.prototype.getLastErrorCode=sn.prototype.qa,sn.prototype.getStatus=sn.prototype.S,sn.prototype.getResponseJson=sn.prototype.Ja,sn.prototype.getResponseText=sn.prototype.Y,sn.prototype.send=sn.prototype.$;var Bn={createWebChannelTransport:function(){return new Fn},ErrorCode:Yt,EventType:Jt,WebChannel:te,XhrIo:sn},Wn=Bn.createWebChannelTransport,Hn=Bn.ErrorCode,Gn=Bn.EventType,Qn=Bn.WebChannel,Kn=Bn.XhrIo;zn.default=Bn}.call(this,Xn("yLpj"))},zVF4:function(t,A,k){"use strict";(function(t){Object.defineProperty(A,"__esModule",{value:!0});function s(t,e){if(!t)throw i(e)}function n(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function a(t){try{return o.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var e=k("mrSG"),r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},i=function(t){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(n(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c,h,l=o<<2|s>>4;r.push(l),64!==a&&(c=s<<4&240|a>>2,r.push(c),64!==u&&(h=a<<6&192|u,r.push(h)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=u(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c=(h.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},h);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var p,d="FirebaseError",v=(p=Error,e.__extends(g,p),g);function g(t,e){var n=p.call(this,e)||this;return n.code=t,n.name=d,Object.setPrototypeOf(n,g.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,y.prototype.create),n}var y=(m.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,s=this.errors[t],a=s?(r=i,s.replace(_,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",u=this.serviceName+": "+a+" ("+o+").",c=new v(o,u),h=0,l=Object.keys(i);h<l.length;h++){var f=l[h];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=i[f])}return c},m);function m(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var _=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(t){return JSON.parse(t)}function b(t){var e={},n={},r={},i="";try{var o=t.split("."),e=w(a(o[0])||""),n=w(a(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var E=(I.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},I.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++)s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},I.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},I.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},I);function I(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}var T=(S.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},S.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},S.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},S.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"==typeof t&&null!==t)for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return 1}}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},S.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},S.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},S.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},S.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},S);function S(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function C(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}A.CONSTANTS=r,A.Deferred=c,A.ErrorFactory=y,A.FirebaseError=v,A.Sha1=E,A.assert=s,A.assertionError=i,A.async=function(n,r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve(!0).then(function(){n.apply(void 0,t)}).catch(function(t){r&&r(t)})}},A.base64=o,A.base64Decode=a,A.base64Encode=function(t){var e=n(t);return o.encodeByteArray(e,!0)},A.contains=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},A.createSubscribe=function(t,e){var n=new T(t,e);return n.subscribe.bind(n)},A.decode=b,A.deepCopy=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return u(void 0,t)},A.deepExtend=u,A.errorPrefix=N,A.getUA=l,A.isAdmin=function(t){var e=b(t).claims;return"object"==typeof e&&!0===e.admin},A.isBrowser=function(){return"object"==typeof self&&self.self===self},A.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},A.isElectron=function(){return 0<=l().indexOf("Electron/")},A.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},A.isIE=function(){var t=l();return 0<=t.indexOf("MSIE ")||0<=t.indexOf("Trident/")},A.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())},A.isNode=f,A.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},A.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},A.isSafari=function(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},A.isUWP=function(){return 0<=l().indexOf("MSAppHost/")},A.isValidFormat=function(t){var e=b(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},A.isValidTimestamp=function(t){var e=b(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&r<=n&&n<=i},A.issuedAtTime=function(t){var e=b(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},A.jsonEval=w,A.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,A.querystring=function(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""},A.querystringDecode=function(t){var n={};return t.replace(/^\?/,"").split("&").forEach(function(t){var e;t&&(e=t.split("="),n[e[0]]=e[1])}),n},A.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},A.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e},A.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,s(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e},A.stringify=function(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,A.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},A.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(N(t,e,r)+"must be a valid function.")},A.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(N(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,A.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(N(t,e,r)+"must be a valid firebase namespace.")}}).call(this,k("yLpj"))}}]);