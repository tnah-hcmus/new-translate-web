(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"3irV":function(e,t,a){"use strict";a.r(t);function p(e){var t=/[^/\\&\?]+\.\w{3,4}(?=[\?&].*$|$)/.exec(e)[0];return t.substring(t.lastIndexOf("."))}function b(e,t){var a=window.URL.createObjectURL(new Blob([e])),n=document.createElement("a");n.href=a,n.setAttribute("download",t),document.body.appendChild(n),n.click()}var n=a("J4zp"),N=a.n(n),x=a("q1tI"),O=a.n(x),o=a("FjVW"),i=a("58q0"),r=a("/MKj"),l=a("o0o1"),f=a.n(l),c=a("yXPU"),s=a.n(c),d=a("vDqi"),h=a.n(d),u=a("xOOu"),w=a.n(u),C=function(){var a=s()(f.a.mark(function e(a,n){var o,i,r,l,c,s,d,u,m;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((o=document.getElementById(n+"-download-image")).innerHTML="Downloading",-1!==(t=a).indexOf(".jpg")||-1!==t.indexOf(".png")||-1!==t.indexOf(".gif")||-1!==t.indexOf(".gifv"))return e.next=5,h.a.get("https://young-moon-cab4.tnah-work.workers.dev/?"+a,{responseType:"arraybuffer",headers:{"Content-Type":"application/json",Accept:"application/image/*"}});e.next=10;break;case 5:i=e.sent,b(i.data,"RVN-"+n+p(a)),o.innerHTML="Downloaded",e.next=33;break;case 10:if(a.startsWith("http://imgur.com/a/")||a.startsWith("https://imgur.com/a/"))return r=a.substring(a.lastIndexOf("/")+1),e.next=14,h.a.get("https://api.imgur.com/3/album/"+r,{headers:{"Content-Type":"application/json",authorization:"Client-ID 0d6763dedc73059"}});e.next=26;break;case 14:return l=e.sent,c=new w.a,s=l.data.data.images.map(function(t){return h.a.get("https://young-moon-cab4.tnah-work.workers.dev/?"+t.link,{responseType:"arraybuffer",headers:{"Content-Type":"application/json"}}).then(function(e){c.file(t.id+p(a),e.data,{base64:!0})})}),e.next=19,Promise.all(s);case 19:return e.next=21,c.generateAsync({type:"uint8array"});case 21:d=e.sent,b(d,"RVN-"+r+".zip"),o.innerHTML="Downloaded",e.next=33;break;case 26:if(a.startsWith("http://imgur.com/")||a.startsWith("https://imgur.com/"))return u=a.substring(a.lastIndexOf("/")+1),e.next=30,h.a.get("https://api.imgur.com/3/image/"+u,{responseType:"arraybuffer",headers:{"Content-Type":"application/json",authorization:"Client-ID 0d6763dedc73059"}});e.next=33;break;case 30:m=e.sent,b(m.data,"RVN-"+n+p(a)),o.innerHTML="Downloaded";case 33:case"end":return e.stop()}var t},e)}));return function(e,t){return a.apply(this,arguments)}}(),T=a("IGOO"),j=(a("FNPF"),a("ivRL")),D=a("USR9"),I=Object(x.lazy)(function(){return Promise.all([a.e(1),a.e(6)]).then(a.bind(null,"587b"))}),m={deleteTab:o.b,deleteAllReplies:i.b};t.default=Object(r.b)(null,m)(function(e){var t=Object(x.useState)(!1),a=N()(t,2),n=a[0],o=a[1],i=Object(x.useState)(!1),r=N()(i,2),l=r[0],c=r[1],s=Object(x.useState)(!1),d=N()(s,2),u=d[0],m=d[1],p=Object(x.useContext)(j.a),b=p.tabID,f=p.link,h=p.title,w=p.subReddit,g=p.upvotes,y=p.id,k=p.uuid,v=p.savePost,E=p.credit;return O.a.createElement("header",{className:"section-header"},O.a.createElement("div",{className:"section-wrapper"},O.a.createElement("h1",null,O.a.createElement("svg",{className:"section-icon"},O.a.createElement("use",{xlinkHref:e.iconHref})),h?h+" (Subreddit: ".concat(w," | ").concat(g," points)"):"Tab này chưa có bài dịch nào"),O.a.createElement("div",null,O.a.createElement("form",{onSubmit:e.handleSubmitLink,style:{display:"flex"}},O.a.createElement("input",{className:"demo-input",name:"link","aria-label":"Link to translate",placeholder:"Nhập link reddit để bắt đầu dịch",defaultValue:f.replace(/(\/+)$/,"")||"",disabled:""!==f}),O.a.createElement("button",{className:"demo-button"},"Bắt đầu dịch")),O.a.createElement("p",null,"Mở ",O.a.createElement("a",{href:f?f.replace(/(\/+)$/,""):"blank"!==e.category?"https://www.reddit.com/".concat(e.category):"https://www.reddit.com/",target:"_blank"},"link reddit này",O.a.createElement("span",{className:"u-visible-to-screen-reader"},"(opens in new window)"))," trong tab mới."),O.a.createElement("div",{className:"wrap",style:{justifyContent:"space-between",marginRight:"10%"}},O.a.createElement("div",{style:{marginBottom:"5px"}},O.a.createElement("button",{className:"demo-button",id:b+"-preview",onClick:e.previewContent},"Preview"),O.a.createElement("button",{className:"demo-button",id:b+"-note",onClick:function(){return o(!0)}},"Note"),O.a.createElement("button",{className:"demo-button",id:b+"-save",onClick:function(){v().then(function(){D.a.ref(y).child(k).set({timemark:Date.now(),credit:""!==E?E:"Một member chăm chỉ nào đó"})})}},"Save"),O.a.createElement("button",{className:"demo-button",id:b+"-delete",onClick:function(){Object(T.confirmAlert)({title:"Bạn chắc chứ ?",message:"Bạn thật sự muốn xoá tab này ?",buttons:[{label:"Xoá",onClick:function(){e.deleteTab(b,e.category),e.deleteAllReplies(b),D.a.ref("".concat(y,"/").concat(k)).remove()}},{label:"Mình nhầm"}]})}},"Delete")),O.a.createElement("form",{style:{display:"flex"},onSubmit:e.handleSubmitCredit},O.a.createElement("input",{className:"demo-input",name:"credit",id:b+"-credit","aria-label":"credit",placeholder:"Thêm credit",defaultValue:""}),O.a.createElement("button",{className:"demo-button"},""===e.credit?"Thêm credit":"Sửa credit"))),O.a.createElement("div",{className:"wrap",style:{justifyContent:"space-between",marginRight:"10%",marginTop:"10px"}},O.a.createElement("button",{className:"demo-button download",id:b+"-download-video",onClick:function(){e.isVideo&&c(!0)},disabled:l||!e.isVideo},e.isVideo?"Download Video":"No video found"),O.a.createElement("button",{className:"demo-button download",id:b+"-g-trans",onClick:function(){e.setHelper(!e.helper),e.setGoogleHelper()}},e.helper?"Translator helper: ON":"Translator helper: OFF"),O.a.createElement("button",{className:"demo-button",id:b+"-download-image",onClick:function(){e.url&&(m(!0),C(e.url,b))},disabled:u||!e.isImage},e.isImage?"Download Image":"No image found")),l&&O.a.createElement("iframe",{key:b,src:"https://down-583a6.web.app/?video="+btoa(e.fallbackUrl)+"&audio="+btoa(e.url+"/audio"),style:{display:"none"}}))),O.a.createElement(x.Suspense,{fallback:O.a.createElement("div",null),key:b+"-note-suspense"},O.a.createElement(I,{isOpen:n,key:b+"-note",name:b,saveNote:e.saveNote,close:function(){o(!1)}})))})}}]);